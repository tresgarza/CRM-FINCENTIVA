{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Link,useNavigate}from'react-router-dom';import MainLayout from'../components/layout/MainLayout';import{getClientById,getClientApplications}from'../services/clientService';import{getClientDocuments}from'../services/documentService';import{PERMISSIONS}from'../utils/constants/permissions';import{usePermissions}from'../contexts/PermissionsContext';import{formatCurrency}from'../utils/formatters';import{FiFile,FiDownload}from'react-icons/fi';import{supabase}from'../lib/supabaseClient';// Constantes para mapear valores de códigos a nombres legibles\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const GENDER_TYPES=[{value:'masculino',label:'Masculino'},{value:'femenino',label:'Femenino'},{value:'otro',label:'Otro'},{value:'prefiero_no_decir',label:'Prefiero no decir'}];const MARITAL_STATUS_TYPES=[{value:'soltero',label:'Soltero/a'},{value:'casado',label:'Casado/a'},{value:'divorciado',label:'Divorciado/a'},{value:'viudo',label:'Viudo/a'},{value:'union_libre',label:'Unión Libre'}];const EMPLOYMENT_TYPES=[{value:'empleado',label:'Empleado'},{value:'autonomo',label:'Autónomo / Freelance'},{value:'empresario',label:'Empresario'},{value:'jubilado',label:'Jubilado'},{value:'desempleado',label:'Desempleado'},{value:'estudiante',label:'Estudiante'},{value:'otro',label:'Otro'}];const INCOME_FREQUENCY_TYPES=[{value:'semanal',label:'Semanal'},{value:'quincenal',label:'Quincenal'},{value:'mensual',label:'Mensual'},{value:'bimestral',label:'Bimestral'},{value:'trimestral',label:'Trimestral'},{value:'semestral',label:'Semestral'},{value:'anual',label:'Anual'},{value:'irregular',label:'Irregular'}];const PAYMENT_METHOD_TYPES=[{value:'efectivo',label:'Efectivo'},{value:'transferencia',label:'Transferencia'},{value:'tarjeta',label:'Tarjeta de Crédito/Débito'},{value:'cheque',label:'Cheque'},{value:'domiciliacion',label:'Domiciliación Bancaria'}];const CREDIT_PURPOSE_TYPES=[{value:'personal',label:'Gastos Personales'},{value:'negocio',label:'Negocio/Inversión'},{value:'vivienda',label:'Vivienda'},{value:'auto',label:'Automóvil'},{value:'educacion',label:'Educación'},{value:'salud',label:'Salud'},{value:'deudas',label:'Consolidación de Deudas'},{value:'otro',label:'Otro'}];const BANK_ACCOUNT_TYPES=[{value:'nomina',label:'Nómina'},{value:'ahorro',label:'Ahorro'},{value:'cheques',label:'Cheques'},{value:'inversiones',label:'Inversiones'}];const RELATIONSHIP_TYPES=[{value:'familiar',label:'Familiar'},{value:'amigo',label:'Amigo'},{value:'companero_trabajo',label:'Compañero de Trabajo'},{value:'vecino',label:'Vecino'},{value:'otro',label:'Otro'}];// Función auxiliar para obtener label a partir de value\nconst getLabelForValue=(array,value)=>{if(!value)return'-';const item=array.find(item=>item.value===value);return item?item.label:value;};// Formatear fecha\nconst formatDate=dateString=>{if(!dateString)return'-';try{return new Date(dateString).toLocaleDateString('es-MX',{day:'2-digit',month:'2-digit',year:'numeric'});}catch(e){return dateString;}};const ClientDetail=()=>{const{id}=useParams();const navigate=useNavigate();const{userCan}=usePermissions();const[client,setClient]=useState(null);const[applications,setApplications]=useState([]);const[documents,setDocuments]=useState([]);const[loading,setLoading]=useState(true);const[loadingDocuments,setLoadingDocuments]=useState(true);const[documentError,setDocumentError]=useState(null);const[error,setError]=useState(null);const[activeSection,setActiveSection]=useState('personal');useEffect(()=>{if(id){fetchClientData(id);fetchClientDocuments(id);}},[id]);const fetchClientData=async clientId=>{try{setLoading(true);const clientData=await getClientById(clientId);setClient(clientData);const applicationsData=await getClientApplications(clientId);setApplications(applicationsData);setError(null);}catch(err){console.error('Error fetching client data:',err);setError('No se pudieron cargar los datos del cliente. Por favor intente nuevamente.');}finally{setLoading(false);}};const fetchClientDocuments=async clientId=>{try{setLoadingDocuments(true);console.log(`Fetching documents for client ${clientId}`);const documentsData=await getClientDocuments(clientId);console.log('Documents retrieved:',documentsData);setDocuments(documentsData||[]);setDocumentError(null);}catch(err){console.error('Error fetching client documents:',err);setDocumentError('No se pudieron cargar los documentos del cliente.');}finally{setLoadingDocuments(false);}};// Helper function to get a downloadable URL for a document\nconst getDocumentDownloadUrl=async filePath=>{try{const{data:url}=await supabase.storage.from('documents').getPublicUrl(filePath);return url.publicUrl;}catch(error){console.error('Error getting document URL:',error);return'#';}};// Componente para campo individual\nconst FieldItem=_ref=>{let{label,value}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:label}),/*#__PURE__*/_jsx(\"p\",{className:\"font-medium\",children:value||'-'})]});};// Componente para renderizar secciones\nconst SectionTab=_ref2=>{let{id,label,isActive}=_ref2;return/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveSection(id),className:`px-4 py-2 font-medium text-sm rounded-t-lg ${isActive?'bg-white text-primary border-b-2 border-primary':'bg-gray-100 text-gray-600 hover:bg-gray-200'}`,children:label});};return/*#__PURE__*/_jsx(MainLayout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/clients'),className:\"btn btn-sm btn-outline\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-5 w-5 mr-1\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z\",clipRule:\"evenodd\"})}),\"Volver a Clientes\"]}),client&&/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold\",children:[client.first_name,\" \",client.paternal_surname,\" \",client.maternal_surname]})]}),client&&userCan(PERMISSIONS.EDIT_CLIENT)&&/*#__PURE__*/_jsxs(Link,{to:`/clients/${id}/edit`,className:\"btn btn-primary\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-5 w-5 mr-2\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z\"})}),\"Editar Cliente\"]})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center py-12\",children:/*#__PURE__*/_jsx(\"span\",{className:\"loading loading-spinner loading-lg\"})}):error?/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-error\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"})}),/*#__PURE__*/_jsx(\"span\",{children:error})]}):client?/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-1 overflow-x-auto pb-1\",children:[/*#__PURE__*/_jsx(SectionTab,{id:\"personal\",label:\"Informaci\\xF3n Personal\",isActive:activeSection==='personal'}),/*#__PURE__*/_jsx(SectionTab,{id:\"contact\",label:\"Contacto y Direcci\\xF3n\",isActive:activeSection==='contact'}),/*#__PURE__*/_jsx(SectionTab,{id:\"employment\",label:\"Empleo\",isActive:activeSection==='employment'}),/*#__PURE__*/_jsx(SectionTab,{id:\"financial\",label:\"Informaci\\xF3n Financiera\",isActive:activeSection==='financial'}),/*#__PURE__*/_jsx(SectionTab,{id:\"family\",label:\"Informaci\\xF3n Familiar\",isActive:activeSection==='family'}),/*#__PURE__*/_jsx(SectionTab,{id:\"banking\",label:\"Datos Bancarios\",isActive:activeSection==='banking'}),/*#__PURE__*/_jsx(SectionTab,{id:\"references\",label:\"Referencias\",isActive:activeSection==='references'}),/*#__PURE__*/_jsx(SectionTab,{id:\"applications\",label:\"Solicitudes\",isActive:activeSection==='applications'}),/*#__PURE__*/_jsx(SectionTab,{id:\"documents\",label:\"Documentos\",isActive:activeSection==='documents'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[activeSection==='personal'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Datos B\\xE1sicos\"}),/*#__PURE__*/_jsx(FieldItem,{label:\"Nombre Completo\",value:`${client.first_name||''} ${client.paternal_surname||''} ${client.maternal_surname||''}`}),/*#__PURE__*/_jsx(FieldItem,{label:\"Nombre(s)\",value:client.first_name}),/*#__PURE__*/_jsx(FieldItem,{label:\"Apellido Paterno\",value:client.paternal_surname}),/*#__PURE__*/_jsx(FieldItem,{label:\"Apellido Materno\",value:client.maternal_surname}),/*#__PURE__*/_jsx(FieldItem,{label:\"Fecha de Nacimiento\",value:formatDate(client.birth_date)}),/*#__PURE__*/_jsx(FieldItem,{label:\"Estado de Nacimiento\",value:client.birth_state}),/*#__PURE__*/_jsx(FieldItem,{label:\"Nacionalidad\",value:client.nationality})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Identificaci\\xF3n\"}),/*#__PURE__*/_jsx(FieldItem,{label:\"RFC\",value:client.rfc}),/*#__PURE__*/_jsx(FieldItem,{label:\"CURP\",value:client.curp}),/*#__PURE__*/_jsx(FieldItem,{label:\"G\\xE9nero\",value:getLabelForValue(GENDER_TYPES,client.gender)}),/*#__PURE__*/_jsx(FieldItem,{label:\"Estado Civil\",value:getLabelForValue(MARITAL_STATUS_TYPES,client.marital_status)}),/*#__PURE__*/_jsx(FieldItem,{label:\"Personas Dependientes\",value:client.dependent_persons})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Informaci\\xF3n del Sistema\"}),/*#__PURE__*/_jsx(FieldItem,{label:\"ID del Cliente\",value:client.id}),/*#__PURE__*/_jsx(FieldItem,{label:\"Fecha de Registro\",value:formatDate(client.created_at)}),/*#__PURE__*/_jsx(FieldItem,{label:\"\\xDAltimo Acceso\",value:formatDate(client.last_login)}),/*#__PURE__*/_jsx(FieldItem,{label:\"ID de Empresa\",value:client.company_id}),/*#__PURE__*/_jsx(FieldItem,{label:\"ID de Asesor\",value:client.advisor_id})]})]}),activeSection==='contact'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Contacto\"}),/*#__PURE__*/_jsx(FieldItem,{label:\"Email\",value:client.email}),/*#__PURE__*/_jsx(FieldItem,{label:\"Tel\\xE9fono M\\xF3vil\",value:client.phone}),/*#__PURE__*/_jsx(FieldItem,{label:\"Tel\\xE9fono Fijo\",value:client.home_phone})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Direcci\\xF3n\"}),/*#__PURE__*/_jsx(FieldItem,{label:\"Direcci\\xF3n\",value:client.address}),/*#__PURE__*/_jsx(FieldItem,{label:\"N\\xFAmero Exterior\",value:client.street_number_ext}),/*#__PURE__*/_jsx(FieldItem,{label:\"N\\xFAmero Interior\",value:client.street_number_int}),/*#__PURE__*/_jsx(FieldItem,{label:\"Colonia\",value:client.neighborhood}),/*#__PURE__*/_jsx(FieldItem,{label:\"Ciudad\",value:client.city}),/*#__PURE__*/_jsx(FieldItem,{label:\"Estado\",value:client.state}),/*#__PURE__*/_jsx(FieldItem,{label:\"C\\xF3digo Postal\",value:client.postal_code})]})]}),activeSection==='employment'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Datos Laborales\"}),/*#__PURE__*/_jsx(FieldItem,{label:\"Tipo de Empleo\",value:getLabelForValue(EMPLOYMENT_TYPES,client.employment_type)}),/*#__PURE__*/_jsx(FieldItem,{label:\"A\\xF1os de Empleo\",value:client.employment_years}),/*#__PURE__*/_jsx(FieldItem,{label:\"Puesto/Cargo\",value:client.job_position})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Informaci\\xF3n del Empleador\"}),/*#__PURE__*/_jsx(FieldItem,{label:\"Nombre del Empleador\",value:client.employer_name}),/*#__PURE__*/_jsx(FieldItem,{label:\"Tel\\xE9fono del Empleador\",value:client.employer_phone}),/*#__PURE__*/_jsx(FieldItem,{label:\"Direcci\\xF3n del Empleador\",value:client.employer_address}),/*#__PURE__*/_jsx(FieldItem,{label:\"Actividad del Empleador\",value:client.employer_activity})]})]}),activeSection==='financial'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Ingresos\"}),/*#__PURE__*/_jsx(FieldItem,{label:\"Ingreso Mensual\",value:client.monthly_income?formatCurrency(client.monthly_income):'-'}),/*#__PURE__*/_jsx(FieldItem,{label:\"Ingreso Adicional\",value:client.additional_income?formatCurrency(client.additional_income):'-'}),/*#__PURE__*/_jsx(FieldItem,{label:\"Frecuencia de Ingresos\",value:getLabelForValue(INCOME_FREQUENCY_TYPES,client.income_frequency)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Gastos\"}),/*#__PURE__*/_jsx(FieldItem,{label:\"Gastos Mensuales\",value:client.monthly_expenses?formatCurrency(client.monthly_expenses):'-'}),/*#__PURE__*/_jsx(FieldItem,{label:\"Pago de Hipoteca\",value:client.mortgage_payment?formatCurrency(client.mortgage_payment):'-'}),/*#__PURE__*/_jsx(FieldItem,{label:\"Pago de Renta\",value:client.rent_payment?formatCurrency(client.rent_payment):'-'}),/*#__PURE__*/_jsx(FieldItem,{label:\"Saldo de Otros Pr\\xE9stamos\",value:client.other_loan_balances?formatCurrency(client.other_loan_balances):'-'})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Preferencias Financieras\"}),/*#__PURE__*/_jsx(FieldItem,{label:\"M\\xE9todo de Pago Preferido\",value:getLabelForValue(PAYMENT_METHOD_TYPES,client.payment_method)}),/*#__PURE__*/_jsx(FieldItem,{label:\"Prop\\xF3sito de Cr\\xE9dito\",value:getLabelForValue(CREDIT_PURPOSE_TYPES,client.credit_purpose)})]})]}),activeSection==='family'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Informaci\\xF3n del C\\xF3nyuge\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsx(FieldItem,{label:\"Apellido Paterno del C\\xF3nyuge\",value:client.spouse_paternal_surname}),/*#__PURE__*/_jsx(FieldItem,{label:\"Apellido Materno del C\\xF3nyuge\",value:client.spouse_maternal_surname})]})]}),activeSection==='banking'&&/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Datos Bancarios\"}),/*#__PURE__*/_jsx(FieldItem,{label:\"Nombre del Banco\",value:client.bank_name}),/*#__PURE__*/_jsx(FieldItem,{label:\"CLABE Interbancaria\",value:client.bank_clabe}),/*#__PURE__*/_jsx(FieldItem,{label:\"N\\xFAmero de Cuenta\",value:client.bank_account_number}),/*#__PURE__*/_jsx(FieldItem,{label:\"Tipo de Cuenta\",value:getLabelForValue(BANK_ACCOUNT_TYPES,client.bank_account_type)}),/*#__PURE__*/_jsx(FieldItem,{label:\"Origen de la Cuenta\",value:client.bank_account_origin})]})}),activeSection==='references'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Primera Referencia\"}),/*#__PURE__*/_jsx(FieldItem,{label:\"Nombre\",value:client.reference1_name}),/*#__PURE__*/_jsx(FieldItem,{label:\"Relaci\\xF3n\",value:getLabelForValue(RELATIONSHIP_TYPES,client.reference1_relationship)}),/*#__PURE__*/_jsx(FieldItem,{label:\"Direcci\\xF3n\",value:client.reference1_address}),/*#__PURE__*/_jsx(FieldItem,{label:\"Tel\\xE9fono\",value:client.reference1_phone})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4\",children:\"Segunda Referencia\"}),/*#__PURE__*/_jsx(FieldItem,{label:\"Nombre\",value:client.reference2_name}),/*#__PURE__*/_jsx(FieldItem,{label:\"Relaci\\xF3n\",value:getLabelForValue(RELATIONSHIP_TYPES,client.reference2_relationship)}),/*#__PURE__*/_jsx(FieldItem,{label:\"Direcci\\xF3n\",value:client.reference2_address}),/*#__PURE__*/_jsx(FieldItem,{label:\"Tel\\xE9fono\",value:client.reference2_phone})]})]}),activeSection==='applications'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"Solicitudes del Cliente\"}),userCan(PERMISSIONS.CREATE_APPLICATION)&&/*#__PURE__*/_jsxs(Link,{to:`/applications/new?client=${id}`,className:\"btn btn-sm btn-primary\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4 mr-1\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z\",clipRule:\"evenodd\"})}),\"Nueva Solicitud\"]})]}),!applications||applications.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center py-10 text-center\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-16 w-16 text-gray-300 mb-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:1,d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 mb-4\",children:\"Este cliente no tiene solicitudes registradas.\"}),userCan(PERMISSIONS.CREATE_APPLICATION)&&/*#__PURE__*/_jsxs(Link,{to:`/applications/new?client=${id}`,className:\"btn btn-primary\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-5 w-5 mr-2\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z\",clipRule:\"evenodd\"})}),\"Crear Solicitud\"]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fecha\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tipo\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Monto\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Estado\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:applications.map(app=>/*#__PURE__*/_jsxs(\"tr\",{className:\"hover\",children:[/*#__PURE__*/_jsxs(\"td\",{children:[app.id.substring(0,8),\"...\"]}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(app.created_at)}),/*#__PURE__*/_jsx(\"td\",{children:app.application_type}),/*#__PURE__*/_jsx(\"td\",{children:app.amount?formatCurrency(app.amount):'-'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:`badge ${app.status==='approved'?'badge-success':app.status==='rejected'?'badge-error':app.status==='in_review'?'badge-warning':'badge-info'}`,children:app.status})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:`/applications/${app.id}`,className:\"btn btn-xs btn-info\",children:\"Ver\"})})]},app.id))})]})})]}),activeSection==='documents'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"Documentos del Cliente\"}),userCan(PERMISSIONS.EDIT_CLIENT)&&/*#__PURE__*/_jsx(Link,{to:`/clients/edit/${id}`,className:\"btn btn-sm btn-primary\",children:\"Gestionar Documentos\"})]}),loadingDocuments?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center py-8\",children:/*#__PURE__*/_jsx(\"span\",{className:\"loading loading-spinner loading-md\"})}):documentError?/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-error\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"})}),/*#__PURE__*/_jsx(\"span\",{children:documentError})]}):documents.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500\",children:\"No hay documentos asociados a este cliente.\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Nombre\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Categor\\xEDa\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Fecha de subida\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Tama\\xF1o\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:documents.map(doc=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(FiFile,{className:\"text-primary\"}),doc.file_name||'Documento sin nombre']}),/*#__PURE__*/_jsx(\"td\",{children:doc.category||'No especificada'}),/*#__PURE__*/_jsx(\"td\",{children:formatDate(doc.created_at)}),/*#__PURE__*/_jsx(\"td\",{children:formatFileSize(doc.file_size||0)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",onClick:async e=>{e.preventDefault();const url=await getDocumentDownloadUrl(doc.file_path);window.open(url,'_blank');},className:\"btn btn-sm btn-ghost\",title:\"Descargar documento\",children:/*#__PURE__*/_jsx(FiDownload,{})})})]},doc.id))})]})})]})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-warning\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Cliente no encontrado.\"})]})]})});};// Helper function to format file sizes\nconst formatFileSize=bytes=>{if(bytes===0)return'0 Bytes';const k=1024;const sizes=['Bytes','KB','MB','GB'];const i=Math.floor(Math.log(bytes)/Math.log(k));return parseFloat((bytes/Math.pow(k,i)).toFixed(2))+' '+sizes[i];};export default ClientDetail;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","useNavigate","MainLayout","getClientById","getClientApplications","getClientDocuments","PERMISSIONS","usePermissions","formatCurrency","FiFile","FiDownload","supabase","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","GENDER_TYPES","value","label","MARITAL_STATUS_TYPES","EMPLOYMENT_TYPES","INCOME_FREQUENCY_TYPES","PAYMENT_METHOD_TYPES","CREDIT_PURPOSE_TYPES","BANK_ACCOUNT_TYPES","RELATIONSHIP_TYPES","getLabelForValue","array","item","find","formatDate","dateString","Date","toLocaleDateString","day","month","year","e","ClientDetail","id","navigate","userCan","client","setClient","applications","setApplications","documents","setDocuments","loading","setLoading","loadingDocuments","setLoadingDocuments","documentError","setDocumentError","error","setError","activeSection","setActiveSection","fetchClientData","fetchClientDocuments","clientId","clientData","applicationsData","err","console","log","documentsData","getDocumentDownloadUrl","filePath","data","url","storage","from","getPublicUrl","publicUrl","FieldItem","_ref","className","children","SectionTab","_ref2","isActive","onClick","xmlns","viewBox","fill","fillRule","d","clipRule","first_name","paternal_surname","maternal_surname","EDIT_CLIENT","to","stroke","strokeLinecap","strokeLinejoin","strokeWidth","birth_date","birth_state","nationality","rfc","curp","gender","marital_status","dependent_persons","created_at","last_login","company_id","advisor_id","email","phone","home_phone","address","street_number_ext","street_number_int","neighborhood","city","state","postal_code","employment_type","employment_years","job_position","employer_name","employer_phone","employer_address","employer_activity","monthly_income","additional_income","income_frequency","monthly_expenses","mortgage_payment","rent_payment","other_loan_balances","payment_method","credit_purpose","spouse_paternal_surname","spouse_maternal_surname","bank_name","bank_clabe","bank_account_number","bank_account_type","bank_account_origin","reference1_name","reference1_relationship","reference1_address","reference1_phone","reference2_name","reference2_relationship","reference2_address","reference2_phone","CREATE_APPLICATION","length","map","app","substring","application_type","amount","status","doc","file_name","category","formatFileSize","file_size","href","preventDefault","file_path","window","open","title","bytes","k","sizes","i","Math","floor","parseFloat","pow","toFixed"],"sources":["/Users/diegogg98/NEW CRM MAR18/src/pages/ClientDetail.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport MainLayout from '../components/layout/MainLayout';\nimport { getClientById, getClientApplications, Client } from '../services/clientService';\nimport { getClientDocuments } from '../services/documentService';\nimport { PERMISSIONS } from '../utils/constants/permissions';\nimport { usePermissions } from '../contexts/PermissionsContext';\nimport { formatCurrency } from '../utils/formatters';\nimport { FiFile, FiDownload } from 'react-icons/fi';\nimport { supabase } from '../lib/supabaseClient';\n\n// Constantes para mapear valores de códigos a nombres legibles\nconst GENDER_TYPES = [\n  { value: 'masculino', label: 'Masculino' },\n  { value: 'femenino', label: 'Femenino' },\n  { value: 'otro', label: 'Otro' },\n  { value: 'prefiero_no_decir', label: 'Prefiero no decir' },\n];\n\nconst MARITAL_STATUS_TYPES = [\n  { value: 'soltero', label: 'Soltero/a' },\n  { value: 'casado', label: 'Casado/a' },\n  { value: 'divorciado', label: 'Divorciado/a' },\n  { value: 'viudo', label: 'Viudo/a' },\n  { value: 'union_libre', label: 'Unión Libre' },\n];\n\nconst EMPLOYMENT_TYPES = [\n  { value: 'empleado', label: 'Empleado' },\n  { value: 'autonomo', label: 'Autónomo / Freelance' },\n  { value: 'empresario', label: 'Empresario' },\n  { value: 'jubilado', label: 'Jubilado' },\n  { value: 'desempleado', label: 'Desempleado' },\n  { value: 'estudiante', label: 'Estudiante' },\n  { value: 'otro', label: 'Otro' },\n];\n\nconst INCOME_FREQUENCY_TYPES = [\n  { value: 'semanal', label: 'Semanal' },\n  { value: 'quincenal', label: 'Quincenal' },\n  { value: 'mensual', label: 'Mensual' },\n  { value: 'bimestral', label: 'Bimestral' },\n  { value: 'trimestral', label: 'Trimestral' },\n  { value: 'semestral', label: 'Semestral' },\n  { value: 'anual', label: 'Anual' },\n  { value: 'irregular', label: 'Irregular' },\n];\n\nconst PAYMENT_METHOD_TYPES = [\n  { value: 'efectivo', label: 'Efectivo' },\n  { value: 'transferencia', label: 'Transferencia' },\n  { value: 'tarjeta', label: 'Tarjeta de Crédito/Débito' },\n  { value: 'cheque', label: 'Cheque' },\n  { value: 'domiciliacion', label: 'Domiciliación Bancaria' },\n];\n\nconst CREDIT_PURPOSE_TYPES = [\n  { value: 'personal', label: 'Gastos Personales' },\n  { value: 'negocio', label: 'Negocio/Inversión' },\n  { value: 'vivienda', label: 'Vivienda' },\n  { value: 'auto', label: 'Automóvil' },\n  { value: 'educacion', label: 'Educación' },\n  { value: 'salud', label: 'Salud' },\n  { value: 'deudas', label: 'Consolidación de Deudas' },\n  { value: 'otro', label: 'Otro' },\n];\n\nconst BANK_ACCOUNT_TYPES = [\n  { value: 'nomina', label: 'Nómina' },\n  { value: 'ahorro', label: 'Ahorro' },\n  { value: 'cheques', label: 'Cheques' },\n  { value: 'inversiones', label: 'Inversiones' },\n];\n\nconst RELATIONSHIP_TYPES = [\n  { value: 'familiar', label: 'Familiar' },\n  { value: 'amigo', label: 'Amigo' },\n  { value: 'companero_trabajo', label: 'Compañero de Trabajo' },\n  { value: 'vecino', label: 'Vecino' },\n  { value: 'otro', label: 'Otro' },\n];\n\n// Función auxiliar para obtener label a partir de value\nconst getLabelForValue = (array: { value: string, label: string }[], value?: string) => {\n  if (!value) return '-';\n  const item = array.find(item => item.value === value);\n  return item ? item.label : value;\n};\n\n// Formatear fecha\nconst formatDate = (dateString?: string) => {\n  if (!dateString) return '-';\n  try {\n    return new Date(dateString).toLocaleDateString('es-MX', {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric'\n    });\n  } catch (e) {\n    return dateString;\n  }\n};\n\nconst ClientDetail: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const { userCan } = usePermissions();\n  const [client, setClient] = useState<Client | null>(null);\n  const [applications, setApplications] = useState<any[]>([]);\n  const [documents, setDocuments] = useState<any[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [loadingDocuments, setLoadingDocuments] = useState<boolean>(true);\n  const [documentError, setDocumentError] = useState<string | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [activeSection, setActiveSection] = useState<string>('personal');\n\n  useEffect(() => {\n    if (id) {\n      fetchClientData(id);\n      fetchClientDocuments(id);\n    }\n  }, [id]);\n\n  const fetchClientData = async (clientId: string) => {\n    try {\n      setLoading(true);\n      const clientData = await getClientById(clientId);\n      setClient(clientData);\n\n      const applicationsData = await getClientApplications(clientId);\n      setApplications(applicationsData);\n      \n      setError(null);\n    } catch (err) {\n      console.error('Error fetching client data:', err);\n      setError('No se pudieron cargar los datos del cliente. Por favor intente nuevamente.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchClientDocuments = async (clientId: string) => {\n    try {\n      setLoadingDocuments(true);\n      console.log(`Fetching documents for client ${clientId}`);\n      const documentsData = await getClientDocuments(clientId);\n      console.log('Documents retrieved:', documentsData);\n      setDocuments(documentsData || []);\n      setDocumentError(null);\n    } catch (err) {\n      console.error('Error fetching client documents:', err);\n      setDocumentError('No se pudieron cargar los documentos del cliente.');\n    } finally {\n      setLoadingDocuments(false);\n    }\n  };\n\n  // Helper function to get a downloadable URL for a document\n  const getDocumentDownloadUrl = async (filePath: string) => {\n    try {\n      const { data: url } = await supabase.storage\n        .from('documents')\n        .getPublicUrl(filePath);\n      \n      return url.publicUrl;\n    } catch (error) {\n      console.error('Error getting document URL:', error);\n      return '#';\n    }\n  };\n\n  // Componente para campo individual\n  const FieldItem = ({ label, value }: { label: string, value: any }) => (\n    <div className=\"mb-3\">\n      <p className=\"text-sm text-gray-500\">{label}</p>\n      <p className=\"font-medium\">{value || '-'}</p>\n    </div>\n  );\n\n  // Componente para renderizar secciones\n  const SectionTab = ({ id, label, isActive }: { id: string, label: string, isActive: boolean }) => (\n    <button \n      onClick={() => setActiveSection(id)}\n      className={`px-4 py-2 font-medium text-sm rounded-t-lg ${\n        isActive \n          ? 'bg-white text-primary border-b-2 border-primary' \n          : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n      }`}\n    >\n      {label}\n    </button>\n  );\n\n  return (\n    <MainLayout>\n      <div className=\"p-6\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <div className=\"flex items-center gap-4\">\n            <button \n              onClick={() => navigate('/clients')} \n              className=\"btn btn-sm btn-outline\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-1\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path fillRule=\"evenodd\" d=\"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z\" clipRule=\"evenodd\" />\n              </svg>\n              Volver a Clientes\n            </button>\n            {client && (\n              <h1 className=\"text-2xl font-bold\">\n                {client.first_name} {client.paternal_surname} {client.maternal_surname}\n              </h1>\n            )}\n          </div>\n          \n          {client && userCan(PERMISSIONS.EDIT_CLIENT) && (\n            <Link to={`/clients/${id}/edit`} className=\"btn btn-primary\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-2\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                <path d=\"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z\" />\n              </svg>\n              Editar Cliente\n            </Link>\n          )}\n        </div>\n\n        {loading ? (\n          <div className=\"flex justify-center items-center py-12\">\n            <span className=\"loading loading-spinner loading-lg\"></span>\n          </div>\n        ) : error ? (\n          <div className=\"alert alert-error\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n            </svg>\n            <span>{error}</span>\n          </div>\n        ) : client ? (\n          <div className=\"space-y-6\">\n            {/* Pestañas de navegación */}\n            <div className=\"flex space-x-1 overflow-x-auto pb-1\">\n              <SectionTab id=\"personal\" label=\"Información Personal\" isActive={activeSection === 'personal'} />\n              <SectionTab id=\"contact\" label=\"Contacto y Dirección\" isActive={activeSection === 'contact'} />\n              <SectionTab id=\"employment\" label=\"Empleo\" isActive={activeSection === 'employment'} />\n              <SectionTab id=\"financial\" label=\"Información Financiera\" isActive={activeSection === 'financial'} />\n              <SectionTab id=\"family\" label=\"Información Familiar\" isActive={activeSection === 'family'} />\n              <SectionTab id=\"banking\" label=\"Datos Bancarios\" isActive={activeSection === 'banking'} />\n              <SectionTab id=\"references\" label=\"Referencias\" isActive={activeSection === 'references'} />\n              <SectionTab id=\"applications\" label=\"Solicitudes\" isActive={activeSection === 'applications'} />\n              <SectionTab id=\"documents\" label=\"Documentos\" isActive={activeSection === 'documents'} />\n            </div>\n\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\n              {/* Información personal básica */}\n              {activeSection === 'personal' && (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                  <div>\n                    <h3 className=\"text-lg font-semibold mb-4\">Datos Básicos</h3>\n                    <FieldItem label=\"Nombre Completo\" value={`${client.first_name || ''} ${client.paternal_surname || ''} ${client.maternal_surname || ''}`} />\n                    <FieldItem label=\"Nombre(s)\" value={client.first_name} />\n                    <FieldItem label=\"Apellido Paterno\" value={client.paternal_surname} />\n                    <FieldItem label=\"Apellido Materno\" value={client.maternal_surname} />\n                    <FieldItem label=\"Fecha de Nacimiento\" value={formatDate(client.birth_date)} />\n                    <FieldItem label=\"Estado de Nacimiento\" value={client.birth_state} />\n                    <FieldItem label=\"Nacionalidad\" value={client.nationality} />\n                  </div>\n                  <div>\n                    <h3 className=\"text-lg font-semibold mb-4\">Identificación</h3>\n                    <FieldItem label=\"RFC\" value={client.rfc} />\n                    <FieldItem label=\"CURP\" value={client.curp} />\n                    <FieldItem label=\"Género\" value={getLabelForValue(GENDER_TYPES, client.gender)} />\n                    <FieldItem label=\"Estado Civil\" value={getLabelForValue(MARITAL_STATUS_TYPES, client.marital_status)} />\n                    <FieldItem label=\"Personas Dependientes\" value={client.dependent_persons} />\n                  </div>\n                  <div>\n                    <h3 className=\"text-lg font-semibold mb-4\">Información del Sistema</h3>\n                    <FieldItem label=\"ID del Cliente\" value={client.id} />\n                    <FieldItem label=\"Fecha de Registro\" value={formatDate(client.created_at)} />\n                    <FieldItem label=\"Último Acceso\" value={formatDate(client.last_login)} />\n                    <FieldItem label=\"ID de Empresa\" value={client.company_id} />\n                    <FieldItem label=\"ID de Asesor\" value={client.advisor_id} />\n                  </div>\n                </div>\n              )}\n\n              {/* Contacto y dirección */}\n              {activeSection === 'contact' && (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div>\n                    <h3 className=\"text-lg font-semibold mb-4\">Contacto</h3>\n                    <FieldItem label=\"Email\" value={client.email} />\n                    <FieldItem label=\"Teléfono Móvil\" value={client.phone} />\n                    <FieldItem label=\"Teléfono Fijo\" value={client.home_phone} />\n                  </div>\n                  <div>\n                    <h3 className=\"text-lg font-semibold mb-4\">Dirección</h3>\n                    <FieldItem label=\"Dirección\" value={client.address} />\n                    <FieldItem label=\"Número Exterior\" value={client.street_number_ext} />\n                    <FieldItem label=\"Número Interior\" value={client.street_number_int} />\n                    <FieldItem label=\"Colonia\" value={client.neighborhood} />\n                    <FieldItem label=\"Ciudad\" value={client.city} />\n                    <FieldItem label=\"Estado\" value={client.state} />\n                    <FieldItem label=\"Código Postal\" value={client.postal_code} />\n                  </div>\n                </div>\n              )}\n\n              {/* Información de empleo */}\n              {activeSection === 'employment' && (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div>\n                    <h3 className=\"text-lg font-semibold mb-4\">Datos Laborales</h3>\n                    <FieldItem label=\"Tipo de Empleo\" value={getLabelForValue(EMPLOYMENT_TYPES, client.employment_type)} />\n                    <FieldItem label=\"Años de Empleo\" value={client.employment_years} />\n                    <FieldItem label=\"Puesto/Cargo\" value={client.job_position} />\n                  </div>\n                  <div>\n                    <h3 className=\"text-lg font-semibold mb-4\">Información del Empleador</h3>\n                    <FieldItem label=\"Nombre del Empleador\" value={client.employer_name} />\n                    <FieldItem label=\"Teléfono del Empleador\" value={client.employer_phone} />\n                    <FieldItem label=\"Dirección del Empleador\" value={client.employer_address} />\n                    <FieldItem label=\"Actividad del Empleador\" value={client.employer_activity} />\n                  </div>\n                </div>\n              )}\n\n              {/* Información financiera */}\n              {activeSection === 'financial' && (\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                  <div>\n                    <h3 className=\"text-lg font-semibold mb-4\">Ingresos</h3>\n                    <FieldItem \n                      label=\"Ingreso Mensual\" \n                      value={client.monthly_income ? formatCurrency(client.monthly_income) : '-'} \n                    />\n                    <FieldItem \n                      label=\"Ingreso Adicional\" \n                      value={client.additional_income ? formatCurrency(client.additional_income) : '-'} \n                    />\n                    <FieldItem \n                      label=\"Frecuencia de Ingresos\" \n                      value={getLabelForValue(INCOME_FREQUENCY_TYPES, client.income_frequency)} \n                    />\n                  </div>\n                  <div>\n                    <h3 className=\"text-lg font-semibold mb-4\">Gastos</h3>\n                    <FieldItem \n                      label=\"Gastos Mensuales\" \n                      value={client.monthly_expenses ? formatCurrency(client.monthly_expenses) : '-'} \n                    />\n                    <FieldItem \n                      label=\"Pago de Hipoteca\" \n                      value={client.mortgage_payment ? formatCurrency(client.mortgage_payment) : '-'} \n                    />\n                    <FieldItem \n                      label=\"Pago de Renta\" \n                      value={client.rent_payment ? formatCurrency(client.rent_payment) : '-'} \n                    />\n                    <FieldItem \n                      label=\"Saldo de Otros Préstamos\" \n                      value={client.other_loan_balances ? formatCurrency(client.other_loan_balances) : '-'} \n                    />\n                  </div>\n                  <div>\n                    <h3 className=\"text-lg font-semibold mb-4\">Preferencias Financieras</h3>\n                    <FieldItem \n                      label=\"Método de Pago Preferido\" \n                      value={getLabelForValue(PAYMENT_METHOD_TYPES, client.payment_method)} \n                    />\n                    <FieldItem \n                      label=\"Propósito de Crédito\" \n                      value={getLabelForValue(CREDIT_PURPOSE_TYPES, client.credit_purpose)} \n                    />\n                  </div>\n                </div>\n              )}\n\n              {/* Información familiar */}\n              {activeSection === 'family' && (\n                <div>\n                  <h3 className=\"text-lg font-semibold mb-4\">Información del Cónyuge</h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <FieldItem label=\"Apellido Paterno del Cónyuge\" value={client.spouse_paternal_surname} />\n                    <FieldItem label=\"Apellido Materno del Cónyuge\" value={client.spouse_maternal_surname} />\n                  </div>\n                </div>\n              )}\n\n              {/* Información bancaria */}\n              {activeSection === 'banking' && (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div>\n                    <h3 className=\"text-lg font-semibold mb-4\">Datos Bancarios</h3>\n                    <FieldItem label=\"Nombre del Banco\" value={client.bank_name} />\n                    <FieldItem label=\"CLABE Interbancaria\" value={client.bank_clabe} />\n                    <FieldItem label=\"Número de Cuenta\" value={client.bank_account_number} />\n                    <FieldItem \n                      label=\"Tipo de Cuenta\" \n                      value={getLabelForValue(BANK_ACCOUNT_TYPES, client.bank_account_type)} \n                    />\n                    <FieldItem label=\"Origen de la Cuenta\" value={client.bank_account_origin} />\n                  </div>\n                </div>\n              )}\n\n              {/* Referencias */}\n              {activeSection === 'references' && (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div>\n                    <h3 className=\"text-lg font-semibold mb-4\">Primera Referencia</h3>\n                    <FieldItem label=\"Nombre\" value={client.reference1_name} />\n                    <FieldItem \n                      label=\"Relación\" \n                      value={getLabelForValue(RELATIONSHIP_TYPES, client.reference1_relationship)} \n                    />\n                    <FieldItem label=\"Dirección\" value={client.reference1_address} />\n                    <FieldItem label=\"Teléfono\" value={client.reference1_phone} />\n                  </div>\n                  <div>\n                    <h3 className=\"text-lg font-semibold mb-4\">Segunda Referencia</h3>\n                    <FieldItem label=\"Nombre\" value={client.reference2_name} />\n                    <FieldItem \n                      label=\"Relación\" \n                      value={getLabelForValue(RELATIONSHIP_TYPES, client.reference2_relationship)} \n                    />\n                    <FieldItem label=\"Dirección\" value={client.reference2_address} />\n                    <FieldItem label=\"Teléfono\" value={client.reference2_phone} />\n                  </div>\n                </div>\n              )}\n\n              {/* Solicitudes */}\n              {activeSection === 'applications' && (\n                <>\n                  <div className=\"flex justify-between items-center mb-4\">\n                    <h3 className=\"text-lg font-semibold\">Solicitudes del Cliente</h3>\n                    {userCan(PERMISSIONS.CREATE_APPLICATION) && (\n                      <Link to={`/applications/new?client=${id}`} className=\"btn btn-sm btn-primary\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 mr-1\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                          <path fillRule=\"evenodd\" d=\"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z\" clipRule=\"evenodd\" />\n                        </svg>\n                        Nueva Solicitud\n                      </Link>\n                    )}\n                  </div>\n                  \n                  {!applications || applications.length === 0 ? (\n                    <div className=\"flex flex-col items-center justify-center py-10 text-center\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-16 w-16 text-gray-300 mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                      </svg>\n                      <p className=\"text-gray-500 mb-4\">Este cliente no tiene solicitudes registradas.</p>\n                      {userCan(PERMISSIONS.CREATE_APPLICATION) && (\n                        <Link to={`/applications/new?client=${id}`} className=\"btn btn-primary\">\n                          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-2\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                            <path fillRule=\"evenodd\" d=\"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z\" clipRule=\"evenodd\" />\n                          </svg>\n                          Crear Solicitud\n                        </Link>\n                      )}\n                    </div>\n                  ) : (\n                    <div className=\"overflow-x-auto\">\n                      <table className=\"table w-full\">\n                        <thead>\n                          <tr>\n                            <th>ID</th>\n                            <th>Fecha</th>\n                            <th>Tipo</th>\n                            <th>Monto</th>\n                            <th>Estado</th>\n                            <th>Acciones</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {applications.map(app => (\n                            <tr key={app.id} className=\"hover\">\n                              <td>{app.id.substring(0, 8)}...</td>\n                              <td>\n                                {formatDate(app.created_at)}\n                              </td>\n                              <td>{app.application_type}</td>\n                              <td>{app.amount ? formatCurrency(app.amount) : '-'}</td>\n                              <td>\n                                <span className={`badge ${\n                                  app.status === 'approved' ? 'badge-success' :\n                                  app.status === 'rejected' ? 'badge-error' :\n                                  app.status === 'in_review' ? 'badge-warning' :\n                                  'badge-info'\n                                }`}>\n                                  {app.status}\n                                </span>\n                              </td>\n                              <td>\n                                <Link to={`/applications/${app.id}`} className=\"btn btn-xs btn-info\">\n                                  Ver\n                                </Link>\n                              </td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  )}\n                </>\n              )}\n\n              {/* Documents Section */}\n              {activeSection === 'documents' && (\n                <div className=\"bg-white rounded-lg shadow-md p-6\">\n                  <div className=\"flex justify-between items-center mb-4\">\n                    <h3 className=\"text-lg font-semibold\">Documentos del Cliente</h3>\n                    {userCan(PERMISSIONS.EDIT_CLIENT) && (\n                      <Link to={`/clients/edit/${id}`} className=\"btn btn-sm btn-primary\">\n                        Gestionar Documentos\n                      </Link>\n                    )}\n                  </div>\n\n                  {loadingDocuments ? (\n                    <div className=\"flex justify-center items-center py-8\">\n                      <span className=\"loading loading-spinner loading-md\"></span>\n                    </div>\n                  ) : documentError ? (\n                    <div className=\"alert alert-error\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n                      </svg>\n                      <span>{documentError}</span>\n                    </div>\n                  ) : documents.length === 0 ? (\n                    <div className=\"text-center py-8\">\n                      <p className=\"text-gray-500\">No hay documentos asociados a este cliente.</p>\n                    </div>\n                  ) : (\n                    <div className=\"overflow-x-auto\">\n                      <table className=\"table w-full\">\n                        <thead>\n                          <tr>\n                            <th>Nombre</th>\n                            <th>Categoría</th>\n                            <th>Fecha de subida</th>\n                            <th>Tamaño</th>\n                            <th>Acciones</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {documents.map((doc) => (\n                            <tr key={doc.id}>\n                              <td className=\"flex items-center gap-2\">\n                                <FiFile className=\"text-primary\" />\n                                {doc.file_name || 'Documento sin nombre'}\n                              </td>\n                              <td>{doc.category || 'No especificada'}</td>\n                              <td>{formatDate(doc.created_at)}</td>\n                              <td>{formatFileSize(doc.file_size || 0)}</td>\n                              <td>\n                                <a \n                                  href=\"#\"\n                                  onClick={async (e) => {\n                                    e.preventDefault();\n                                    const url = await getDocumentDownloadUrl(doc.file_path);\n                                    window.open(url, '_blank');\n                                  }}\n                                  className=\"btn btn-sm btn-ghost\"\n                                  title=\"Descargar documento\"\n                                >\n                                  <FiDownload />\n                                </a>\n                              </td>\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          </div>\n        ) : (\n          <div className=\"alert alert-warning\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n            </svg>\n            <span>Cliente no encontrado.</span>\n          </div>\n        )}\n      </div>\n    </MainLayout>\n  );\n};\n\n// Helper function to format file sizes\nconst formatFileSize = (bytes: number): string => {\n  if (bytes === 0) return '0 Bytes';\n  const k = 1024;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n};\n\nexport default ClientDetail; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}