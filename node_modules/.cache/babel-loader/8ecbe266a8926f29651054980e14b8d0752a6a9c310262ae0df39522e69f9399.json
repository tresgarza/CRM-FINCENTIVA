{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import MainLayout from'../components/layout/MainLayout';import{usePermissions}from'../contexts/PermissionsContext';import{PERMISSIONS}from'../utils/constants/permissions';import{useAuth}from'../contexts/AuthContext';import Alert from'../components/ui/Alert';import{getApplicationById,createApplication,updateApplication}from'../services/applicationService';import{APPLICATION_TYPE,APPLICATION_TYPE_LABELS}from'../utils/constants/applications';import{APPLICATION_STATUS,STATUS_LABELS}from'../utils/constants/statuses';import{useNotifications,NotificationType}from'../contexts/NotificationContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const initialFormData={client_name:'',client_email:'',client_phone:'',client_address:'',dni:'',amount:0,term:12,interest_rate:0,monthly_payment:0,application_type:'personal_loan',status:APPLICATION_STATUS.PENDING,company_id:'',company_name:'',assigned_to:''};const ApplicationForm=()=>{const{id}=useParams();const navigate=useNavigate();const{userCan}=usePermissions();const{user}=useAuth();const{shouldFilterByEntity,getEntityFilter}=usePermissions();const{addNotification,showPopup}=useNotifications();const isEditMode=!!id;const[formData,setFormData]=useState(initialFormData);const[loading,setLoading]=useState(isEditMode);const[saving,setSaving]=useState(false);const[error,setError]=useState(null);const[successMessage,setSuccessMessage]=useState(null);useEffect(()=>{if(isEditMode&&id){const fetchApplication=async()=>{try{setLoading(true);setError(null);// Aplicar filtros según el rol del usuario\nconst entityFilter=shouldFilterByEntity()?getEntityFilter():null;const application=await getApplicationById(id,entityFilter);// Cargar los datos del formulario con valores por defecto para campos opcionales\nsetFormData({client_name:application.client_name||'',client_email:application.client_email||'',client_phone:application.client_phone||'',client_address:application.client_address||'',dni:application.dni||'',amount:application.amount||0,term:application.term||12,interest_rate:application.interest_rate||0,monthly_payment:application.monthly_payment||0,application_type:application.application_type||'personal_loan',status:application.status,company_id:application.company_id||'',company_name:application.company_name||'',assigned_to:application.assigned_to||''});}catch(error){console.error('Error fetching application:',error);setError(`Error al cargar la solicitud: ${error.message||'Error desconocido'}`);}finally{setLoading(false);}};fetchApplication();}else if(!isEditMode&&user){// Si no estamos en modo edición y tenemos datos del usuario, pre-rellenar algunos campos\nconst entityFilter=shouldFilterByEntity()?getEntityFilter():null;if(entityFilter){if(entityFilter.advisor_id){setFormData(prev=>({...prev,assigned_to:entityFilter.advisor_id}));}if(entityFilter.company_id){setFormData(prev=>({...prev,company_id:entityFilter.company_id}));}}}},[id,isEditMode,user,shouldFilterByEntity,getEntityFilter]);const handleChange=e=>{const{name,value,type}=e.target;// Convertir valores numéricos según corresponda\nif(type==='number'){setFormData(prev=>({...prev,[name]:parseFloat(value)||0}));}else{setFormData(prev=>({...prev,[name]:value}));}};const handleSubmit=async e=>{e.preventDefault();try{setSaving(true);setError(null);if(!formData.client_name){setError('El nombre del cliente es obligatorio');setSaving(false);return;}// Aplicar filtros según el rol del usuario\nconst entityFilter=shouldFilterByEntity()?getEntityFilter():null;if(isEditMode&&id){// Convertir FormData a Partial<ApplicationType> para actualización\nconst applicationUpdate={client_name:formData.client_name,client_email:formData.client_email,client_phone:formData.client_phone,client_address:formData.client_address,dni:formData.dni,amount:formData.amount,term:formData.term,interest_rate:formData.interest_rate,monthly_payment:formData.monthly_payment,application_type:formData.application_type,status:formData.status,company_id:formData.company_id,company_name:formData.company_name,assigned_to:formData.assigned_to};// Actualizar aplicación existente\nawait updateApplication(id,applicationUpdate,entityFilter);setSuccessMessage('Solicitud actualizada con éxito');}else{// Convertir FormData a los campos necesarios para crear una nueva aplicación\nconst newApplicationData={client_name:formData.client_name,client_email:formData.client_email,client_phone:formData.client_phone,client_address:formData.client_address,dni:formData.dni,amount:formData.amount,term:formData.term,interest_rate:formData.interest_rate,monthly_payment:formData.monthly_payment,application_type:formData.application_type,status:formData.status,company_id:formData.company_id,company_name:formData.company_name,assigned_to:formData.assigned_to,client_id:'',// Generado por el servidor\nrequested_amount:formData.amount,approved_by_advisor:false,approved_by_company:false};// Crear nueva aplicación\nconst newApplication=await createApplication(newApplicationData);setSuccessMessage('Solicitud creada con éxito');// Create a notification and show popup - make sure we have a valid UUID\nif(newApplication&&newApplication.id){const notificationData={title:'Nueva solicitud creada',message:`Se ha creado una nueva solicitud para ${formData.client_name}`,type:NotificationType.NEW_APPLICATION,relatedItemType:'application',relatedItemId:newApplication.id// This will be a valid UUID from the database\n};// Add to notifications list\naddNotification(notificationData);// Show immediate popup with sound\nshowPopup({...notificationData,playSound:true,soundType:'notification',duration:5000});}// Redirigir a la página de detalle después de un breve retraso\nsetTimeout(()=>{navigate(`/applications/${newApplication.id}`);},1500);}}catch(error){console.error('Error saving application:',error);setError(`Error al guardar la solicitud: ${error.message||'Error desconocido'}`);}finally{setSaving(false);}};if(!userCan(isEditMode?PERMISSIONS.EDIT_APPLICATION:PERMISSIONS.CREATE_APPLICATION)){return/*#__PURE__*/_jsx(MainLayout,{children:/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-96\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-700\",children:\"Acceso Restringido\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 mt-2\",children:[\"No tienes permisos para \",isEditMode?'editar':'crear',\" solicitudes.\"]})]})})});}return/*#__PURE__*/_jsx(MainLayout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:isEditMode?'Editar Solicitud':'Nueva Solicitud'}),/*#__PURE__*/_jsx(Link,{to:isEditMode?`/applications/${id}`:'/applications',className:\"btn btn-ghost\",children:\"Cancelar\"})]}),error&&/*#__PURE__*/_jsx(Alert,{type:\"error\",message:error,onClose:()=>setError(null),className:\"mb-6\"}),successMessage&&/*#__PURE__*/_jsx(Alert,{type:\"success\",message:successMessage,onClose:()=>setSuccessMessage(null),className:\"mb-6\"}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"span\",{className:\"loading loading-spinner loading-lg\"})}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card bg-base-100 shadow-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"card-title text-lg border-b pb-2 mb-4\",children:\"Informaci\\xF3n del Cliente\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Nombre Completo*\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"client_name\",value:formData.client_name,onChange:handleChange,className:\"input input-bordered\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Email*\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"client_email\",value:formData.client_email,onChange:handleChange,className:\"input input-bordered\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Tel\\xE9fono*\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"client_phone\",value:formData.client_phone,onChange:handleChange,className:\"input input-bordered\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"DNI / Identificaci\\xF3n\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"dni\",value:formData.dni,onChange:handleChange,className:\"input input-bordered\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Direcci\\xF3n\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"client_address\",value:formData.client_address,onChange:handleChange,className:\"input input-bordered\"})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card bg-base-100 shadow-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"card-title text-lg border-b pb-2 mb-4\",children:\"Informaci\\xF3n del Cr\\xE9dito\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Tipo de Aplicaci\\xF3n*\"})}),/*#__PURE__*/_jsx(\"select\",{name:\"application_type\",value:formData.application_type,onChange:handleChange,className:\"select select-bordered\",required:true,children:Object.values(APPLICATION_TYPE).map(type=>/*#__PURE__*/_jsx(\"option\",{value:type,children:APPLICATION_TYPE_LABELS[type]},type))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Estado*\"})}),/*#__PURE__*/_jsx(\"select\",{name:\"status\",value:formData.status,onChange:handleChange,className:\"select select-bordered\",required:true,children:Object.values(APPLICATION_STATUS).map(status=>/*#__PURE__*/_jsx(\"option\",{value:status,children:STATUS_LABELS[status]},status))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Monto*\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"amount\",value:formData.amount,onChange:handleChange,className:\"input input-bordered\",min:\"0\",step:\"1000\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Plazo (meses)\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"term\",value:formData.term,onChange:handleChange,className:\"input input-bordered\",min:\"1\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Tasa de Inter\\xE9s (%)\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"interest_rate\",value:formData.interest_rate,onChange:handleChange,className:\"input input-bordered\",min:\"0\",step:\"0.01\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Pago Mensual\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"monthly_payment\",value:formData.monthly_payment,onChange:handleChange,className:\"input input-bordered\",min:\"0\"})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card bg-base-100 shadow-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"card-title text-lg border-b pb-2 mb-4\",children:\"Empresa y Asesor\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"ID de Empresa\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"company_id\",value:formData.company_id,onChange:handleChange,className:\"input input-bordered\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Nombre de Empresa\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"company_name\",value:formData.company_name,onChange:handleChange,className:\"input input-bordered\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"ID de Asesor Asignado\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"assigned_to\",value:formData.assigned_to,onChange:handleChange,className:\"input input-bordered\"})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:`btn btn-primary ${saving?'loading':''}`,disabled:saving,children:isEditMode?'Actualizar Solicitud':'Crear Solicitud'})})]})]})});};export default ApplicationForm;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Link","MainLayout","usePermissions","PERMISSIONS","useAuth","Alert","getApplicationById","createApplication","updateApplication","APPLICATION_TYPE","APPLICATION_TYPE_LABELS","APPLICATION_STATUS","STATUS_LABELS","useNotifications","NotificationType","jsx","_jsx","jsxs","_jsxs","initialFormData","client_name","client_email","client_phone","client_address","dni","amount","term","interest_rate","monthly_payment","application_type","status","PENDING","company_id","company_name","assigned_to","ApplicationForm","id","navigate","userCan","user","shouldFilterByEntity","getEntityFilter","addNotification","showPopup","isEditMode","formData","setFormData","loading","setLoading","saving","setSaving","error","setError","successMessage","setSuccessMessage","fetchApplication","entityFilter","application","console","message","advisor_id","prev","handleChange","e","name","value","type","target","parseFloat","handleSubmit","preventDefault","applicationUpdate","newApplicationData","client_id","requested_amount","approved_by_advisor","approved_by_company","newApplication","notificationData","title","NEW_APPLICATION","relatedItemType","relatedItemId","playSound","soundType","duration","setTimeout","EDIT_APPLICATION","CREATE_APPLICATION","children","className","to","onClose","onSubmit","onChange","required","Object","values","map","min","step","disabled"],"sources":["/Users/diegogg98/NEW CRM MAR18/src/pages/ApplicationForm.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport MainLayout from '../components/layout/MainLayout';\nimport { usePermissions } from '../contexts/PermissionsContext';\nimport { PERMISSIONS } from '../utils/constants/permissions';\nimport { useAuth } from '../contexts/AuthContext';\nimport Alert from '../components/ui/Alert';\nimport { \n  getApplicationById, \n  createApplication, \n  updateApplication, \n  Application as ApplicationType,\n  ApplicationStatus\n} from '../services/applicationService';\nimport { APPLICATION_TYPE, APPLICATION_TYPE_LABELS } from '../utils/constants/applications';\nimport { APPLICATION_STATUS, STATUS_LABELS } from '../utils/constants/statuses';\nimport { useNotifications, NotificationType } from '../contexts/NotificationContext';\n\ninterface FormData {\n  client_name: string;\n  client_email: string;\n  client_phone: string;\n  client_address: string;\n  dni: string;\n  amount: number;\n  term: number;\n  interest_rate: number;\n  monthly_payment: number;\n  application_type: string;\n  status: ApplicationStatus;\n  company_id: string;\n  company_name: string;\n  assigned_to: string;\n}\n\nconst initialFormData: FormData = {\n  client_name: '',\n  client_email: '',\n  client_phone: '',\n  client_address: '',\n  dni: '',\n  amount: 0,\n  term: 12,\n  interest_rate: 0,\n  monthly_payment: 0,\n  application_type: 'personal_loan',\n  status: APPLICATION_STATUS.PENDING,\n  company_id: '',\n  company_name: '',\n  assigned_to: '',\n};\n\nconst ApplicationForm: React.FC = () => {\n  const { id } = useParams<{ id: string }>();\n  const navigate = useNavigate();\n  const { userCan } = usePermissions();\n  const { user } = useAuth();\n  const { shouldFilterByEntity, getEntityFilter } = usePermissions();\n  const { addNotification, showPopup } = useNotifications();\n  \n  const isEditMode = !!id;\n  \n  const [formData, setFormData] = useState<FormData>(initialFormData);\n  const [loading, setLoading] = useState(isEditMode);\n  const [saving, setSaving] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [successMessage, setSuccessMessage] = useState<string | null>(null);\n  \n  useEffect(() => {\n    if (isEditMode && id) {\n      const fetchApplication = async () => {\n        try {\n          setLoading(true);\n          setError(null);\n          \n          // Aplicar filtros según el rol del usuario\n          const entityFilter = shouldFilterByEntity() ? getEntityFilter() : null;\n          \n          const application = await getApplicationById(id, entityFilter);\n          \n          // Cargar los datos del formulario con valores por defecto para campos opcionales\n          setFormData({\n            client_name: application.client_name || '',\n            client_email: application.client_email || '',\n            client_phone: application.client_phone || '',\n            client_address: application.client_address || '',\n            dni: application.dni || '',\n            amount: application.amount || 0,\n            term: application.term || 12,\n            interest_rate: application.interest_rate || 0,\n            monthly_payment: application.monthly_payment || 0,\n            application_type: application.application_type || 'personal_loan',\n            status: application.status,\n            company_id: application.company_id || '',\n            company_name: application.company_name || '',\n            assigned_to: application.assigned_to || '',\n          });\n        } catch (error: any) {\n          console.error('Error fetching application:', error);\n          setError(`Error al cargar la solicitud: ${error.message || 'Error desconocido'}`);\n        } finally {\n          setLoading(false);\n        }\n      };\n      \n      fetchApplication();\n    } else if (!isEditMode && user) {\n      // Si no estamos en modo edición y tenemos datos del usuario, pre-rellenar algunos campos\n      const entityFilter = shouldFilterByEntity() ? getEntityFilter() : null;\n      \n      if (entityFilter) {\n        if (entityFilter.advisor_id) {\n          setFormData(prev => ({\n            ...prev,\n            assigned_to: entityFilter.advisor_id\n          }));\n        }\n        \n        if (entityFilter.company_id) {\n          setFormData(prev => ({\n            ...prev,\n            company_id: entityFilter.company_id\n          }));\n        }\n      }\n    }\n  }, [id, isEditMode, user, shouldFilterByEntity, getEntityFilter]);\n  \n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n    const { name, value, type } = e.target;\n    \n    // Convertir valores numéricos según corresponda\n    if (type === 'number') {\n      setFormData(prev => ({\n        ...prev,\n        [name]: parseFloat(value) || 0\n      }));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    }\n  };\n  \n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    try {\n      setSaving(true);\n      setError(null);\n      \n      if (!formData.client_name) {\n        setError('El nombre del cliente es obligatorio');\n        setSaving(false);\n        return;\n      }\n      \n      // Aplicar filtros según el rol del usuario\n      const entityFilter = shouldFilterByEntity() ? getEntityFilter() : null;\n      \n      if (isEditMode && id) {\n        // Convertir FormData a Partial<ApplicationType> para actualización\n        const applicationUpdate: Partial<ApplicationType> = {\n          client_name: formData.client_name,\n          client_email: formData.client_email,\n          client_phone: formData.client_phone,\n          client_address: formData.client_address,\n          dni: formData.dni,\n          amount: formData.amount,\n          term: formData.term,\n          interest_rate: formData.interest_rate,\n          monthly_payment: formData.monthly_payment,\n          application_type: formData.application_type,\n          status: formData.status,\n          company_id: formData.company_id,\n          company_name: formData.company_name,\n          assigned_to: formData.assigned_to\n        };\n        \n        // Actualizar aplicación existente\n        await updateApplication(id, applicationUpdate, entityFilter);\n        setSuccessMessage('Solicitud actualizada con éxito');\n      } else {\n        // Convertir FormData a los campos necesarios para crear una nueva aplicación\n        const newApplicationData: Omit<ApplicationType, 'id' | 'created_at' | 'updated_at'> = {\n          client_name: formData.client_name,\n          client_email: formData.client_email,\n          client_phone: formData.client_phone,\n          client_address: formData.client_address,\n          dni: formData.dni,\n          amount: formData.amount,\n          term: formData.term,\n          interest_rate: formData.interest_rate,\n          monthly_payment: formData.monthly_payment,\n          application_type: formData.application_type,\n          status: formData.status,\n          company_id: formData.company_id,\n          company_name: formData.company_name,\n          assigned_to: formData.assigned_to,\n          client_id: '', // Generado por el servidor\n          requested_amount: formData.amount,\n          approved_by_advisor: false,\n          approved_by_company: false\n        };\n        \n        // Crear nueva aplicación\n        const newApplication = await createApplication(newApplicationData);\n        setSuccessMessage('Solicitud creada con éxito');\n        \n        // Create a notification and show popup - make sure we have a valid UUID\n        if (newApplication && newApplication.id) {\n          const notificationData = {\n            title: 'Nueva solicitud creada',\n            message: `Se ha creado una nueva solicitud para ${formData.client_name}`,\n            type: NotificationType.NEW_APPLICATION,\n            relatedItemType: 'application',\n            relatedItemId: newApplication.id // This will be a valid UUID from the database\n          };\n          \n          // Add to notifications list\n          addNotification(notificationData);\n          \n          // Show immediate popup with sound\n          showPopup({\n            ...notificationData,\n            playSound: true,\n            soundType: 'notification',\n            duration: 5000\n          });\n        }\n        \n        // Redirigir a la página de detalle después de un breve retraso\n        setTimeout(() => {\n          navigate(`/applications/${newApplication.id}`);\n        }, 1500);\n      }\n    } catch (error: any) {\n      console.error('Error saving application:', error);\n      setError(`Error al guardar la solicitud: ${error.message || 'Error desconocido'}`);\n    } finally {\n      setSaving(false);\n    }\n  };\n  \n  if (!userCan(isEditMode ? PERMISSIONS.EDIT_APPLICATION : PERMISSIONS.CREATE_APPLICATION)) {\n    return (\n      <MainLayout>\n        <div className=\"flex items-center justify-center h-96\">\n          <div className=\"text-center\">\n            <h2 className=\"text-2xl font-bold text-gray-700\">Acceso Restringido</h2>\n            <p className=\"text-gray-500 mt-2\">No tienes permisos para {isEditMode ? 'editar' : 'crear'} solicitudes.</p>\n          </div>\n        </div>\n      </MainLayout>\n    );\n  }\n  \n  return (\n    <MainLayout>\n      <div className=\"p-6\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <h1 className=\"text-2xl font-bold\">\n            {isEditMode ? 'Editar Solicitud' : 'Nueva Solicitud'}\n          </h1>\n          <Link to={isEditMode ? `/applications/${id}` : '/applications'} className=\"btn btn-ghost\">\n            Cancelar\n          </Link>\n        </div>\n        \n        {error && (\n          <Alert \n            type=\"error\" \n            message={error}\n            onClose={() => setError(null)}\n            className=\"mb-6\"\n          />\n        )}\n        \n        {successMessage && (\n          <Alert \n            type=\"success\" \n            message={successMessage}\n            onClose={() => setSuccessMessage(null)}\n            className=\"mb-6\"\n          />\n        )}\n        \n        {loading ? (\n          <div className=\"flex justify-center items-center h-64\">\n            <span className=\"loading loading-spinner loading-lg\"></span>\n          </div>\n        ) : (\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {/* Información del cliente */}\n            <div className=\"card bg-base-100 shadow-xl\">\n              <div className=\"card-body\">\n                <h2 className=\"card-title text-lg border-b pb-2 mb-4\">Información del Cliente</h2>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div className=\"form-control\">\n                    <label className=\"label\">\n                      <span className=\"label-text\">Nombre Completo*</span>\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"client_name\"\n                      value={formData.client_name}\n                      onChange={handleChange}\n                      className=\"input input-bordered\"\n                      required\n                    />\n                  </div>\n                  \n                  <div className=\"form-control\">\n                    <label className=\"label\">\n                      <span className=\"label-text\">Email*</span>\n                    </label>\n                    <input\n                      type=\"email\"\n                      name=\"client_email\"\n                      value={formData.client_email}\n                      onChange={handleChange}\n                      className=\"input input-bordered\"\n                      required\n                    />\n                  </div>\n                  \n                  <div className=\"form-control\">\n                    <label className=\"label\">\n                      <span className=\"label-text\">Teléfono*</span>\n                    </label>\n                    <input\n                      type=\"tel\"\n                      name=\"client_phone\"\n                      value={formData.client_phone}\n                      onChange={handleChange}\n                      className=\"input input-bordered\"\n                      required\n                    />\n                  </div>\n                  \n                  <div className=\"form-control\">\n                    <label className=\"label\">\n                      <span className=\"label-text\">DNI / Identificación</span>\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"dni\"\n                      value={formData.dni}\n                      onChange={handleChange}\n                      className=\"input input-bordered\"\n                    />\n                  </div>\n                  \n                  <div className=\"form-control md:col-span-2\">\n                    <label className=\"label\">\n                      <span className=\"label-text\">Dirección</span>\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"client_address\"\n                      value={formData.client_address}\n                      onChange={handleChange}\n                      className=\"input input-bordered\"\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            {/* Información del crédito */}\n            <div className=\"card bg-base-100 shadow-xl\">\n              <div className=\"card-body\">\n                <h2 className=\"card-title text-lg border-b pb-2 mb-4\">Información del Crédito</h2>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div className=\"form-control\">\n                    <label className=\"label\">\n                      <span className=\"label-text\">Tipo de Aplicación*</span>\n                    </label>\n                    <select\n                      name=\"application_type\"\n                      value={formData.application_type}\n                      onChange={handleChange}\n                      className=\"select select-bordered\"\n                      required\n                    >\n                      {Object.values(APPLICATION_TYPE).map((type) => (\n                        <option key={type} value={type}>\n                          {APPLICATION_TYPE_LABELS[type as keyof typeof APPLICATION_TYPE_LABELS]}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  \n                  <div className=\"form-control\">\n                    <label className=\"label\">\n                      <span className=\"label-text\">Estado*</span>\n                    </label>\n                    <select\n                      name=\"status\"\n                      value={formData.status}\n                      onChange={handleChange}\n                      className=\"select select-bordered\"\n                      required\n                    >\n                      {Object.values(APPLICATION_STATUS).map((status) => (\n                        <option key={status} value={status}>\n                          {STATUS_LABELS[status as keyof typeof STATUS_LABELS]}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                  \n                  <div className=\"form-control\">\n                    <label className=\"label\">\n                      <span className=\"label-text\">Monto*</span>\n                    </label>\n                    <input\n                      type=\"number\"\n                      name=\"amount\"\n                      value={formData.amount}\n                      onChange={handleChange}\n                      className=\"input input-bordered\"\n                      min=\"0\"\n                      step=\"1000\"\n                      required\n                    />\n                  </div>\n                  \n                  <div className=\"form-control\">\n                    <label className=\"label\">\n                      <span className=\"label-text\">Plazo (meses)</span>\n                    </label>\n                    <input\n                      type=\"number\"\n                      name=\"term\"\n                      value={formData.term}\n                      onChange={handleChange}\n                      className=\"input input-bordered\"\n                      min=\"1\"\n                    />\n                  </div>\n                  \n                  <div className=\"form-control\">\n                    <label className=\"label\">\n                      <span className=\"label-text\">Tasa de Interés (%)</span>\n                    </label>\n                    <input\n                      type=\"number\"\n                      name=\"interest_rate\"\n                      value={formData.interest_rate}\n                      onChange={handleChange}\n                      className=\"input input-bordered\"\n                      min=\"0\"\n                      step=\"0.01\"\n                    />\n                  </div>\n                  \n                  <div className=\"form-control\">\n                    <label className=\"label\">\n                      <span className=\"label-text\">Pago Mensual</span>\n                    </label>\n                    <input\n                      type=\"number\"\n                      name=\"monthly_payment\"\n                      value={formData.monthly_payment}\n                      onChange={handleChange}\n                      className=\"input input-bordered\"\n                      min=\"0\"\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            {/* Información de empresa y asesor */}\n            <div className=\"card bg-base-100 shadow-xl\">\n              <div className=\"card-body\">\n                <h2 className=\"card-title text-lg border-b pb-2 mb-4\">Empresa y Asesor</h2>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div className=\"form-control\">\n                    <label className=\"label\">\n                      <span className=\"label-text\">ID de Empresa</span>\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"company_id\"\n                      value={formData.company_id}\n                      onChange={handleChange}\n                      className=\"input input-bordered\"\n                    />\n                  </div>\n                  \n                  <div className=\"form-control\">\n                    <label className=\"label\">\n                      <span className=\"label-text\">Nombre de Empresa</span>\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"company_name\"\n                      value={formData.company_name}\n                      onChange={handleChange}\n                      className=\"input input-bordered\"\n                    />\n                  </div>\n                  \n                  <div className=\"form-control\">\n                    <label className=\"label\">\n                      <span className=\"label-text\">ID de Asesor Asignado</span>\n                    </label>\n                    <input\n                      type=\"text\"\n                      name=\"assigned_to\"\n                      value={formData.assigned_to}\n                      onChange={handleChange}\n                      className=\"input input-bordered\"\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"flex justify-end\">\n              <button\n                type=\"submit\"\n                className={`btn btn-primary ${saving ? 'loading' : ''}`}\n                disabled={saving}\n              >\n                {isEditMode ? 'Actualizar Solicitud' : 'Crear Solicitud'}\n              </button>\n            </div>\n          </form>\n        )}\n      </div>\n    </MainLayout>\n  );\n};\n\nexport default ApplicationForm; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}