{"ast":null,"code":"import React,{useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{AuthProvider}from'./contexts/AuthContext';import{PermissionsProvider}from'./contexts/PermissionsContext';import{NotificationProvider}from'./contexts/NotificationContext';import ProtectedRoute from'./components/auth/ProtectedRoute';import Login from'./pages/auth/Login';import Dashboard from'./pages/Dashboard';import Applications from'./pages/Applications';import ApplicationsKanban from'./pages/ApplicationsKanban';import ApplicationDetail from'./pages/ApplicationDetail';import ApplicationForm from'./pages/ApplicationForm';import Clients from'./pages/Clients';import ClientDetail from'./pages/ClientDetail';import ClientForm from'./pages/ClientForm';import Reports from'./pages/Reports';import Users from'./pages/Users';import UserForm from'./pages/UserForm';import Settings from'./pages/Settings';import NotFound from'./pages/NotFound';import Companies from'./pages/Companies';import Notifications from'./pages/Notifications';import Messages from'./pages/Messages';import{initDbStructureCheck}from'./utils/dbStructureCheck';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{// Verificar estructura de BD al iniciar la aplicación\nuseEffect(()=>{initDbStructureCheck();},[]);// Add event listener to track if user has interacted with the page\n// This helps with browser autoplay restrictions\nuseEffect(()=>{const markUserInteraction=()=>{document.documentElement.setAttribute('data-user-interacted','true');};// Listen for common user interaction events\nconst events=['click','keydown','mousedown','touchstart'];events.forEach(event=>{document.addEventListener(event,markUserInteraction,{once:true});});// Clean up event listeners\nreturn()=>{events.forEach(event=>{document.removeEventListener(event,markUserInteraction);});};},[]);return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(PermissionsProvider,{children:/*#__PURE__*/_jsx(NotificationProvider,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Dashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/applications\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Applications,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/applications/kanban\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(ApplicationsKanban,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/applications/new\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(ApplicationForm,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/applications/:id\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(ApplicationDetail,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/applications/:id/edit\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(ApplicationForm,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/clients\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Clients,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/clients/new\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(ClientForm,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/clients/:id\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(ClientDetail,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/clients/:id/edit\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(ClientForm,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/reports\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Reports,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/users\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Users,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/users/new\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(UserForm,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/users/:id/edit\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(UserForm,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/settings\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Settings,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/companies\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Companies,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/notifications\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Notifications,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/messages\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Messages,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/messages/:userId\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Messages,{})})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(NotFound,{})})]})})})})});};export default App;","map":{"version":3,"names":["React","useEffect","BrowserRouter","Router","Routes","Route","Navigate","AuthProvider","PermissionsProvider","NotificationProvider","ProtectedRoute","Login","Dashboard","Applications","ApplicationsKanban","ApplicationDetail","ApplicationForm","Clients","ClientDetail","ClientForm","Reports","Users","UserForm","Settings","NotFound","Companies","Notifications","Messages","initDbStructureCheck","jsx","_jsx","jsxs","_jsxs","App","markUserInteraction","document","documentElement","setAttribute","events","forEach","event","addEventListener","once","removeEventListener","children","path","element","to","replace"],"sources":["/Users/diegogg98/NEW CRM MAR18/src/App.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { AuthProvider } from './contexts/AuthContext';\nimport { PermissionsProvider } from './contexts/PermissionsContext';\nimport { NotificationProvider } from './contexts/NotificationContext';\nimport ProtectedRoute from './components/auth/ProtectedRoute';\nimport Login from './pages/auth/Login';\nimport Dashboard from './pages/Dashboard';\nimport Applications from './pages/Applications';\nimport ApplicationsKanban from './pages/ApplicationsKanban';\nimport ApplicationDetail from './pages/ApplicationDetail';\nimport ApplicationForm from './pages/ApplicationForm';\nimport Clients from './pages/Clients';\nimport ClientDetail from './pages/ClientDetail';\nimport ClientForm from './pages/ClientForm';\nimport Reports from './pages/Reports';\nimport Users from './pages/Users';\nimport UserForm from './pages/UserForm';\nimport Settings from './pages/Settings';\nimport NotFound from './pages/NotFound';\nimport Companies from './pages/Companies';\nimport Notifications from './pages/Notifications';\nimport Messages from './pages/Messages';\nimport { initDbStructureCheck } from './utils/dbStructureCheck';\n\nconst App: React.FC = () => {\n  // Verificar estructura de BD al iniciar la aplicación\n  useEffect(() => {\n    initDbStructureCheck();\n  }, []);\n\n  // Add event listener to track if user has interacted with the page\n  // This helps with browser autoplay restrictions\n  useEffect(() => {\n    const markUserInteraction = () => {\n      document.documentElement.setAttribute('data-user-interacted', 'true');\n    };\n\n    // Listen for common user interaction events\n    const events = ['click', 'keydown', 'mousedown', 'touchstart'];\n    events.forEach(event => {\n      document.addEventListener(event, markUserInteraction, { once: true });\n    });\n\n    // Clean up event listeners\n    return () => {\n      events.forEach(event => {\n        document.removeEventListener(event, markUserInteraction);\n      });\n    };\n  }, []);\n\n  return (\n    <Router>\n      <AuthProvider>\n        <PermissionsProvider>\n          <NotificationProvider>\n            <Routes>\n              {/* Public routes */}\n              <Route path=\"/login\" element={<Login />} />\n              \n              {/* Protected routes */}\n              <Route path=\"/\" element={<Navigate to=\"/dashboard\" replace />} />\n              \n              <Route\n                path=\"/dashboard\"\n                element={\n                  <ProtectedRoute>\n                    <Dashboard />\n                  </ProtectedRoute>\n                }\n              />\n              \n              <Route\n                path=\"/applications\"\n                element={\n                  <ProtectedRoute>\n                    <Applications />\n                  </ProtectedRoute>\n                }\n              />\n              \n              <Route\n                path=\"/applications/kanban\"\n                element={\n                  <ProtectedRoute>\n                    <ApplicationsKanban />\n                  </ProtectedRoute>\n                }\n              />\n              \n              <Route\n                path=\"/applications/new\"\n                element={\n                  <ProtectedRoute>\n                    <ApplicationForm />\n                  </ProtectedRoute>\n                }\n              />\n              \n              <Route\n                path=\"/applications/:id\"\n                element={\n                  <ProtectedRoute>\n                    <ApplicationDetail />\n                  </ProtectedRoute>\n                }\n              />\n              \n              <Route\n                path=\"/applications/:id/edit\"\n                element={\n                  <ProtectedRoute>\n                    <ApplicationForm />\n                  </ProtectedRoute>\n                }\n              />\n              \n              <Route\n                path=\"/clients\"\n                element={\n                  <ProtectedRoute>\n                    <Clients />\n                  </ProtectedRoute>\n                }\n              />\n              \n              <Route\n                path=\"/clients/new\"\n                element={\n                  <ProtectedRoute>\n                    <ClientForm />\n                  </ProtectedRoute>\n                }\n              />\n              \n              <Route\n                path=\"/clients/:id\"\n                element={\n                  <ProtectedRoute>\n                    <ClientDetail />\n                  </ProtectedRoute>\n                }\n              />\n              \n              <Route\n                path=\"/clients/:id/edit\"\n                element={\n                  <ProtectedRoute>\n                    <ClientForm />\n                  </ProtectedRoute>\n                }\n              />\n              \n              <Route\n                path=\"/reports\"\n                element={\n                  <ProtectedRoute>\n                    <Reports />\n                  </ProtectedRoute>\n                }\n              />\n              \n              <Route\n                path=\"/users\"\n                element={\n                  <ProtectedRoute>\n                    <Users />\n                  </ProtectedRoute>\n                }\n              />\n              \n              <Route\n                path=\"/users/new\"\n                element={\n                  <ProtectedRoute>\n                    <UserForm />\n                  </ProtectedRoute>\n                }\n              />\n              \n              <Route\n                path=\"/users/:id/edit\"\n                element={\n                  <ProtectedRoute>\n                    <UserForm />\n                  </ProtectedRoute>\n                }\n              />\n              \n              <Route\n                path=\"/settings\"\n                element={\n                  <ProtectedRoute>\n                    <Settings />\n                  </ProtectedRoute>\n                }\n              />\n              \n              <Route\n                path=\"/companies\"\n                element={\n                  <ProtectedRoute>\n                    <Companies />\n                  </ProtectedRoute>\n                }\n              />\n              \n              <Route\n                path=\"/notifications\"\n                element={\n                  <ProtectedRoute>\n                    <Notifications />\n                  </ProtectedRoute>\n                }\n              />\n              \n              <Route\n                path=\"/messages\"\n                element={\n                  <ProtectedRoute>\n                    <Messages />\n                  </ProtectedRoute>\n                }\n              />\n              \n              <Route\n                path=\"/messages/:userId\"\n                element={\n                  <ProtectedRoute>\n                    <Messages />\n                  </ProtectedRoute>\n                }\n              />\n              \n              {/* 404 page */}\n              <Route path=\"*\" element={<NotFound />} />\n            </Routes>\n          </NotificationProvider>\n        </PermissionsProvider>\n      </AuthProvider>\n    </Router>\n  );\n};\n\nexport default App; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,aAAa,GAAI,CAAAC,MAAM,CAAEC,MAAM,CAAEC,KAAK,CAAEC,QAAQ,KAAQ,kBAAkB,CACnF,OAASC,YAAY,KAAQ,wBAAwB,CACrD,OAASC,mBAAmB,KAAQ,+BAA+B,CACnE,OAASC,oBAAoB,KAAQ,gCAAgC,CACrE,MAAO,CAAAC,cAAc,KAAM,kCAAkC,CAC7D,MAAO,CAAAC,KAAK,KAAM,oBAAoB,CACtC,MAAO,CAAAC,SAAS,KAAM,mBAAmB,CACzC,MAAO,CAAAC,YAAY,KAAM,sBAAsB,CAC/C,MAAO,CAAAC,kBAAkB,KAAM,4BAA4B,CAC3D,MAAO,CAAAC,iBAAiB,KAAM,2BAA2B,CACzD,MAAO,CAAAC,eAAe,KAAM,yBAAyB,CACrD,MAAO,CAAAC,OAAO,KAAM,iBAAiB,CACrC,MAAO,CAAAC,YAAY,KAAM,sBAAsB,CAC/C,MAAO,CAAAC,UAAU,KAAM,oBAAoB,CAC3C,MAAO,CAAAC,OAAO,KAAM,iBAAiB,CACrC,MAAO,CAAAC,KAAK,KAAM,eAAe,CACjC,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,MAAO,CAAAC,SAAS,KAAM,mBAAmB,CACzC,MAAO,CAAAC,aAAa,KAAM,uBAAuB,CACjD,MAAO,CAAAC,QAAQ,KAAM,kBAAkB,CACvC,OAASC,oBAAoB,KAAQ,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhE,KAAM,CAAAC,GAAa,CAAGA,CAAA,GAAM,CAC1B;AACAhC,SAAS,CAAC,IAAM,CACd2B,oBAAoB,CAAC,CAAC,CACxB,CAAC,CAAE,EAAE,CAAC,CAEN;AACA;AACA3B,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiC,mBAAmB,CAAGA,CAAA,GAAM,CAChCC,QAAQ,CAACC,eAAe,CAACC,YAAY,CAAC,sBAAsB,CAAE,MAAM,CAAC,CACvE,CAAC,CAED;AACA,KAAM,CAAAC,MAAM,CAAG,CAAC,OAAO,CAAE,SAAS,CAAE,WAAW,CAAE,YAAY,CAAC,CAC9DA,MAAM,CAACC,OAAO,CAACC,KAAK,EAAI,CACtBL,QAAQ,CAACM,gBAAgB,CAACD,KAAK,CAAEN,mBAAmB,CAAE,CAAEQ,IAAI,CAAE,IAAK,CAAC,CAAC,CACvE,CAAC,CAAC,CAEF;AACA,MAAO,IAAM,CACXJ,MAAM,CAACC,OAAO,CAACC,KAAK,EAAI,CACtBL,QAAQ,CAACQ,mBAAmB,CAACH,KAAK,CAAEN,mBAAmB,CAAC,CAC1D,CAAC,CAAC,CACJ,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEJ,IAAA,CAAC3B,MAAM,EAAAyC,QAAA,cACLd,IAAA,CAACvB,YAAY,EAAAqC,QAAA,cACXd,IAAA,CAACtB,mBAAmB,EAAAoC,QAAA,cAClBd,IAAA,CAACrB,oBAAoB,EAAAmC,QAAA,cACnBZ,KAAA,CAAC5B,MAAM,EAAAwC,QAAA,eAELd,IAAA,CAACzB,KAAK,EAACwC,IAAI,CAAC,QAAQ,CAACC,OAAO,cAAEhB,IAAA,CAACnB,KAAK,GAAE,CAAE,CAAE,CAAC,cAG3CmB,IAAA,CAACzB,KAAK,EAACwC,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEhB,IAAA,CAACxB,QAAQ,EAACyC,EAAE,CAAC,YAAY,CAACC,OAAO,MAAE,CAAE,CAAE,CAAC,cAEjElB,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,YAAY,CACjBC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAAClB,SAAS,GAAE,CAAC,CACC,CACjB,CACF,CAAC,cAEFkB,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,eAAe,CACpBC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAACjB,YAAY,GAAE,CAAC,CACF,CACjB,CACF,CAAC,cAEFiB,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,sBAAsB,CAC3BC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAAChB,kBAAkB,GAAE,CAAC,CACR,CACjB,CACF,CAAC,cAEFgB,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,mBAAmB,CACxBC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAACd,eAAe,GAAE,CAAC,CACL,CACjB,CACF,CAAC,cAEFc,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,mBAAmB,CACxBC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAACf,iBAAiB,GAAE,CAAC,CACP,CACjB,CACF,CAAC,cAEFe,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,wBAAwB,CAC7BC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAACd,eAAe,GAAE,CAAC,CACL,CACjB,CACF,CAAC,cAEFc,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,UAAU,CACfC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAACb,OAAO,GAAE,CAAC,CACG,CACjB,CACF,CAAC,cAEFa,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,cAAc,CACnBC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAACX,UAAU,GAAE,CAAC,CACA,CACjB,CACF,CAAC,cAEFW,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,cAAc,CACnBC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAACZ,YAAY,GAAE,CAAC,CACF,CACjB,CACF,CAAC,cAEFY,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,mBAAmB,CACxBC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAACX,UAAU,GAAE,CAAC,CACA,CACjB,CACF,CAAC,cAEFW,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,UAAU,CACfC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAACV,OAAO,GAAE,CAAC,CACG,CACjB,CACF,CAAC,cAEFU,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,QAAQ,CACbC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAACT,KAAK,GAAE,CAAC,CACK,CACjB,CACF,CAAC,cAEFS,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,YAAY,CACjBC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAACR,QAAQ,GAAE,CAAC,CACE,CACjB,CACF,CAAC,cAEFQ,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,iBAAiB,CACtBC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAACR,QAAQ,GAAE,CAAC,CACE,CACjB,CACF,CAAC,cAEFQ,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,WAAW,CAChBC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAACP,QAAQ,GAAE,CAAC,CACE,CACjB,CACF,CAAC,cAEFO,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,YAAY,CACjBC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAACL,SAAS,GAAE,CAAC,CACC,CACjB,CACF,CAAC,cAEFK,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,gBAAgB,CACrBC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAACJ,aAAa,GAAE,CAAC,CACH,CACjB,CACF,CAAC,cAEFI,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,WAAW,CAChBC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAACH,QAAQ,GAAE,CAAC,CACE,CACjB,CACF,CAAC,cAEFG,IAAA,CAACzB,KAAK,EACJwC,IAAI,CAAC,mBAAmB,CACxBC,OAAO,cACLhB,IAAA,CAACpB,cAAc,EAAAkC,QAAA,cACbd,IAAA,CAACH,QAAQ,GAAE,CAAC,CACE,CACjB,CACF,CAAC,cAGFG,IAAA,CAACzB,KAAK,EAACwC,IAAI,CAAC,GAAG,CAACC,OAAO,cAAEhB,IAAA,CAACN,QAAQ,GAAE,CAAE,CAAE,CAAC,EACnC,CAAC,CACW,CAAC,CACJ,CAAC,CACV,CAAC,CACT,CAAC,CAEb,CAAC,CAED,cAAe,CAAAS,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}