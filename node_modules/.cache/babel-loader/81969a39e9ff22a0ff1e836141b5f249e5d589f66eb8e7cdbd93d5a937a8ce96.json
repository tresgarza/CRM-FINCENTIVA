{"ast":null,"code":"import { createAnatomy } from '@zag-js/anatomy';\nimport { mergeProps, createMachine, ref, guards } from '@zag-js/core';\nimport { createScope, dataAttr, contains, isHTMLElement, raf, getComputedStyle as getComputedStyle$1, getWindow, getDocument } from '@zag-js/dom-query';\nimport { getPlacementStyles, getPlacement } from '@zag-js/popper';\nimport { trackDismissableBranch } from '@zag-js/dismissable';\nimport { trapFocus } from '@zag-js/focus-trap';\nimport { trackInteractOutside } from '@zag-js/interact-outside';\nimport { createSplitProps, compact, isString, nextIndex, prevIndex, isEqual } from '@zag-js/utils';\nimport { createProps } from '@zag-js/types';\n\n// src/tour.anatomy.ts\nvar anatomy = createAnatomy(\"tour\").parts(\"content\", \"actionTrigger\", \"closeTrigger\", \"progressText\", \"title\", \"description\", \"positioner\", \"arrow\", \"arrowTip\", \"backdrop\", \"spotlight\");\nvar parts = anatomy.build();\nvar dom = createScope({\n  getPositionerId: ctx => ctx.ids?.positioner ?? `tour-positioner-${ctx.id}`,\n  getContentId: ctx => ctx.ids?.content ?? `tour-content-${ctx.id}`,\n  getTitleId: ctx => ctx.ids?.title ?? `tour-title-${ctx.id}`,\n  getDescriptionId: ctx => ctx.ids?.description ?? `tour-desc-${ctx.id}`,\n  getArrowId: ctx => ctx.ids?.arrow ?? `tour-arrow-${ctx.id}`,\n  getBackdropId: ctx => ctx.ids?.backdrop ?? `tour-backdrop-${ctx.id}`,\n  getContentEl: ctx => dom.getById(ctx, dom.getContentId(ctx)),\n  getPositionerEl: ctx => dom.getById(ctx, dom.getPositionerId(ctx)),\n  getBackdropEl: ctx => dom.getById(ctx, dom.getBackdropId(ctx))\n});\n\n// src/utils/clip-path.ts\nfunction getClipPath(options) {\n  const {\n    radius = 0,\n    rootSize: {\n      width: w,\n      height: h\n    },\n    rect: {\n      width,\n      height,\n      x,\n      y\n    },\n    enabled = true\n  } = options;\n  if (!enabled) return \"\";\n  const {\n    topLeft = 0,\n    topRight = 0,\n    bottomRight = 0,\n    bottomLeft = 0\n  } = typeof radius === \"number\" ? {\n    topLeft: radius,\n    topRight: radius,\n    bottomRight: radius,\n    bottomLeft: radius\n  } : radius;\n  return `M${w},${h}  H0  V0  H${w}  V${h}  Z  M${x + topLeft},${y}  a${topLeft},${topLeft},0,0,0-${topLeft},${topLeft}  V${height + y - bottomLeft}  a${bottomLeft},${bottomLeft},0,0,0,${bottomLeft},${bottomLeft}  H${width + x - bottomRight}  a${bottomRight},${bottomRight},0,0,0,${bottomRight}-${bottomRight}  V${y + topRight}  a${topRight},${topRight},0,0,0-${topRight}-${topRight}  Z`;\n}\n\n// src/utils/step.ts\nvar isTooltipStep = step => {\n  return step?.type === \"tooltip\";\n};\nvar isDialogStep = step => {\n  return step?.type === \"dialog\";\n};\nvar isTooltipPlacement = placement => {\n  return placement != null && placement != \"center\";\n};\nvar normalizeStep = step => {\n  if (step.type === \"floating\") {\n    return {\n      backdrop: false,\n      arrow: false,\n      placement: \"bottom-end\",\n      ...step\n    };\n  }\n  if (step.target == null || step.type === \"dialog\") {\n    return {\n      type: \"dialog\",\n      placement: \"center\",\n      backdrop: true,\n      ...step\n    };\n  }\n  if (!step.type || step.type === \"tooltip\") {\n    return {\n      type: \"tooltip\",\n      arrow: true,\n      backdrop: true,\n      ...step\n    };\n  }\n  return step;\n};\nvar findStep = (steps, id) => {\n  const res = id != null ? steps.find(step => step.id === id) : null;\n  return res ? normalizeStep(res) : null;\n};\nvar findStepIndex = (steps, id) => {\n  return id != null ? steps.findIndex(step => step.id === id) : -1;\n};\n\n// src/tour.connect.ts\nfunction connect(state, send, normalize) {\n  const open = state.hasTag(\"open\");\n  const steps = Array.from(state.context.steps);\n  const stepIndex = state.context.stepIndex;\n  const step = state.context.step;\n  const hasTarget = typeof step?.target?.() !== \"undefined\";\n  const hasNextStep = state.context.hasNextStep;\n  const hasPrevStep = state.context.hasPrevStep;\n  const firstStep = state.context.isFirstStep;\n  const lastStep = state.context.isLastStep;\n  const placement = state.context.currentPlacement;\n  const targetRect = state.context.targetRect;\n  const popperStyles = getPlacementStyles({\n    strategy: \"absolute\",\n    placement: isTooltipPlacement(placement) ? placement : void 0\n  });\n  const clipPath = getClipPath({\n    enabled: isTooltipStep(step),\n    rect: targetRect,\n    rootSize: state.context.boundarySize,\n    radius: state.context.spotlightRadius\n  });\n  const actionMap = {\n    next() {\n      send({\n        type: \"STEP.NEXT\",\n        src: \"actionTrigger\"\n      });\n    },\n    prev() {\n      send({\n        type: \"STEP.PREV\",\n        src: \"actionTrigger\"\n      });\n    },\n    dismiss() {\n      send({\n        type: \"DISMISS\",\n        src: \"actionTrigger\"\n      });\n    },\n    goto(id) {\n      send({\n        type: \"STEP.SET\",\n        value: id,\n        src: \"actionTrigger\"\n      });\n    }\n  };\n  return {\n    open,\n    totalSteps: steps.length,\n    stepIndex,\n    step,\n    hasNextStep,\n    hasPrevStep,\n    firstStep,\n    lastStep,\n    addStep(step2) {\n      const next = steps.concat(step2);\n      send({\n        type: \"STEPS.SET\",\n        value: next,\n        src: \"addStep\"\n      });\n    },\n    removeStep(id) {\n      const next = steps.filter(step2 => step2.id !== id);\n      send({\n        type: \"STEPS.SET\",\n        value: next,\n        src: \"removeStep\"\n      });\n    },\n    updateStep(id, stepOverrides) {\n      const next = steps.map(step2 => step2.id === id ? mergeProps(step2, stepOverrides) : step2);\n      send({\n        type: \"STEPS.SET\",\n        value: next,\n        src: \"updateStep\"\n      });\n    },\n    setSteps(steps2) {\n      send({\n        type: \"STEPS.SET\",\n        value: steps2,\n        src: \"setSteps\"\n      });\n    },\n    setStep(id) {\n      send({\n        type: \"STEP.SET\",\n        value: id\n      });\n    },\n    start(id) {\n      send({\n        type: \"START\",\n        id\n      });\n    },\n    isValidStep(id) {\n      return steps.some(step2 => step2.id === id);\n    },\n    isCurrentStep(id) {\n      return Boolean(step?.id === id);\n    },\n    next() {\n      send({\n        type: \"STEP.NEXT\"\n      });\n    },\n    prev() {\n      send({\n        type: \"STEP.PREV\"\n      });\n    },\n    getProgressPercent() {\n      return stepIndex / steps.length * 100;\n    },\n    getProgressText() {\n      const effectiveSteps = steps.filter(step2 => step2.type !== \"wait\");\n      const index = findStepIndex(effectiveSteps, step?.id);\n      const details = {\n        current: index,\n        total: effectiveSteps.length\n      };\n      return state.context.translations.progressText?.(details) ?? \"\";\n    },\n    getBackdropProps() {\n      return normalize.element({\n        ...parts.backdrop.attrs,\n        id: dom.getBackdropId(state.context),\n        dir: state.context.dir,\n        hidden: !open,\n        \"data-state\": open ? \"open\" : \"closed\",\n        \"data-type\": step?.type,\n        style: {\n          \"--tour-layer\": 0,\n          clipPath: isTooltipStep(step) ? `path(\"${clipPath}\")` : void 0,\n          position: \"absolute\",\n          inset: \"0\",\n          willChange: \"clip-path\"\n        }\n      });\n    },\n    getSpotlightProps() {\n      return normalize.element({\n        ...parts.spotlight.attrs,\n        hidden: !open || !step?.target?.(),\n        style: {\n          \"--tour-layer\": 1,\n          position: \"absolute\",\n          width: `${targetRect.width}px`,\n          height: `${targetRect.height}px`,\n          left: `${targetRect.x}px`,\n          top: `${targetRect.y}px`,\n          borderRadius: `${state.context.spotlightRadius}px`,\n          pointerEvents: \"none\"\n        }\n      });\n    },\n    getProgressTextProps() {\n      return normalize.element({\n        ...parts.progressText.attrs\n      });\n    },\n    getPositionerProps() {\n      return normalize.element({\n        ...parts.positioner.attrs,\n        dir: state.context.dir,\n        id: dom.getPositionerId(state.context),\n        \"data-type\": step?.type,\n        \"data-placement\": state.context.currentPlacement,\n        style: {\n          \"--tour-layer\": 2,\n          ...(step?.type === \"tooltip\" && popperStyles.floating)\n        }\n      });\n    },\n    getArrowProps() {\n      return normalize.element({\n        id: dom.getArrowId(state.context),\n        ...parts.arrow.attrs,\n        dir: state.context.dir,\n        hidden: step?.type !== \"tooltip\",\n        style: step?.type === \"tooltip\" ? popperStyles.arrow : void 0,\n        opacity: hasTarget ? void 0 : 0\n      });\n    },\n    getArrowTipProps() {\n      return normalize.element({\n        ...parts.arrowTip.attrs,\n        dir: state.context.dir,\n        style: popperStyles.arrowTip\n      });\n    },\n    getContentProps() {\n      return normalize.element({\n        ...parts.content.attrs,\n        id: dom.getContentId(state.context),\n        dir: state.context.dir,\n        role: \"alertdialog\",\n        \"aria-modal\": \"true\",\n        \"aria-live\": \"polite\",\n        \"aria-atomic\": \"true\",\n        hidden: !open,\n        \"data-state\": open ? \"open\" : \"closed\",\n        \"data-type\": step?.type,\n        \"data-placement\": state.context.currentPlacement,\n        \"data-step\": step?.id,\n        \"aria-labelledby\": dom.getTitleId(state.context),\n        \"aria-describedby\": dom.getDescriptionId(state.context),\n        tabIndex: -1,\n        onKeyDown(event) {\n          if (event.defaultPrevented) return;\n          if (!state.context.keyboardNavigation) return;\n          const isRtl = state.context.dir === \"rtl\";\n          switch (event.key) {\n            case \"ArrowRight\":\n              if (!hasNextStep) return;\n              send({\n                type: isRtl ? \"STEP.PREV\" : \"STEP.NEXT\",\n                src: \"keydown\"\n              });\n              break;\n            case \"ArrowLeft\":\n              if (!hasPrevStep) return;\n              send({\n                type: isRtl ? \"STEP.NEXT\" : \"STEP.PREV\",\n                src: \"keydown\"\n              });\n              break;\n          }\n        }\n      });\n    },\n    getTitleProps() {\n      return normalize.element({\n        ...parts.title.attrs,\n        id: dom.getTitleId(state.context),\n        \"data-placement\": hasTarget ? state.context.currentPlacement : \"center\"\n      });\n    },\n    getDescriptionProps() {\n      return normalize.element({\n        ...parts.description.attrs,\n        id: dom.getDescriptionId(state.context),\n        \"data-placement\": hasTarget ? state.context.currentPlacement : \"center\"\n      });\n    },\n    getCloseTriggerProps() {\n      return normalize.element({\n        ...parts.closeTrigger.attrs,\n        \"data-type\": step?.type,\n        \"aria-label\": state.context.translations.close,\n        onClick: actionMap.dismiss\n      });\n    },\n    getActionTriggerProps(props2) {\n      const {\n        action,\n        attrs\n      } = props2.action;\n      let actionProps = {};\n      switch (action) {\n        case \"next\":\n          actionProps = {\n            \"data-type\": \"next\",\n            disabled: !hasNextStep,\n            \"data-disabled\": dataAttr(!hasNextStep),\n            \"aria-label\": state.context.translations.nextStep,\n            onClick: actionMap.next\n          };\n          break;\n        case \"prev\":\n          actionProps = {\n            \"data-type\": \"prev\",\n            disabled: !hasPrevStep,\n            \"data-disabled\": dataAttr(!hasPrevStep),\n            \"aria-label\": state.context.translations.prevStep,\n            onClick: actionMap.prev\n          };\n          break;\n        case \"dismiss\":\n          actionProps = {\n            \"data-type\": \"close\",\n            \"aria-label\": state.context.translations.close,\n            onClick: actionMap.dismiss\n          };\n          break;\n        default:\n          actionProps = {\n            \"data-type\": \"custom\",\n            onClick() {\n              if (typeof action === \"function\") {\n                action(actionMap);\n              }\n            }\n          };\n          break;\n      }\n      return normalize.button({\n        ...parts.actionTrigger.attrs,\n        type: \"button\",\n        ...attrs,\n        ...actionProps\n      });\n    }\n  };\n}\nfunction getFrameElement(win) {\n  return win.parent && Object.getPrototypeOf(win.parent) ? win.frameElement : null;\n}\nvar normalizeEventPoint = event => {\n  let clientX = event.clientX;\n  let clientY = event.clientY;\n  let win = event.view || window;\n  let frame = getFrameElement(win);\n  while (frame) {\n    const iframeRect = frame.getBoundingClientRect();\n    const css = getComputedStyle(frame);\n    const left = iframeRect.left + (frame.clientLeft + parseFloat(css.paddingLeft));\n    const top = iframeRect.top + (frame.clientTop + parseFloat(css.paddingTop));\n    clientX += left;\n    clientY += top;\n    win = getWindow(frame);\n    frame = getFrameElement(win);\n  }\n  return {\n    clientX,\n    clientY\n  };\n};\nfunction isEventInRect(rect, event) {\n  const {\n    clientX,\n    clientY\n  } = normalizeEventPoint(event);\n  return rect.y <= clientY && clientY <= rect.y + rect.height && rect.x <= clientX && clientX <= rect.x + rect.width;\n}\nfunction offset(r, i) {\n  const dx = i.x || 0;\n  const dy = i.y || 0;\n  return {\n    x: r.x - dx,\n    y: r.y - dy,\n    width: r.width + dx + dx,\n    height: r.height + dy + dy\n  };\n}\n\n// src/tour.machine.ts\nvar {\n  and\n} = guards;\nfunction machine(userContext) {\n  const ctx = compact(userContext);\n  return createMachine({\n    id: \"tour\",\n    initial: \"tour.inactive\",\n    context: {\n      stepId: null,\n      steps: [],\n      preventInteraction: false,\n      closeOnInteractOutside: true,\n      closeOnEscape: true,\n      keyboardNavigation: true,\n      spotlightOffset: {\n        x: 10,\n        y: 10\n      },\n      spotlightRadius: 4,\n      translations: {\n        nextStep: \"next step\",\n        prevStep: \"previous step\",\n        close: \"close tour\",\n        progressText: ({\n          current,\n          total\n        }) => `${current + 1} of ${total}`,\n        skip: \"skip tour\",\n        ...ctx.translations\n      },\n      ...ctx,\n      resolvedTarget: ref({\n        value: null\n      }),\n      targetRect: ref({\n        width: 0,\n        height: 0,\n        x: 0,\n        y: 0\n      }),\n      boundarySize: ref({\n        width: 0,\n        height: 0\n      })\n    },\n    computed: {\n      stepIndex: ctx2 => findStepIndex(ctx2.steps, ctx2.stepId),\n      step: ctx2 => findStep(ctx2.steps, ctx2.stepId),\n      hasNextStep: ctx2 => ctx2.stepIndex < ctx2.steps.length - 1,\n      hasPrevStep: ctx2 => ctx2.stepIndex > 0,\n      isFirstStep: ctx2 => ctx2.stepIndex === 0,\n      isLastStep: ctx2 => ctx2.stepIndex === ctx2.steps.length - 1\n    },\n    created: [\"validateSteps\"],\n    watch: {\n      stepId: [\"setResolvedTarget\", \"raiseStepChange\", \"syncTargetAttrs\"]\n    },\n    activities: [\"trackBoundarySize\"],\n    exit: [\"clearStep\", \"cleanupFns\"],\n    on: {\n      \"STEPS.SET\": {\n        actions: [\"setSteps\"]\n      },\n      \"STEP.SET\": {\n        actions: [\"setStep\"]\n      },\n      \"STEP.NEXT\": {\n        actions: [\"setNextStep\"]\n      },\n      \"STEP.PREV\": {\n        actions: [\"setPrevStep\"]\n      },\n      \"STEP.CHANGED\": [{\n        guard: and(\"isValidStep\", \"hasResolvedTarget\"),\n        target: \"target.scrolling\"\n      }, {\n        guard: and(\"isValidStep\", \"hasTarget\"),\n        target: \"target.resolving\"\n      }, {\n        guard: and(\"isValidStep\", \"isWaitingStep\"),\n        target: \"step.waiting\"\n      }, {\n        guard: \"isValidStep\",\n        target: \"tour.active\"\n      }],\n      DISMISS: [{\n        guard: \"isLastStep\",\n        target: \"tour.inactive\",\n        actions: [\"invokeOnDismiss\", \"invokeOnComplete\", \"clearStep\"]\n      }, {\n        target: \"tour.inactive\",\n        actions: [\"invokeOnDismiss\", \"clearStep\"]\n      }]\n    },\n    states: {\n      \"tour.inactive\": {\n        tags: [\"closed\"],\n        on: {\n          START: {\n            actions: [\"setInitialStep\", \"invokeOnStart\"]\n          }\n        }\n      },\n      \"target.resolving\": {\n        tags: [\"closed\"],\n        activities: [\"waitForTarget\"],\n        after: {\n          MISSING_TARGET_TIMEOUT: {\n            target: \"tour.inactive\",\n            actions: [\"invokeOnNotFound\", \"clearStep\"]\n          }\n        },\n        on: {\n          \"TARGET.RESOLVED\": {\n            target: \"target.scrolling\",\n            actions: [\"setResolvedTarget\"]\n          }\n        }\n      },\n      \"target.scrolling\": {\n        tags: [\"open\"],\n        entry: [\"scrollToTarget\"],\n        activities: [\"trapFocus\", \"trackPlacement\", \"trackDismissableBranch\", \"trackInteractOutside\", \"trackEscapeKeydown\"],\n        after: {\n          100: \"tour.active\"\n        }\n      },\n      \"step.waiting\": {\n        tags: [\"closed\"]\n      },\n      \"tour.active\": {\n        tags: [\"open\"],\n        activities: [\"trapFocus\", \"trackPlacement\", \"trackDismissableBranch\", \"trackInteractOutside\", \"trackEscapeKeydown\"]\n      }\n    }\n  }, {\n    delays: {\n      MISSING_TARGET_TIMEOUT: 3e3\n    },\n    guards: {\n      isLastStep: ctx2 => ctx2.isLastStep,\n      isValidStep: ctx2 => ctx2.stepId != null,\n      hasTarget: ctx2 => ctx2.step?.target != null,\n      hasResolvedTarget: ctx2 => ctx2.resolvedTarget.value != null,\n      isWaitingStep: ctx2 => ctx2.step?.type === \"wait\"\n    },\n    actions: {\n      scrollToTarget(ctx2, _evt) {\n        const node = ctx2.resolvedTarget.value;\n        node?.scrollIntoView({\n          behavior: \"instant\",\n          block: \"center\",\n          inline: \"center\"\n        });\n      },\n      setStep(ctx2, evt) {\n        set.step(ctx2, evt.value);\n      },\n      clearStep(ctx2) {\n        ctx2.targetRect = ref({\n          width: 0,\n          height: 0,\n          x: 0,\n          y: 0\n        });\n        set.step(ctx2, -1);\n      },\n      setInitialStep(ctx2, evt) {\n        if (ctx2.steps.length === 0) return;\n        if (isString(evt.id)) {\n          const idx = findStepIndex(ctx2.steps, evt.id);\n          set.step(ctx2, idx);\n          return;\n        }\n        set.step(ctx2, 0);\n      },\n      setNextStep(ctx2) {\n        const idx = nextIndex(ctx2.steps, ctx2.stepIndex);\n        set.step(ctx2, idx);\n      },\n      setPrevStep(ctx2) {\n        const idx = prevIndex(ctx2.steps, ctx2.stepIndex);\n        set.step(ctx2, idx);\n      },\n      invokeOnStart(ctx2) {\n        invoke.statusChange(ctx2, \"started\");\n      },\n      invokeOnDismiss(ctx2) {\n        invoke.statusChange(ctx2, \"dismissed\");\n      },\n      invokeOnComplete(ctx2) {\n        invoke.statusChange(ctx2, \"completed\");\n      },\n      invokeOnSkip(ctx2) {\n        invoke.statusChange(ctx2, \"skipped\");\n      },\n      invokeOnNotFound(ctx2) {\n        invoke.statusChange(ctx2, \"not-found\");\n      },\n      raiseStepChange(_ctx, _evt, {\n        send\n      }) {\n        send({\n          type: \"STEP.CHANGED\"\n        });\n      },\n      setResolvedTarget(ctx2, evt) {\n        const node = evt.node ?? ctx2.step?.target?.();\n        ctx2.resolvedTarget.value = node ?? null;\n      },\n      syncTargetAttrs(ctx2) {\n        ctx2._targetCleanup?.();\n        ctx2._targetCleanup = void 0;\n        const targetEl = ctx2.resolvedTarget.value;\n        if (!targetEl) return;\n        if (ctx2.preventInteraction) targetEl.inert = true;\n        targetEl.setAttribute(\"data-tour-highlighted\", \"\");\n        ctx2._targetCleanup = () => {\n          if (ctx2.preventInteraction) targetEl.inert = false;\n          targetEl.removeAttribute(\"data-tour-highlighted\");\n        };\n      },\n      cleanupFns(ctx2) {\n        ctx2._targetCleanup?.();\n        ctx2._targetCleanup = void 0;\n        ctx2._effectCleanup?.();\n        ctx2._effectCleanup = void 0;\n      },\n      validateSteps(ctx2) {\n        const ids = /* @__PURE__ */new Set();\n        ctx2.steps.forEach(step => {\n          if (ids.has(step.id)) {\n            throw new Error(`[zag-js/tour] Duplicate step id: ${step.id}`);\n          }\n          if (step.target == null && step.type == null) {\n            throw new Error(`[zag-js/tour] Step ${step.id} has no target or type. At least one of those is required.`);\n          }\n          ids.add(step.id);\n        });\n      }\n    },\n    activities: {\n      waitForTarget(ctx2, _evt, {\n        send\n      }) {\n        const targetEl = ctx2.step?.target;\n        const win = dom.getWin(ctx2);\n        const rootNode = dom.getRootNode(ctx2);\n        const observer = new win.MutationObserver(() => {\n          const node = targetEl?.();\n          if (node) {\n            send({\n              type: \"TARGET.RESOLVED\",\n              node\n            });\n            observer.disconnect();\n          }\n        });\n        observer.observe(rootNode, {\n          childList: true,\n          subtree: true,\n          characterData: true\n        });\n        return () => {\n          observer.disconnect();\n        };\n      },\n      trackBoundarySize(ctx2) {\n        const win = dom.getWin(ctx2);\n        const doc = dom.getDoc(ctx2);\n        const onResize = () => {\n          const width = visualViewport?.width ?? win.innerWidth;\n          const height = doc.documentElement.scrollHeight;\n          ctx2.boundarySize = {\n            width,\n            height\n          };\n        };\n        onResize();\n        const viewport = win.visualViewport ?? win;\n        viewport.addEventListener(\"resize\", onResize);\n        return () => viewport.removeEventListener(\"resize\", onResize);\n      },\n      trackEscapeKeydown(ctx2, _evt, {\n        send\n      }) {\n        if (!ctx2.closeOnEscape) return;\n        const doc = dom.getDoc(ctx2);\n        const onKeyDown = event => {\n          if (event.key === \"Escape\") {\n            event.preventDefault();\n            event.stopPropagation();\n            send({\n              type: \"DISMISS\",\n              src: \"esc\"\n            });\n          }\n        };\n        doc.addEventListener(\"keydown\", onKeyDown, true);\n        return () => {\n          doc.removeEventListener(\"keydown\", onKeyDown, true);\n        };\n      },\n      trackInteractOutside(ctx2, _evt, {\n        send\n      }) {\n        if (ctx2.step == null) return;\n        const contentEl = () => dom.getContentEl(ctx2);\n        return trackInteractOutside(contentEl, {\n          defer: true,\n          exclude(target) {\n            return contains(ctx2.step?.target?.(), target);\n          },\n          onFocusOutside(event) {\n            ctx2.onFocusOutside?.(event);\n            if (!ctx2.closeOnInteractOutside) {\n              event.preventDefault();\n            }\n          },\n          onPointerDownOutside(event) {\n            ctx2.onPointerDownOutside?.(event);\n            const isWithin = isEventInRect(ctx2.targetRect, event.detail.originalEvent);\n            if (isWithin) {\n              event.preventDefault();\n              return;\n            }\n            if (!ctx2.closeOnInteractOutside) {\n              event.preventDefault();\n            }\n          },\n          onInteractOutside(event) {\n            ctx2.onInteractOutside?.(event);\n            if (event.defaultPrevented) return;\n            send({\n              type: \"DISMISS\",\n              src: \"interact-outside\"\n            });\n          }\n        });\n      },\n      trackDismissableBranch(ctx2) {\n        if (ctx2.step == null) return;\n        const contentEl = () => dom.getContentEl(ctx2);\n        return trackDismissableBranch(contentEl, {\n          defer: !contentEl()\n        });\n      },\n      trapFocus(ctx2) {\n        const contentEl = () => dom.getContentEl(ctx2);\n        return trapFocus(contentEl, {\n          escapeDeactivates: false,\n          allowOutsideClick: true,\n          preventScroll: true,\n          returnFocusOnDeactivate: false\n        });\n      },\n      trackPlacement(ctx2) {\n        if (ctx2.step == null) return;\n        ctx2.currentPlacement = ctx2.step.placement ?? \"bottom\";\n        if (isDialogStep(ctx2.step)) return syncZIndex(ctx2);\n        if (!isTooltipStep(ctx2.step)) return;\n        const positionerEl = () => dom.getPositionerEl(ctx2);\n        return getPlacement(ctx2.resolvedTarget.value, positionerEl, {\n          defer: true,\n          placement: ctx2.step.placement ?? \"bottom\",\n          strategy: \"absolute\",\n          gutter: 10,\n          offset: ctx2.step.offset,\n          getAnchorRect(el) {\n            if (!isHTMLElement(el)) return null;\n            const rect = el.getBoundingClientRect();\n            return offset(rect, ctx2.spotlightOffset);\n          },\n          onComplete(data) {\n            const {\n              rects\n            } = data.middlewareData;\n            ctx2.currentPlacement = data.placement;\n            ctx2.targetRect = rects.reference;\n          }\n        });\n      }\n    }\n  });\n}\nfunction syncZIndex(ctx) {\n  return raf(() => {\n    const contentEl = dom.getContentEl(ctx);\n    if (!contentEl) return;\n    const styles = getComputedStyle$1(contentEl);\n    const positionerEl = dom.getPositionerEl(ctx);\n    const backdropEl = dom.getBackdropEl(ctx);\n    if (positionerEl) {\n      positionerEl.style.setProperty(\"--z-index\", styles.zIndex);\n      positionerEl.style.setProperty(\"z-index\", \"var(--z-index)\");\n    }\n    if (backdropEl) {\n      backdropEl.style.setProperty(\"--z-index\", styles.zIndex);\n    }\n  });\n}\nvar invoke = {\n  stepChange(ctx) {\n    const effectiveLength = ctx.steps.filter(step => step.type !== \"wait\").length;\n    const progress = (ctx.stepIndex + 1) / effectiveLength;\n    ctx.onStepChange?.({\n      complete: ctx.isLastStep,\n      stepId: ctx.stepId,\n      totalSteps: ctx.steps.length,\n      stepIndex: ctx.stepIndex,\n      progress\n    });\n    ctx._effectCleanup?.();\n    ctx._effectCleanup = void 0;\n  },\n  statusChange(ctx, status) {\n    ctx.onStatusChange?.({\n      status,\n      stepId: ctx.stepId,\n      stepIndex: ctx.stepIndex\n    });\n  }\n};\nvar set = {\n  step(ctx, idx) {\n    const step = ctx.steps[idx];\n    if (!step) {\n      ctx.stepId = null;\n      invoke.stepChange(ctx);\n      return;\n    }\n    if (isEqual(ctx.stepId, step.id)) return;\n    const update = data => {\n      ctx.steps[idx] = {\n        ...step,\n        ...data\n      };\n    };\n    const next = () => {\n      const idx2 = nextIndex(ctx.steps, ctx.stepIndex);\n      ctx.stepId = ctx.steps[idx2].id;\n      invoke.stepChange(ctx);\n    };\n    const goto = id => {\n      const idx2 = ctx.steps.findIndex(s => s.id === id);\n      ctx.stepId = ctx.steps[idx2].id;\n      invoke.stepChange(ctx);\n    };\n    const dismiss = () => {\n      ctx.stepId = null;\n      invoke.stepChange(ctx);\n      invoke.statusChange(ctx, \"dismissed\");\n    };\n    const show = () => {\n      ctx.stepId = step.id;\n      invoke.stepChange(ctx);\n    };\n    if (!step.effect) {\n      show();\n      return;\n    }\n    ctx._effectCleanup = step.effect({\n      show,\n      next,\n      update,\n      target: step.target,\n      dismiss,\n      goto\n    });\n  }\n};\nvar props = createProps()([\"closeOnEscape\", \"closeOnInteractOutside\", \"dir\", \"getRootNode\", \"id\", \"ids\", \"keyboardNavigation\", \"onFocusOutside\", \"onInteractOutside\", \"onPointerDownOutside\", \"onStatusChange\", \"onStepChange\", \"preventInteraction\", \"spotlightOffset\", \"spotlightRadius\", \"stepId\", \"steps\", \"translations\"]);\nvar splitProps = createSplitProps(props);\nfunction waitForPromise(promise, controller, timeout) {\n  const {\n    signal\n  } = controller;\n  const wrappedPromise = new Promise((resolve, reject) => {\n    const timeoutId = setTimeout(() => {\n      reject(new Error(`Timeout of ${timeout}ms exceeded`));\n    }, timeout);\n    signal.addEventListener(\"abort\", () => {\n      clearTimeout(timeoutId);\n      reject(new Error(\"Promise aborted\"));\n    });\n    promise.then(result => {\n      if (!signal.aborted) {\n        clearTimeout(timeoutId);\n        resolve(result);\n      }\n    }).catch(error => {\n      if (!signal.aborted) {\n        clearTimeout(timeoutId);\n        reject(error);\n      }\n    });\n  });\n  const abort = () => controller.abort();\n  return [wrappedPromise, abort];\n}\nfunction waitForElement(target, options) {\n  const {\n    timeout,\n    rootNode\n  } = options;\n  const win = getWindow(rootNode);\n  const doc = getDocument(rootNode);\n  const controller = new win.AbortController();\n  return waitForPromise(new Promise(resolve => {\n    const el = target();\n    if (el) {\n      resolve(el);\n      return;\n    }\n    const observer = new win.MutationObserver(() => {\n      const el2 = target();\n      if (el2) {\n        observer.disconnect();\n        resolve(el2);\n      }\n    });\n    observer.observe(doc.body, {\n      childList: true,\n      subtree: true\n    });\n  }), controller, timeout);\n}\nfunction waitForElementValue(target, value, options) {\n  const {\n    timeout,\n    rootNode\n  } = options;\n  const win = getWindow(rootNode);\n  const controller = new win.AbortController();\n  return waitForPromise(new Promise(resolve => {\n    const el = target();\n    if (!el) return;\n    const checkValue = () => {\n      if (el.value === value) {\n        resolve();\n        el.removeEventListener(\"input\", checkValue);\n      }\n    };\n    checkValue();\n    el.addEventListener(\"input\", checkValue, {\n      signal: controller.signal\n    });\n  }), controller, timeout);\n}\nexport { anatomy, connect, machine, props, splitProps, waitForElement, waitForElementValue };","map":{"version":3,"names":["createAnatomy","mergeProps","createMachine","ref","guards","createScope","dataAttr","contains","isHTMLElement","raf","getComputedStyle","getComputedStyle$1","getWindow","getDocument","getPlacementStyles","getPlacement","trackDismissableBranch","trapFocus","trackInteractOutside","createSplitProps","compact","isString","nextIndex","prevIndex","isEqual","createProps","anatomy","parts","build","dom","getPositionerId","ctx","ids","positioner","id","getContentId","content","getTitleId","title","getDescriptionId","description","getArrowId","arrow","getBackdropId","backdrop","getContentEl","getById","getPositionerEl","getBackdropEl","getClipPath","options","radius","rootSize","width","w","height","h","rect","x","y","enabled","topLeft","topRight","bottomRight","bottomLeft","isTooltipStep","step","type","isDialogStep","isTooltipPlacement","placement","normalizeStep","target","findStep","steps","res","find","findStepIndex","findIndex","connect","state","send","normalize","open","hasTag","Array","from","context","stepIndex","hasTarget","hasNextStep","hasPrevStep","firstStep","isFirstStep","lastStep","isLastStep","currentPlacement","targetRect","popperStyles","strategy","clipPath","boundarySize","spotlightRadius","actionMap","next","src","prev","dismiss","goto","value","totalSteps","length","addStep","step2","concat","removeStep","filter","updateStep","stepOverrides","map","setSteps","steps2","setStep","start","isValidStep","some","isCurrentStep","Boolean","getProgressPercent","getProgressText","effectiveSteps","index","details","current","total","translations","progressText","getBackdropProps","element","attrs","dir","hidden","style","position","inset","willChange","getSpotlightProps","spotlight","left","top","borderRadius","pointerEvents","getProgressTextProps","getPositionerProps","floating","getArrowProps","opacity","getArrowTipProps","arrowTip","getContentProps","role","tabIndex","onKeyDown","event","defaultPrevented","keyboardNavigation","isRtl","key","getTitleProps","getDescriptionProps","getCloseTriggerProps","closeTrigger","close","onClick","getActionTriggerProps","props2","action","actionProps","disabled","nextStep","prevStep","button","actionTrigger","getFrameElement","win","parent","Object","getPrototypeOf","frameElement","normalizeEventPoint","clientX","clientY","view","window","frame","iframeRect","getBoundingClientRect","css","clientLeft","parseFloat","paddingLeft","clientTop","paddingTop","isEventInRect","offset","r","i","dx","dy","and","machine","userContext","initial","stepId","preventInteraction","closeOnInteractOutside","closeOnEscape","spotlightOffset","skip","resolvedTarget","computed","ctx2","created","watch","activities","exit","on","actions","guard","DISMISS","states","tags","START","after","MISSING_TARGET_TIMEOUT","entry","delays","hasResolvedTarget","isWaitingStep","scrollToTarget","_evt","node","scrollIntoView","behavior","block","inline","evt","set","clearStep","setInitialStep","idx","setNextStep","setPrevStep","invokeOnStart","invoke","statusChange","invokeOnDismiss","invokeOnComplete","invokeOnSkip","invokeOnNotFound","raiseStepChange","_ctx","setResolvedTarget","syncTargetAttrs","_targetCleanup","targetEl","inert","setAttribute","removeAttribute","cleanupFns","_effectCleanup","validateSteps","Set","forEach","has","Error","add","waitForTarget","getWin","rootNode","getRootNode","observer","MutationObserver","disconnect","observe","childList","subtree","characterData","trackBoundarySize","doc","getDoc","onResize","visualViewport","innerWidth","documentElement","scrollHeight","viewport","addEventListener","removeEventListener","trackEscapeKeydown","preventDefault","stopPropagation","contentEl","defer","exclude","onFocusOutside","onPointerDownOutside","isWithin","detail","originalEvent","onInteractOutside","escapeDeactivates","allowOutsideClick","preventScroll","returnFocusOnDeactivate","trackPlacement","syncZIndex","positionerEl","gutter","getAnchorRect","el","onComplete","data","rects","middlewareData","reference","styles","backdropEl","setProperty","zIndex","stepChange","effectiveLength","progress","onStepChange","complete","status","onStatusChange","update","idx2","s","show","effect","props","splitProps","waitForPromise","promise","controller","timeout","signal","wrappedPromise","Promise","resolve","reject","timeoutId","setTimeout","clearTimeout","then","result","aborted","catch","error","abort","waitForElement","AbortController","el2","body","waitForElementValue","checkValue"],"sources":["/Users/diegogg98/NEW CRM MAR18/node_modules/@zag-js/tour/dist/index.mjs"],"sourcesContent":["import { createAnatomy } from '@zag-js/anatomy';\nimport { mergeProps, createMachine, ref, guards } from '@zag-js/core';\nimport { createScope, dataAttr, contains, isHTMLElement, raf, getComputedStyle as getComputedStyle$1, getWindow, getDocument } from '@zag-js/dom-query';\nimport { getPlacementStyles, getPlacement } from '@zag-js/popper';\nimport { trackDismissableBranch } from '@zag-js/dismissable';\nimport { trapFocus } from '@zag-js/focus-trap';\nimport { trackInteractOutside } from '@zag-js/interact-outside';\nimport { createSplitProps, compact, isString, nextIndex, prevIndex, isEqual } from '@zag-js/utils';\nimport { createProps } from '@zag-js/types';\n\n// src/tour.anatomy.ts\nvar anatomy = createAnatomy(\"tour\").parts(\n  \"content\",\n  \"actionTrigger\",\n  \"closeTrigger\",\n  \"progressText\",\n  \"title\",\n  \"description\",\n  \"positioner\",\n  \"arrow\",\n  \"arrowTip\",\n  \"backdrop\",\n  \"spotlight\"\n);\nvar parts = anatomy.build();\nvar dom = createScope({\n  getPositionerId: (ctx) => ctx.ids?.positioner ?? `tour-positioner-${ctx.id}`,\n  getContentId: (ctx) => ctx.ids?.content ?? `tour-content-${ctx.id}`,\n  getTitleId: (ctx) => ctx.ids?.title ?? `tour-title-${ctx.id}`,\n  getDescriptionId: (ctx) => ctx.ids?.description ?? `tour-desc-${ctx.id}`,\n  getArrowId: (ctx) => ctx.ids?.arrow ?? `tour-arrow-${ctx.id}`,\n  getBackdropId: (ctx) => ctx.ids?.backdrop ?? `tour-backdrop-${ctx.id}`,\n  getContentEl: (ctx) => dom.getById(ctx, dom.getContentId(ctx)),\n  getPositionerEl: (ctx) => dom.getById(ctx, dom.getPositionerId(ctx)),\n  getBackdropEl: (ctx) => dom.getById(ctx, dom.getBackdropId(ctx))\n});\n\n// src/utils/clip-path.ts\nfunction getClipPath(options) {\n  const {\n    radius = 0,\n    rootSize: { width: w, height: h },\n    rect: { width, height, x, y },\n    enabled = true\n  } = options;\n  if (!enabled) return \"\";\n  const {\n    topLeft = 0,\n    topRight = 0,\n    bottomRight = 0,\n    bottomLeft = 0\n  } = typeof radius === \"number\" ? { topLeft: radius, topRight: radius, bottomRight: radius, bottomLeft: radius } : radius;\n  return `M${w},${h}  H0  V0  H${w}  V${h}  Z  M${x + topLeft},${y}  a${topLeft},${topLeft},0,0,0-${topLeft},${topLeft}  V${height + y - bottomLeft}  a${bottomLeft},${bottomLeft},0,0,0,${bottomLeft},${bottomLeft}  H${width + x - bottomRight}  a${bottomRight},${bottomRight},0,0,0,${bottomRight}-${bottomRight}  V${y + topRight}  a${topRight},${topRight},0,0,0-${topRight}-${topRight}  Z`;\n}\n\n// src/utils/step.ts\nvar isTooltipStep = (step) => {\n  return step?.type === \"tooltip\";\n};\nvar isDialogStep = (step) => {\n  return step?.type === \"dialog\";\n};\nvar isTooltipPlacement = (placement) => {\n  return placement != null && placement != \"center\";\n};\nvar normalizeStep = (step) => {\n  if (step.type === \"floating\") {\n    return { backdrop: false, arrow: false, placement: \"bottom-end\", ...step };\n  }\n  if (step.target == null || step.type === \"dialog\") {\n    return { type: \"dialog\", placement: \"center\", backdrop: true, ...step };\n  }\n  if (!step.type || step.type === \"tooltip\") {\n    return { type: \"tooltip\", arrow: true, backdrop: true, ...step };\n  }\n  return step;\n};\nvar findStep = (steps, id) => {\n  const res = id != null ? steps.find((step) => step.id === id) : null;\n  return res ? normalizeStep(res) : null;\n};\nvar findStepIndex = (steps, id) => {\n  return id != null ? steps.findIndex((step) => step.id === id) : -1;\n};\n\n// src/tour.connect.ts\nfunction connect(state, send, normalize) {\n  const open = state.hasTag(\"open\");\n  const steps = Array.from(state.context.steps);\n  const stepIndex = state.context.stepIndex;\n  const step = state.context.step;\n  const hasTarget = typeof step?.target?.() !== \"undefined\";\n  const hasNextStep = state.context.hasNextStep;\n  const hasPrevStep = state.context.hasPrevStep;\n  const firstStep = state.context.isFirstStep;\n  const lastStep = state.context.isLastStep;\n  const placement = state.context.currentPlacement;\n  const targetRect = state.context.targetRect;\n  const popperStyles = getPlacementStyles({\n    strategy: \"absolute\",\n    placement: isTooltipPlacement(placement) ? placement : void 0\n  });\n  const clipPath = getClipPath({\n    enabled: isTooltipStep(step),\n    rect: targetRect,\n    rootSize: state.context.boundarySize,\n    radius: state.context.spotlightRadius\n  });\n  const actionMap = {\n    next() {\n      send({ type: \"STEP.NEXT\", src: \"actionTrigger\" });\n    },\n    prev() {\n      send({ type: \"STEP.PREV\", src: \"actionTrigger\" });\n    },\n    dismiss() {\n      send({ type: \"DISMISS\", src: \"actionTrigger\" });\n    },\n    goto(id) {\n      send({ type: \"STEP.SET\", value: id, src: \"actionTrigger\" });\n    }\n  };\n  return {\n    open,\n    totalSteps: steps.length,\n    stepIndex,\n    step,\n    hasNextStep,\n    hasPrevStep,\n    firstStep,\n    lastStep,\n    addStep(step2) {\n      const next = steps.concat(step2);\n      send({ type: \"STEPS.SET\", value: next, src: \"addStep\" });\n    },\n    removeStep(id) {\n      const next = steps.filter((step2) => step2.id !== id);\n      send({ type: \"STEPS.SET\", value: next, src: \"removeStep\" });\n    },\n    updateStep(id, stepOverrides) {\n      const next = steps.map((step2) => step2.id === id ? mergeProps(step2, stepOverrides) : step2);\n      send({ type: \"STEPS.SET\", value: next, src: \"updateStep\" });\n    },\n    setSteps(steps2) {\n      send({ type: \"STEPS.SET\", value: steps2, src: \"setSteps\" });\n    },\n    setStep(id) {\n      send({ type: \"STEP.SET\", value: id });\n    },\n    start(id) {\n      send({ type: \"START\", id });\n    },\n    isValidStep(id) {\n      return steps.some((step2) => step2.id === id);\n    },\n    isCurrentStep(id) {\n      return Boolean(step?.id === id);\n    },\n    next() {\n      send({ type: \"STEP.NEXT\" });\n    },\n    prev() {\n      send({ type: \"STEP.PREV\" });\n    },\n    getProgressPercent() {\n      return stepIndex / steps.length * 100;\n    },\n    getProgressText() {\n      const effectiveSteps = steps.filter((step2) => step2.type !== \"wait\");\n      const index = findStepIndex(effectiveSteps, step?.id);\n      const details = { current: index, total: effectiveSteps.length };\n      return state.context.translations.progressText?.(details) ?? \"\";\n    },\n    getBackdropProps() {\n      return normalize.element({\n        ...parts.backdrop.attrs,\n        id: dom.getBackdropId(state.context),\n        dir: state.context.dir,\n        hidden: !open,\n        \"data-state\": open ? \"open\" : \"closed\",\n        \"data-type\": step?.type,\n        style: {\n          \"--tour-layer\": 0,\n          clipPath: isTooltipStep(step) ? `path(\"${clipPath}\")` : void 0,\n          position: \"absolute\",\n          inset: \"0\",\n          willChange: \"clip-path\"\n        }\n      });\n    },\n    getSpotlightProps() {\n      return normalize.element({\n        ...parts.spotlight.attrs,\n        hidden: !open || !step?.target?.(),\n        style: {\n          \"--tour-layer\": 1,\n          position: \"absolute\",\n          width: `${targetRect.width}px`,\n          height: `${targetRect.height}px`,\n          left: `${targetRect.x}px`,\n          top: `${targetRect.y}px`,\n          borderRadius: `${state.context.spotlightRadius}px`,\n          pointerEvents: \"none\"\n        }\n      });\n    },\n    getProgressTextProps() {\n      return normalize.element({\n        ...parts.progressText.attrs\n      });\n    },\n    getPositionerProps() {\n      return normalize.element({\n        ...parts.positioner.attrs,\n        dir: state.context.dir,\n        id: dom.getPositionerId(state.context),\n        \"data-type\": step?.type,\n        \"data-placement\": state.context.currentPlacement,\n        style: {\n          \"--tour-layer\": 2,\n          ...step?.type === \"tooltip\" && popperStyles.floating\n        }\n      });\n    },\n    getArrowProps() {\n      return normalize.element({\n        id: dom.getArrowId(state.context),\n        ...parts.arrow.attrs,\n        dir: state.context.dir,\n        hidden: step?.type !== \"tooltip\",\n        style: step?.type === \"tooltip\" ? popperStyles.arrow : void 0,\n        opacity: hasTarget ? void 0 : 0\n      });\n    },\n    getArrowTipProps() {\n      return normalize.element({\n        ...parts.arrowTip.attrs,\n        dir: state.context.dir,\n        style: popperStyles.arrowTip\n      });\n    },\n    getContentProps() {\n      return normalize.element({\n        ...parts.content.attrs,\n        id: dom.getContentId(state.context),\n        dir: state.context.dir,\n        role: \"alertdialog\",\n        \"aria-modal\": \"true\",\n        \"aria-live\": \"polite\",\n        \"aria-atomic\": \"true\",\n        hidden: !open,\n        \"data-state\": open ? \"open\" : \"closed\",\n        \"data-type\": step?.type,\n        \"data-placement\": state.context.currentPlacement,\n        \"data-step\": step?.id,\n        \"aria-labelledby\": dom.getTitleId(state.context),\n        \"aria-describedby\": dom.getDescriptionId(state.context),\n        tabIndex: -1,\n        onKeyDown(event) {\n          if (event.defaultPrevented) return;\n          if (!state.context.keyboardNavigation) return;\n          const isRtl = state.context.dir === \"rtl\";\n          switch (event.key) {\n            case \"ArrowRight\":\n              if (!hasNextStep) return;\n              send({ type: isRtl ? \"STEP.PREV\" : \"STEP.NEXT\", src: \"keydown\" });\n              break;\n            case \"ArrowLeft\":\n              if (!hasPrevStep) return;\n              send({ type: isRtl ? \"STEP.NEXT\" : \"STEP.PREV\", src: \"keydown\" });\n              break;\n          }\n        }\n      });\n    },\n    getTitleProps() {\n      return normalize.element({\n        ...parts.title.attrs,\n        id: dom.getTitleId(state.context),\n        \"data-placement\": hasTarget ? state.context.currentPlacement : \"center\"\n      });\n    },\n    getDescriptionProps() {\n      return normalize.element({\n        ...parts.description.attrs,\n        id: dom.getDescriptionId(state.context),\n        \"data-placement\": hasTarget ? state.context.currentPlacement : \"center\"\n      });\n    },\n    getCloseTriggerProps() {\n      return normalize.element({\n        ...parts.closeTrigger.attrs,\n        \"data-type\": step?.type,\n        \"aria-label\": state.context.translations.close,\n        onClick: actionMap.dismiss\n      });\n    },\n    getActionTriggerProps(props2) {\n      const { action, attrs } = props2.action;\n      let actionProps = {};\n      switch (action) {\n        case \"next\":\n          actionProps = {\n            \"data-type\": \"next\",\n            disabled: !hasNextStep,\n            \"data-disabled\": dataAttr(!hasNextStep),\n            \"aria-label\": state.context.translations.nextStep,\n            onClick: actionMap.next\n          };\n          break;\n        case \"prev\":\n          actionProps = {\n            \"data-type\": \"prev\",\n            disabled: !hasPrevStep,\n            \"data-disabled\": dataAttr(!hasPrevStep),\n            \"aria-label\": state.context.translations.prevStep,\n            onClick: actionMap.prev\n          };\n          break;\n        case \"dismiss\":\n          actionProps = {\n            \"data-type\": \"close\",\n            \"aria-label\": state.context.translations.close,\n            onClick: actionMap.dismiss\n          };\n          break;\n        default:\n          actionProps = {\n            \"data-type\": \"custom\",\n            onClick() {\n              if (typeof action === \"function\") {\n                action(actionMap);\n              }\n            }\n          };\n          break;\n      }\n      return normalize.button({\n        ...parts.actionTrigger.attrs,\n        type: \"button\",\n        ...attrs,\n        ...actionProps\n      });\n    }\n  };\n}\nfunction getFrameElement(win) {\n  return win.parent && Object.getPrototypeOf(win.parent) ? win.frameElement : null;\n}\nvar normalizeEventPoint = (event) => {\n  let clientX = event.clientX;\n  let clientY = event.clientY;\n  let win = event.view || window;\n  let frame = getFrameElement(win);\n  while (frame) {\n    const iframeRect = frame.getBoundingClientRect();\n    const css = getComputedStyle(frame);\n    const left = iframeRect.left + (frame.clientLeft + parseFloat(css.paddingLeft));\n    const top = iframeRect.top + (frame.clientTop + parseFloat(css.paddingTop));\n    clientX += left;\n    clientY += top;\n    win = getWindow(frame);\n    frame = getFrameElement(win);\n  }\n  return { clientX, clientY };\n};\nfunction isEventInRect(rect, event) {\n  const { clientX, clientY } = normalizeEventPoint(event);\n  return rect.y <= clientY && clientY <= rect.y + rect.height && rect.x <= clientX && clientX <= rect.x + rect.width;\n}\nfunction offset(r, i) {\n  const dx = i.x || 0;\n  const dy = i.y || 0;\n  return {\n    x: r.x - dx,\n    y: r.y - dy,\n    width: r.width + dx + dx,\n    height: r.height + dy + dy\n  };\n}\n\n// src/tour.machine.ts\nvar { and } = guards;\nfunction machine(userContext) {\n  const ctx = compact(userContext);\n  return createMachine(\n    {\n      id: \"tour\",\n      initial: \"tour.inactive\",\n      context: {\n        stepId: null,\n        steps: [],\n        preventInteraction: false,\n        closeOnInteractOutside: true,\n        closeOnEscape: true,\n        keyboardNavigation: true,\n        spotlightOffset: { x: 10, y: 10 },\n        spotlightRadius: 4,\n        translations: {\n          nextStep: \"next step\",\n          prevStep: \"previous step\",\n          close: \"close tour\",\n          progressText: ({ current, total }) => `${current + 1} of ${total}`,\n          skip: \"skip tour\",\n          ...ctx.translations\n        },\n        ...ctx,\n        resolvedTarget: ref({ value: null }),\n        targetRect: ref({ width: 0, height: 0, x: 0, y: 0 }),\n        boundarySize: ref({ width: 0, height: 0 })\n      },\n      computed: {\n        stepIndex: (ctx2) => findStepIndex(ctx2.steps, ctx2.stepId),\n        step: (ctx2) => findStep(ctx2.steps, ctx2.stepId),\n        hasNextStep: (ctx2) => ctx2.stepIndex < ctx2.steps.length - 1,\n        hasPrevStep: (ctx2) => ctx2.stepIndex > 0,\n        isFirstStep: (ctx2) => ctx2.stepIndex === 0,\n        isLastStep: (ctx2) => ctx2.stepIndex === ctx2.steps.length - 1\n      },\n      created: [\"validateSteps\"],\n      watch: {\n        stepId: [\"setResolvedTarget\", \"raiseStepChange\", \"syncTargetAttrs\"]\n      },\n      activities: [\"trackBoundarySize\"],\n      exit: [\"clearStep\", \"cleanupFns\"],\n      on: {\n        \"STEPS.SET\": {\n          actions: [\"setSteps\"]\n        },\n        \"STEP.SET\": {\n          actions: [\"setStep\"]\n        },\n        \"STEP.NEXT\": {\n          actions: [\"setNextStep\"]\n        },\n        \"STEP.PREV\": {\n          actions: [\"setPrevStep\"]\n        },\n        \"STEP.CHANGED\": [\n          {\n            guard: and(\"isValidStep\", \"hasResolvedTarget\"),\n            target: \"target.scrolling\"\n          },\n          {\n            guard: and(\"isValidStep\", \"hasTarget\"),\n            target: \"target.resolving\"\n          },\n          {\n            guard: and(\"isValidStep\", \"isWaitingStep\"),\n            target: \"step.waiting\"\n          },\n          {\n            guard: \"isValidStep\",\n            target: \"tour.active\"\n          }\n        ],\n        DISMISS: [\n          {\n            guard: \"isLastStep\",\n            target: \"tour.inactive\",\n            actions: [\"invokeOnDismiss\", \"invokeOnComplete\", \"clearStep\"]\n          },\n          {\n            target: \"tour.inactive\",\n            actions: [\"invokeOnDismiss\", \"clearStep\"]\n          }\n        ]\n      },\n      states: {\n        \"tour.inactive\": {\n          tags: [\"closed\"],\n          on: {\n            START: {\n              actions: [\"setInitialStep\", \"invokeOnStart\"]\n            }\n          }\n        },\n        \"target.resolving\": {\n          tags: [\"closed\"],\n          activities: [\"waitForTarget\"],\n          after: {\n            MISSING_TARGET_TIMEOUT: {\n              target: \"tour.inactive\",\n              actions: [\"invokeOnNotFound\", \"clearStep\"]\n            }\n          },\n          on: {\n            \"TARGET.RESOLVED\": {\n              target: \"target.scrolling\",\n              actions: [\"setResolvedTarget\"]\n            }\n          }\n        },\n        \"target.scrolling\": {\n          tags: [\"open\"],\n          entry: [\"scrollToTarget\"],\n          activities: [\n            \"trapFocus\",\n            \"trackPlacement\",\n            \"trackDismissableBranch\",\n            \"trackInteractOutside\",\n            \"trackEscapeKeydown\"\n          ],\n          after: {\n            100: \"tour.active\"\n          }\n        },\n        \"step.waiting\": {\n          tags: [\"closed\"]\n        },\n        \"tour.active\": {\n          tags: [\"open\"],\n          activities: [\n            \"trapFocus\",\n            \"trackPlacement\",\n            \"trackDismissableBranch\",\n            \"trackInteractOutside\",\n            \"trackEscapeKeydown\"\n          ]\n        }\n      }\n    },\n    {\n      delays: {\n        MISSING_TARGET_TIMEOUT: 3e3\n      },\n      guards: {\n        isLastStep: (ctx2) => ctx2.isLastStep,\n        isValidStep: (ctx2) => ctx2.stepId != null,\n        hasTarget: (ctx2) => ctx2.step?.target != null,\n        hasResolvedTarget: (ctx2) => ctx2.resolvedTarget.value != null,\n        isWaitingStep: (ctx2) => ctx2.step?.type === \"wait\"\n      },\n      actions: {\n        scrollToTarget(ctx2, _evt) {\n          const node = ctx2.resolvedTarget.value;\n          node?.scrollIntoView({ behavior: \"instant\", block: \"center\", inline: \"center\" });\n        },\n        setStep(ctx2, evt) {\n          set.step(ctx2, evt.value);\n        },\n        clearStep(ctx2) {\n          ctx2.targetRect = ref({ width: 0, height: 0, x: 0, y: 0 });\n          set.step(ctx2, -1);\n        },\n        setInitialStep(ctx2, evt) {\n          if (ctx2.steps.length === 0) return;\n          if (isString(evt.id)) {\n            const idx = findStepIndex(ctx2.steps, evt.id);\n            set.step(ctx2, idx);\n            return;\n          }\n          set.step(ctx2, 0);\n        },\n        setNextStep(ctx2) {\n          const idx = nextIndex(ctx2.steps, ctx2.stepIndex);\n          set.step(ctx2, idx);\n        },\n        setPrevStep(ctx2) {\n          const idx = prevIndex(ctx2.steps, ctx2.stepIndex);\n          set.step(ctx2, idx);\n        },\n        invokeOnStart(ctx2) {\n          invoke.statusChange(ctx2, \"started\");\n        },\n        invokeOnDismiss(ctx2) {\n          invoke.statusChange(ctx2, \"dismissed\");\n        },\n        invokeOnComplete(ctx2) {\n          invoke.statusChange(ctx2, \"completed\");\n        },\n        invokeOnSkip(ctx2) {\n          invoke.statusChange(ctx2, \"skipped\");\n        },\n        invokeOnNotFound(ctx2) {\n          invoke.statusChange(ctx2, \"not-found\");\n        },\n        raiseStepChange(_ctx, _evt, { send }) {\n          send({ type: \"STEP.CHANGED\" });\n        },\n        setResolvedTarget(ctx2, evt) {\n          const node = evt.node ?? ctx2.step?.target?.();\n          ctx2.resolvedTarget.value = node ?? null;\n        },\n        syncTargetAttrs(ctx2) {\n          ctx2._targetCleanup?.();\n          ctx2._targetCleanup = void 0;\n          const targetEl = ctx2.resolvedTarget.value;\n          if (!targetEl) return;\n          if (ctx2.preventInteraction) targetEl.inert = true;\n          targetEl.setAttribute(\"data-tour-highlighted\", \"\");\n          ctx2._targetCleanup = () => {\n            if (ctx2.preventInteraction) targetEl.inert = false;\n            targetEl.removeAttribute(\"data-tour-highlighted\");\n          };\n        },\n        cleanupFns(ctx2) {\n          ctx2._targetCleanup?.();\n          ctx2._targetCleanup = void 0;\n          ctx2._effectCleanup?.();\n          ctx2._effectCleanup = void 0;\n        },\n        validateSteps(ctx2) {\n          const ids = /* @__PURE__ */ new Set();\n          ctx2.steps.forEach((step) => {\n            if (ids.has(step.id)) {\n              throw new Error(`[zag-js/tour] Duplicate step id: ${step.id}`);\n            }\n            if (step.target == null && step.type == null) {\n              throw new Error(`[zag-js/tour] Step ${step.id} has no target or type. At least one of those is required.`);\n            }\n            ids.add(step.id);\n          });\n        }\n      },\n      activities: {\n        waitForTarget(ctx2, _evt, { send }) {\n          const targetEl = ctx2.step?.target;\n          const win = dom.getWin(ctx2);\n          const rootNode = dom.getRootNode(ctx2);\n          const observer = new win.MutationObserver(() => {\n            const node = targetEl?.();\n            if (node) {\n              send({ type: \"TARGET.RESOLVED\", node });\n              observer.disconnect();\n            }\n          });\n          observer.observe(rootNode, {\n            childList: true,\n            subtree: true,\n            characterData: true\n          });\n          return () => {\n            observer.disconnect();\n          };\n        },\n        trackBoundarySize(ctx2) {\n          const win = dom.getWin(ctx2);\n          const doc = dom.getDoc(ctx2);\n          const onResize = () => {\n            const width = visualViewport?.width ?? win.innerWidth;\n            const height = doc.documentElement.scrollHeight;\n            ctx2.boundarySize = { width, height };\n          };\n          onResize();\n          const viewport = win.visualViewport ?? win;\n          viewport.addEventListener(\"resize\", onResize);\n          return () => viewport.removeEventListener(\"resize\", onResize);\n        },\n        trackEscapeKeydown(ctx2, _evt, { send }) {\n          if (!ctx2.closeOnEscape) return;\n          const doc = dom.getDoc(ctx2);\n          const onKeyDown = (event) => {\n            if (event.key === \"Escape\") {\n              event.preventDefault();\n              event.stopPropagation();\n              send({ type: \"DISMISS\", src: \"esc\" });\n            }\n          };\n          doc.addEventListener(\"keydown\", onKeyDown, true);\n          return () => {\n            doc.removeEventListener(\"keydown\", onKeyDown, true);\n          };\n        },\n        trackInteractOutside(ctx2, _evt, { send }) {\n          if (ctx2.step == null) return;\n          const contentEl = () => dom.getContentEl(ctx2);\n          return trackInteractOutside(contentEl, {\n            defer: true,\n            exclude(target) {\n              return contains(ctx2.step?.target?.(), target);\n            },\n            onFocusOutside(event) {\n              ctx2.onFocusOutside?.(event);\n              if (!ctx2.closeOnInteractOutside) {\n                event.preventDefault();\n              }\n            },\n            onPointerDownOutside(event) {\n              ctx2.onPointerDownOutside?.(event);\n              const isWithin = isEventInRect(ctx2.targetRect, event.detail.originalEvent);\n              if (isWithin) {\n                event.preventDefault();\n                return;\n              }\n              if (!ctx2.closeOnInteractOutside) {\n                event.preventDefault();\n              }\n            },\n            onInteractOutside(event) {\n              ctx2.onInteractOutside?.(event);\n              if (event.defaultPrevented) return;\n              send({ type: \"DISMISS\", src: \"interact-outside\" });\n            }\n          });\n        },\n        trackDismissableBranch(ctx2) {\n          if (ctx2.step == null) return;\n          const contentEl = () => dom.getContentEl(ctx2);\n          return trackDismissableBranch(contentEl, { defer: !contentEl() });\n        },\n        trapFocus(ctx2) {\n          const contentEl = () => dom.getContentEl(ctx2);\n          return trapFocus(contentEl, {\n            escapeDeactivates: false,\n            allowOutsideClick: true,\n            preventScroll: true,\n            returnFocusOnDeactivate: false\n          });\n        },\n        trackPlacement(ctx2) {\n          if (ctx2.step == null) return;\n          ctx2.currentPlacement = ctx2.step.placement ?? \"bottom\";\n          if (isDialogStep(ctx2.step)) return syncZIndex(ctx2);\n          if (!isTooltipStep(ctx2.step)) return;\n          const positionerEl = () => dom.getPositionerEl(ctx2);\n          return getPlacement(ctx2.resolvedTarget.value, positionerEl, {\n            defer: true,\n            placement: ctx2.step.placement ?? \"bottom\",\n            strategy: \"absolute\",\n            gutter: 10,\n            offset: ctx2.step.offset,\n            getAnchorRect(el) {\n              if (!isHTMLElement(el)) return null;\n              const rect = el.getBoundingClientRect();\n              return offset(rect, ctx2.spotlightOffset);\n            },\n            onComplete(data) {\n              const { rects } = data.middlewareData;\n              ctx2.currentPlacement = data.placement;\n              ctx2.targetRect = rects.reference;\n            }\n          });\n        }\n      }\n    }\n  );\n}\nfunction syncZIndex(ctx) {\n  return raf(() => {\n    const contentEl = dom.getContentEl(ctx);\n    if (!contentEl) return;\n    const styles = getComputedStyle$1(contentEl);\n    const positionerEl = dom.getPositionerEl(ctx);\n    const backdropEl = dom.getBackdropEl(ctx);\n    if (positionerEl) {\n      positionerEl.style.setProperty(\"--z-index\", styles.zIndex);\n      positionerEl.style.setProperty(\"z-index\", \"var(--z-index)\");\n    }\n    if (backdropEl) {\n      backdropEl.style.setProperty(\"--z-index\", styles.zIndex);\n    }\n  });\n}\nvar invoke = {\n  stepChange(ctx) {\n    const effectiveLength = ctx.steps.filter((step) => step.type !== \"wait\").length;\n    const progress = (ctx.stepIndex + 1) / effectiveLength;\n    ctx.onStepChange?.({\n      complete: ctx.isLastStep,\n      stepId: ctx.stepId,\n      totalSteps: ctx.steps.length,\n      stepIndex: ctx.stepIndex,\n      progress\n    });\n    ctx._effectCleanup?.();\n    ctx._effectCleanup = void 0;\n  },\n  statusChange(ctx, status) {\n    ctx.onStatusChange?.({\n      status,\n      stepId: ctx.stepId,\n      stepIndex: ctx.stepIndex\n    });\n  }\n};\nvar set = {\n  step(ctx, idx) {\n    const step = ctx.steps[idx];\n    if (!step) {\n      ctx.stepId = null;\n      invoke.stepChange(ctx);\n      return;\n    }\n    if (isEqual(ctx.stepId, step.id)) return;\n    const update = (data) => {\n      ctx.steps[idx] = { ...step, ...data };\n    };\n    const next = () => {\n      const idx2 = nextIndex(ctx.steps, ctx.stepIndex);\n      ctx.stepId = ctx.steps[idx2].id;\n      invoke.stepChange(ctx);\n    };\n    const goto = (id) => {\n      const idx2 = ctx.steps.findIndex((s) => s.id === id);\n      ctx.stepId = ctx.steps[idx2].id;\n      invoke.stepChange(ctx);\n    };\n    const dismiss = () => {\n      ctx.stepId = null;\n      invoke.stepChange(ctx);\n      invoke.statusChange(ctx, \"dismissed\");\n    };\n    const show = () => {\n      ctx.stepId = step.id;\n      invoke.stepChange(ctx);\n    };\n    if (!step.effect) {\n      show();\n      return;\n    }\n    ctx._effectCleanup = step.effect({\n      show,\n      next,\n      update,\n      target: step.target,\n      dismiss,\n      goto\n    });\n  }\n};\nvar props = createProps()([\n  \"closeOnEscape\",\n  \"closeOnInteractOutside\",\n  \"dir\",\n  \"getRootNode\",\n  \"id\",\n  \"ids\",\n  \"keyboardNavigation\",\n  \"onFocusOutside\",\n  \"onInteractOutside\",\n  \"onPointerDownOutside\",\n  \"onStatusChange\",\n  \"onStepChange\",\n  \"preventInteraction\",\n  \"spotlightOffset\",\n  \"spotlightRadius\",\n  \"stepId\",\n  \"steps\",\n  \"translations\"\n]);\nvar splitProps = createSplitProps(props);\nfunction waitForPromise(promise, controller, timeout) {\n  const { signal } = controller;\n  const wrappedPromise = new Promise((resolve, reject) => {\n    const timeoutId = setTimeout(() => {\n      reject(new Error(`Timeout of ${timeout}ms exceeded`));\n    }, timeout);\n    signal.addEventListener(\"abort\", () => {\n      clearTimeout(timeoutId);\n      reject(new Error(\"Promise aborted\"));\n    });\n    promise.then((result) => {\n      if (!signal.aborted) {\n        clearTimeout(timeoutId);\n        resolve(result);\n      }\n    }).catch((error) => {\n      if (!signal.aborted) {\n        clearTimeout(timeoutId);\n        reject(error);\n      }\n    });\n  });\n  const abort = () => controller.abort();\n  return [wrappedPromise, abort];\n}\nfunction waitForElement(target, options) {\n  const { timeout, rootNode } = options;\n  const win = getWindow(rootNode);\n  const doc = getDocument(rootNode);\n  const controller = new win.AbortController();\n  return waitForPromise(\n    new Promise((resolve) => {\n      const el = target();\n      if (el) {\n        resolve(el);\n        return;\n      }\n      const observer = new win.MutationObserver(() => {\n        const el2 = target();\n        if (el2) {\n          observer.disconnect();\n          resolve(el2);\n        }\n      });\n      observer.observe(doc.body, {\n        childList: true,\n        subtree: true\n      });\n    }),\n    controller,\n    timeout\n  );\n}\nfunction waitForElementValue(target, value, options) {\n  const { timeout, rootNode } = options;\n  const win = getWindow(rootNode);\n  const controller = new win.AbortController();\n  return waitForPromise(\n    new Promise((resolve) => {\n      const el = target();\n      if (!el) return;\n      const checkValue = () => {\n        if (el.value === value) {\n          resolve();\n          el.removeEventListener(\"input\", checkValue);\n        }\n      };\n      checkValue();\n      el.addEventListener(\"input\", checkValue, { signal: controller.signal });\n    }),\n    controller,\n    timeout\n  );\n}\n\nexport { anatomy, connect, machine, props, splitProps, waitForElement, waitForElementValue };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}