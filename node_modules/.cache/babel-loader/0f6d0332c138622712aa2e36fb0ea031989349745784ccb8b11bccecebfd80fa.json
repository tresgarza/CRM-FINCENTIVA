{"ast":null,"code":"var _jsxFileName = \"/Users/diegogg98/NEW CRM MAR18/src/components/auth/ProtectedRoute.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  children\n}) => {\n  _s();\n  const {\n    user,\n    loading\n  } = useAuth();\n  const location = useLocation();\n  if (loading) {\n    // Mostrar indicador de carga mejorado\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex flex-col items-center justify-center bg-base-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"loading loading-spinner loading-lg text-primary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mt-3 text-base-content\",\n        children: \"Verificando sesi\\xF3n...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 18,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 7\n    }, this);\n  }\n  if (!user) {\n    // Guardar la ruta actual para redirigir después del login\n    // y mostrar mensaje de sesión expirada si viene de una navegación interna\n    const isFromInternalNavigation = location.key !== 'default';\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location,\n        sessionExpired: isFromInternalNavigation\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Si está autenticado, renderizar los componentes hijos\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: children\n  }, void 0, false);\n};\n_s(ProtectedRoute, \"zPafkKLdz6KrRvMe2id3iDpNU34=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","Navigate","useLocation","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","ProtectedRoute","children","_s","user","loading","location","className","fileName","_jsxFileName","lineNumber","columnNumber","isFromInternalNavigation","key","to","state","from","sessionExpired","replace","_c","$RefreshReg$"],"sources":["/Users/diegogg98/NEW CRM MAR18/src/components/auth/ProtectedRoute.tsx"],"sourcesContent":["import React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n}\n\nconst ProtectedRoute: React.FC<ProtectedRouteProps> = ({ children }) => {\n  const { user, loading } = useAuth();\n  const location = useLocation();\n  \n  if (loading) {\n    // Mostrar indicador de carga mejorado\n    return (\n      <div className=\"min-h-screen flex flex-col items-center justify-center bg-base-200\">\n        <span className=\"loading loading-spinner loading-lg text-primary\"></span>\n        <p className=\"mt-3 text-base-content\">Verificando sesión...</p>\n      </div>\n    );\n  }\n  \n  if (!user) {\n    // Guardar la ruta actual para redirigir después del login\n    // y mostrar mensaje de sesión expirada si viene de una navegación interna\n    const isFromInternalNavigation = location.key !== 'default';\n    \n    return (\n      <Navigate \n        to=\"/login\" \n        state={{ \n          from: location,\n          sessionExpired: isFromInternalNavigation \n        }} \n        replace \n      />\n    );\n  }\n  \n  // Si está autenticado, renderizar los componentes hijos\n  return <>{children}</>;\n};\n\nexport default ProtectedRoute; "],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,EAAEC,WAAW,QAAQ,kBAAkB;AACxD,SAASC,OAAO,QAAQ,4BAA4B;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAMrD,MAAMC,cAA6C,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAC,EAAA;EACtE,MAAM;IAAEC,IAAI;IAAEC;EAAQ,CAAC,GAAGT,OAAO,CAAC,CAAC;EACnC,MAAMU,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAE9B,IAAIU,OAAO,EAAE;IACX;IACA,oBACEP,OAAA;MAAKS,SAAS,EAAC,oEAAoE;MAAAL,QAAA,gBACjFJ,OAAA;QAAMS,SAAS,EAAC;MAAiD;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eACzEb,OAAA;QAAGS,SAAS,EAAC,wBAAwB;QAAAL,QAAA,EAAC;MAAqB;QAAAM,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5D,CAAC;EAEV;EAEA,IAAI,CAACP,IAAI,EAAE;IACT;IACA;IACA,MAAMQ,wBAAwB,GAAGN,QAAQ,CAACO,GAAG,KAAK,SAAS;IAE3D,oBACEf,OAAA,CAACJ,QAAQ;MACPoB,EAAE,EAAC,QAAQ;MACXC,KAAK,EAAE;QACLC,IAAI,EAAEV,QAAQ;QACdW,cAAc,EAAEL;MAClB,CAAE;MACFM,OAAO;IAAA;MAAAV,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC;EAEN;;EAEA;EACA,oBAAOb,OAAA,CAAAE,SAAA;IAAAE,QAAA,EAAGA;EAAQ,gBAAG,CAAC;AACxB,CAAC;AAACC,EAAA,CAjCIF,cAA6C;EAAA,QACvBL,OAAO,EAChBD,WAAW;AAAA;AAAAwB,EAAA,GAFxBlB,cAA6C;AAmCnD,eAAeA,cAAc;AAAC,IAAAkB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}