{"ast":null,"code":"import React from'react';import{Pie}from'react-chartjs-2';import{Chart as ChartJS,ArcElement,Tooltip,Legend,Title}from'chart.js';import{jsx as _jsx}from\"react/jsx-runtime\";// Registrar componentes necesarios de Chart.js\nChartJS.register(ArcElement,Tooltip,Legend,Title);// Definir colores específicos para cada estado\nconst STATUS_COLORS_MAP={'pending':'#FBBD23',// amarillo para pendiente\n'in_review':'#D926AA',// magenta para revisión\n'approved':'#36D399',// verde para aprobado\n'rejected':'#F87272',// rojo para rechazado\n'completed':'#570DF8',// azul para completado\n'cancelled':'#6E6E6E',// gris para cancelado\n'por_dispersar':'#62A0EA',// celeste para dispersar\n'expired':'#FF5757',// rojo brillante para expirado\n'new':'#3ABFF8',// azul claro para nuevo\n'default':'#cccccc'// gris claro para desconocidos\n};// Definir etiquetas en español\nconst STATUS_LABELS_MAP={'pending':'Pendiente','in_review':'En Revisión','approved':'Aprobado','rejected':'Rechazado','completed':'Completado','cancelled':'Cancelado','por_dispersar':'Por Dispersar','expired':'Expirado','new':'Nuevo','solicitud':'Pendiente','default':'Desconocido'};const StatusDistributionChart=_ref=>{let{data,title='Distribución por Estado',height=240,showLegend=true,className=''}=_ref;// Si no hay datos, mostrar mensaje\nif(!data||data.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full bg-base-200 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Sin datos disponibles\"})});}// Normalizar estados y agrupar por categoría\nconst normalizeStatus=status=>{const lowerStatus=status.toLowerCase();if(lowerStatus.includes('pend')||lowerStatus==='new'||lowerStatus==='solicitud'){return'pending';}else if(lowerStatus.includes('review')||lowerStatus.includes('revis')){return'in_review';}else if(lowerStatus.includes('aprob')||lowerStatus.includes('aprov')){return'approved';}else if(lowerStatus.includes('recha')||lowerStatus.includes('reject')){return'rejected';}else if(lowerStatus.includes('comple')){return'completed';}else if(lowerStatus.includes('cancel')){return'cancelled';}else if(lowerStatus.includes('disper')){return'por_dispersar';}else if(lowerStatus.includes('expir')){return'expired';}else{return'default';}};// Agrupar datos por estado normalizado\nconst groupedData={};data.forEach(item=>{const normalizedStatus=normalizeStatus(item.status);if(!groupedData[normalizedStatus]){groupedData[normalizedStatus]=0;}groupedData[normalizedStatus]+=item.count;});// Preparar datos para el gráfico\nconst statuses=Object.keys(groupedData);const counts=Object.values(groupedData);const colors=statuses.map(status=>STATUS_COLORS_MAP[status]||STATUS_COLORS_MAP.default);const labels=statuses.map(status=>STATUS_LABELS_MAP[status]||status);// Datos del gráfico\nconst chartData={labels,datasets:[{data:counts,backgroundColor:colors,borderColor:colors,borderWidth:1}]};// Opciones del gráfico\nconst options={responsive:true,maintainAspectRatio:false,plugins:{legend:{display:showLegend,position:'right',labels:{boxWidth:15,padding:15,font:{size:12}}},title:{display:!!title,text:title,font:{size:16}},tooltip:{callbacks:{label:context=>{const label=context.label||'';const value=context.raw||0;const total=counts.reduce((a,b)=>a+b,0);const percentage=Math.round(value/total*100);return`${label}: ${value} (${percentage}%)`;}}}}};return/*#__PURE__*/_jsx(\"div\",{className:`chart-container ${className}`,style:{height:`${height}px`},children:/*#__PURE__*/_jsx(Pie,{data:chartData,options:options})});};export default StatusDistributionChart;","map":{"version":3,"names":["React","Pie","Chart","ChartJS","ArcElement","Tooltip","Legend","Title","jsx","_jsx","register","STATUS_COLORS_MAP","STATUS_LABELS_MAP","StatusDistributionChart","_ref","data","title","height","showLegend","className","length","children","normalizeStatus","status","lowerStatus","toLowerCase","includes","groupedData","forEach","item","normalizedStatus","count","statuses","Object","keys","counts","values","colors","map","default","labels","chartData","datasets","backgroundColor","borderColor","borderWidth","options","responsive","maintainAspectRatio","plugins","legend","display","position","boxWidth","padding","font","size","text","tooltip","callbacks","label","context","value","raw","total","reduce","a","b","percentage","Math","round","style"],"sources":["/Users/diegogg98/NEW CRM MAR18/src/components/ui/charts/StatusDistributionChart.tsx"],"sourcesContent":["import React from 'react';\nimport { Pie } from 'react-chartjs-2';\nimport { Chart as ChartJS, ArcElement, Tooltip, Legend, Title } from 'chart.js';\nimport { APPLICATION_STATUS } from '../../../utils/constants/statuses';\n\n// Registrar componentes necesarios de Chart.js\nChartJS.register(ArcElement, Tooltip, Legend, Title);\n\ninterface StatusDistributionChartProps {\n  data: {\n    status: string;\n    count: number;\n  }[];\n  title?: string;\n  height?: number;\n  showLegend?: boolean;\n  className?: string;\n}\n\n// Definir colores específicos para cada estado\nconst STATUS_COLORS_MAP = {\n  'pending': '#FBBD23',     // amarillo para pendiente\n  'in_review': '#D926AA',   // magenta para revisión\n  'approved': '#36D399',    // verde para aprobado\n  'rejected': '#F87272',    // rojo para rechazado\n  'completed': '#570DF8',   // azul para completado\n  'cancelled': '#6E6E6E',   // gris para cancelado\n  'por_dispersar': '#62A0EA', // celeste para dispersar\n  'expired': '#FF5757',     // rojo brillante para expirado\n  'new': '#3ABFF8',         // azul claro para nuevo\n  'default': '#cccccc'      // gris claro para desconocidos\n};\n\n// Definir etiquetas en español\nconst STATUS_LABELS_MAP = {\n  'pending': 'Pendiente',\n  'in_review': 'En Revisión',\n  'approved': 'Aprobado',\n  'rejected': 'Rechazado',\n  'completed': 'Completado',\n  'cancelled': 'Cancelado',\n  'por_dispersar': 'Por Dispersar',\n  'expired': 'Expirado',\n  'new': 'Nuevo',\n  'solicitud': 'Pendiente',\n  'default': 'Desconocido'\n};\n\nconst StatusDistributionChart: React.FC<StatusDistributionChartProps> = ({\n  data,\n  title = 'Distribución por Estado',\n  height = 240,\n  showLegend = true,\n  className = '',\n}) => {\n  // Si no hay datos, mostrar mensaje\n  if (!data || data.length === 0) {\n    return (\n      <div className=\"flex items-center justify-center h-full bg-base-200 rounded-lg\">\n        <p className=\"text-sm text-gray-500\">Sin datos disponibles</p>\n      </div>\n    );\n  }\n\n  // Normalizar estados y agrupar por categoría\n  const normalizeStatus = (status: string): string => {\n    const lowerStatus = status.toLowerCase();\n    \n    if (lowerStatus.includes('pend') || lowerStatus === 'new' || lowerStatus === 'solicitud') {\n      return 'pending';\n    } else if (lowerStatus.includes('review') || lowerStatus.includes('revis')) {\n      return 'in_review';\n    } else if (lowerStatus.includes('aprob') || lowerStatus.includes('aprov')) {\n      return 'approved';\n    } else if (lowerStatus.includes('recha') || lowerStatus.includes('reject')) {\n      return 'rejected';\n    } else if (lowerStatus.includes('comple')) {\n      return 'completed';\n    } else if (lowerStatus.includes('cancel')) {\n      return 'cancelled';\n    } else if (lowerStatus.includes('disper')) {\n      return 'por_dispersar';\n    } else if (lowerStatus.includes('expir')) {\n      return 'expired';\n    } else {\n      return 'default';\n    }\n  };\n\n  // Agrupar datos por estado normalizado\n  const groupedData: Record<string, number> = {};\n  data.forEach(item => {\n    const normalizedStatus = normalizeStatus(item.status);\n    if (!groupedData[normalizedStatus]) {\n      groupedData[normalizedStatus] = 0;\n    }\n    groupedData[normalizedStatus] += item.count;\n  });\n\n  // Preparar datos para el gráfico\n  const statuses = Object.keys(groupedData);\n  const counts = Object.values(groupedData);\n  const colors = statuses.map(status => STATUS_COLORS_MAP[status as keyof typeof STATUS_COLORS_MAP] || STATUS_COLORS_MAP.default);\n  const labels = statuses.map(status => STATUS_LABELS_MAP[status as keyof typeof STATUS_LABELS_MAP] || status);\n\n  // Datos del gráfico\n  const chartData = {\n    labels,\n    datasets: [\n      {\n        data: counts,\n        backgroundColor: colors,\n        borderColor: colors,\n        borderWidth: 1,\n      },\n    ],\n  };\n\n  // Opciones del gráfico\n  const options = {\n    responsive: true,\n    maintainAspectRatio: false,\n    plugins: {\n      legend: {\n        display: showLegend,\n        position: 'right' as const,\n        labels: {\n          boxWidth: 15,\n          padding: 15,\n          font: {\n            size: 12,\n          },\n        },\n      },\n      title: {\n        display: !!title,\n        text: title,\n        font: {\n          size: 16,\n        },\n      },\n      tooltip: {\n        callbacks: {\n          label: (context: any) => {\n            const label = context.label || '';\n            const value = context.raw || 0;\n            const total = counts.reduce((a, b) => a + b, 0);\n            const percentage = Math.round((value / total) * 100);\n            return `${label}: ${value} (${percentage}%)`;\n          },\n        },\n      },\n    },\n  };\n\n  return (\n    <div className={`chart-container ${className}`} style={{ height: `${height}px` }}>\n      <Pie data={chartData} options={options} />\n    </div>\n  );\n};\n\nexport default StatusDistributionChart; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}