{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import DocumentUploader from'../documents/DocumentUploader';// Interfaz para documentos\n// Props para el componente\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";// Categorías de documentos predefinidas\nconst DOCUMENT_CATEGORIES=[{value:'identificacion',label:'Identificación Oficial'},{value:'comprobante_domicilio',label:'Comprobante de Domicilio'},{value:'comprobante_ingresos',label:'Comprobante de Ingresos'},{value:'estados_cuenta',label:'Estados de Cuenta Bancarios'},{value:'rfc',label:'Constancia de Situación Fiscal (RFC)'},{value:'curp',label:'CURP'},{value:'otros',label:'Otros Documentos'}];// Tipos de empleo\nconst EMPLOYMENT_TYPES=[{value:'empleado',label:'Empleado'},{value:'autonomo',label:'Autónomo / Freelance'},{value:'empresario',label:'Empresario'},{value:'jubilado',label:'Jubilado'},{value:'desempleado',label:'Desempleado'},{value:'estudiante',label:'Estudiante'},{value:'otro',label:'Otro'}];// Estados civiles\nconst MARITAL_STATUS_TYPES=[{value:'soltero',label:'Soltero/a'},{value:'casado',label:'Casado/a'},{value:'divorciado',label:'Divorciado/a'},{value:'viudo',label:'Viudo/a'},{value:'union_libre',label:'Unión Libre'}];// Tipos de cuenta bancaria\nconst BANK_ACCOUNT_TYPES=[{value:'nomina',label:'Nómina'},{value:'ahorro',label:'Ahorro'},{value:'cheques',label:'Cheques'},{value:'inversiones',label:'Inversiones'}];const ClientForm=_ref=>{let{initialData={},onSubmit,isSubmitting}=_ref;const navigate=useNavigate();// Estado para los datos del formulario\nconst[formData,setFormData]=useState({first_name:'',paternal_surname:'',maternal_surname:'',email:'',phone:'',address:'',city:'',state:'',postal_code:'',birth_date:'',gender:'',marital_status:'',employment_type:'',employment_years:undefined,rfc:'',curp:'',monthly_income:undefined,additional_income:undefined,monthly_expenses:undefined,other_loan_balances:undefined,bank_name:'',bank_clabe:'',bank_account_number:'',bank_account_type:'',bank_account_origin:'',...initialData});// Estado para errores de validación\nconst[errors,setErrors]=useState({});// Estado para documentos\nconst[documents,setDocuments]=useState([]);// Estado para el paso actual del formulario\nconst[currentStep,setCurrentStep]=useState(1);// Calcular el progreso de llenado de formulario\nconst calculateProgress=()=>{let filledFields=0;let totalFields=0;// Paso 1: Datos Personales Básicos\nconst step1Fields=['first_name','paternal_surname','maternal_surname','email','phone','rfc','curp','birth_date','gender','marital_status','address','city','state','postal_code'];totalFields+=step1Fields.length;filledFields+=step1Fields.filter(field=>formData[field]).length;// Paso 2: Detalles Financieros\nconst step2Fields=['employment_type','employment_years','monthly_income','additional_income','monthly_expenses','other_loan_balances'];totalFields+=step2Fields.length;filledFields+=step2Fields.filter(field=>formData[field]!==undefined&&formData[field]!=='').length;// Paso 3: Datos Bancarios\nconst step3Fields=['bank_name','bank_clabe','bank_account_number','bank_account_type','bank_account_origin'];totalFields+=step3Fields.length;filledFields+=step3Fields.filter(field=>formData[field]).length;// Calcular porcentaje\nreturn Math.round(filledFields/totalFields*100);};// State for progress\nconst[progress,setProgress]=useState(()=>calculateProgress());// Update progress when form data changes\nuseEffect(()=>{setProgress(calculateProgress());},[formData]);// Manejar cambios en el formulario\nconst handleChange=e=>{const{name,value,type}=e.target;// Convertir a número si es un campo numérico\nif(type==='number'){setFormData(prev=>({...prev,[name]:value===''?undefined:parseFloat(value)}));}else{setFormData(prev=>({...prev,[name]:value}));}// Limpiar error si existe\nif(errors[name]){setErrors(prev=>{const newErrors={...prev};delete newErrors[name];return newErrors;});}};// Manejar documentos agregados\nconst handleDocumentAdded=document=>{setDocuments(prev=>[...prev,document]);};// Manejar documentos eliminados\nconst handleDocumentRemoved=index=>{setDocuments(prev=>prev.filter((_,i)=>i!==index));};// Validar datos antes de enviar\nconst validateForm=()=>{var _formData$first_name,_formData$paternal_su;const newErrors={};// Validar campos obligatorios solo para el paso 1 (datos personales básicos)\nif(!((_formData$first_name=formData.first_name)!==null&&_formData$first_name!==void 0&&_formData$first_name.trim())){newErrors.first_name='El nombre es obligatorio';}if(!((_formData$paternal_su=formData.paternal_surname)!==null&&_formData$paternal_su!==void 0&&_formData$paternal_su.trim())){newErrors.paternal_surname='El apellido paterno es obligatorio';}// Validar formato de email solo si se ha ingresado algo\nif(formData.email&&!/\\S+@\\S+\\.\\S+/.test(formData.email)){newErrors.email='El correo electrónico no es válido';}// Validar RFC solo si se ha ingresado algo\nif(formData.rfc&&!/^([A-ZÑ&]{3,4})(\\d{6})([A-Z\\d]{3})$/.test(formData.rfc.toUpperCase())){newErrors.rfc='El RFC no tiene un formato válido';}// Validar CURP solo si se ha ingresado algo\nif(formData.curp&&!/^([A-Z][AEIOUX][A-Z]{2}\\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3}[A-Z\\d])(\\d)$/.test(formData.curp.toUpperCase())){newErrors.curp='La CURP no tiene un formato válido';}// Validar CLABE solo si se ha ingresado algo\nif(formData.bank_clabe&&!/^\\d{18}$/.test(formData.bank_clabe)){newErrors.bank_clabe='La CLABE debe tener 18 dígitos';}// Establecer errores\nsetErrors(newErrors);// Solo requerimos que los campos de nombre y apellido paterno estén completos para el envío\nreturn!newErrors.first_name&&!newErrors.paternal_surname;};// Validar solo los campos relevantes para el paso actual\nconst validateCurrentStep=()=>{const newErrors={};if(currentStep===1){// Validar email, RFC y CURP solo si se han ingresado\nif(formData.email&&!/\\S+@\\S+\\.\\S+/.test(formData.email)){newErrors.email='El correo electrónico no es válido';}if(formData.rfc&&!/^([A-ZÑ&]{3,4})(\\d{6})([A-Z\\d]{3})$/.test(formData.rfc.toUpperCase())){newErrors.rfc='El RFC no tiene un formato válido';}if(formData.curp&&!/^([A-Z][AEIOUX][A-Z]{2}\\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3}[A-Z\\d])(\\d)$/.test(formData.curp.toUpperCase())){newErrors.curp='La CURP no tiene un formato válido';}}else if(currentStep===3){// Validar CLABE solo si se ha ingresado\nif(formData.bank_clabe&&!/^\\d{18}$/.test(formData.bank_clabe)){newErrors.bank_clabe='La CLABE debe tener 18 dígitos';}}setErrors(newErrors);return Object.keys(newErrors).length===0;};// Manejar envío del formulario\nconst handleSubmit=async e=>{var _formData$first_name2,_formData$paternal_su2;e.preventDefault();// Only validate first name and paternal surname\nconst nameErrors={};if(!((_formData$first_name2=formData.first_name)!==null&&_formData$first_name2!==void 0&&_formData$first_name2.trim())){nameErrors['first_name']='El nombre es obligatorio';}if(!((_formData$paternal_su2=formData.paternal_surname)!==null&&_formData$paternal_su2!==void 0&&_formData$paternal_su2.trim())){nameErrors['paternal_surname']='El apellido paterno es obligatorio';}if(Object.keys(nameErrors).length>0){setErrors(nameErrors);alert('Por favor, completa al menos el nombre y apellido paterno para guardar');setCurrentStep(1);// Go back to personal data section\nreturn;}try{// Show loader during submission\nawait onSubmit(formData,documents);// Clean up localStorage on successful submission\nlocalStorage.removeItem('clientFormData');localStorage.removeItem('clientFormStep');}catch(error){console.error('Error al guardar cliente:',error);alert(`Error al guardar: ${error.message||'Error desconocido'}`);}};// Avanzar al siguiente paso\nconst nextStep=()=>{// Always allow navigation forward regardless of validation\nif(currentStep<4){// Save the current state to localStorage for recovery in case of crash\ntry{localStorage.setItem('clientFormData',JSON.stringify(formData));localStorage.setItem('clientFormStep',String(currentStep+1));}catch(err){console.error('Error saving form state:',err);}setCurrentStep(prev=>prev+1);}};// Retroceder al paso anterior\nconst prevStep=()=>{if(currentStep>1){setCurrentStep(prev=>prev-1);}};// Try to recover form data on component mount\nuseEffect(()=>{try{const savedData=localStorage.getItem('clientFormData');const savedStep=localStorage.getItem('clientFormStep');if(savedData&&Object.keys(initialData).length===0){// Only restore if we're creating a new client (not editing)\nconst parsedData=JSON.parse(savedData);setFormData(current=>({...current,...parsedData}));}if(savedStep){const step=parseInt(savedStep,10);if(step>0&&step<=4){setCurrentStep(step);}}}catch(err){console.error('Error recovering form state:',err);}},[initialData]);// Renderizado condicional de pasos\nconst renderStep=()=>{switch(currentStep){case 1:return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold\",children:\"Datos Personales\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"label-text\",children:[\"Nombre(s) \",/*#__PURE__*/_jsx(\"span\",{className:\"text-error\",children:\"*\"})]})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"first_name\",className:`input input-bordered w-full ${errors.first_name?'input-error':''}`,value:formData.first_name||'',onChange:handleChange,placeholder:\"Nombre(s)\"}),errors.first_name&&/*#__PURE__*/_jsx(\"span\",{className:\"text-error text-sm mt-1\",children:errors.first_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"label-text\",children:[\"Apellido Paterno \",/*#__PURE__*/_jsx(\"span\",{className:\"text-error\",children:\"*\"})]})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"paternal_surname\",className:`input input-bordered w-full ${errors.paternal_surname?'input-error':''}`,value:formData.paternal_surname||'',onChange:handleChange,placeholder:\"Apellido Paterno\"}),errors.paternal_surname&&/*#__PURE__*/_jsx(\"span\",{className:\"text-error text-sm mt-1\",children:errors.paternal_surname})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Apellido Materno\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"maternal_surname\",className:\"input input-bordered w-full\",value:formData.maternal_surname||'',onChange:handleChange,placeholder:\"Apellido Materno\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Correo Electr\\xF3nico\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",className:`input input-bordered w-full ${errors.email?'input-error':''}`,value:formData.email||'',onChange:handleChange,placeholder:\"correo@ejemplo.com\"}),errors.email&&/*#__PURE__*/_jsx(\"span\",{className:\"text-error text-sm mt-1\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Tel\\xE9fono\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phone\",className:\"input input-bordered w-full\",value:formData.phone||'',onChange:handleChange,placeholder:\"(123) 456-7890\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"RFC\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"rfc\",className:`input input-bordered w-full ${errors.rfc?'input-error':''}`,value:formData.rfc||'',onChange:handleChange,placeholder:\"ABCD123456XXX\"}),errors.rfc&&/*#__PURE__*/_jsx(\"span\",{className:\"text-error text-sm mt-1\",children:errors.rfc})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"CURP\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"curp\",className:`input input-bordered w-full ${errors.curp?'input-error':''}`,value:formData.curp||'',onChange:handleChange,placeholder:\"ABCD123456HDFXXX01\"}),errors.curp&&/*#__PURE__*/_jsx(\"span\",{className:\"text-error text-sm mt-1\",children:errors.curp})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Fecha de Nacimiento\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"birth_date\",className:\"input input-bordered w-full\",value:formData.birth_date||'',onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"G\\xE9nero\"})}),/*#__PURE__*/_jsxs(\"select\",{name:\"gender\",className:\"select select-bordered w-full\",value:formData.gender||'',onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccionar...\"}),/*#__PURE__*/_jsx(\"option\",{value:\"masculino\",children:\"Masculino\"}),/*#__PURE__*/_jsx(\"option\",{value:\"femenino\",children:\"Femenino\"}),/*#__PURE__*/_jsx(\"option\",{value:\"otro\",children:\"Otro\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Estado Civil\"})}),/*#__PURE__*/_jsxs(\"select\",{name:\"marital_status\",className:\"select select-bordered w-full\",value:formData.marital_status||'',onChange:handleChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccionar...\"}),MARITAL_STATUS_TYPES.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))]})]})]});case 2:return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"Detalles Financieros y Balance\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-control w-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Tipo de Empleo\"})}),/*#__PURE__*/_jsxs(\"select\",{name:\"employment_type\",value:formData.employment_type||'',onChange:handleChange,className:`select select-bordered w-full ${errors.employment_type?'select-error':''}`,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccionar tipo de empleo\"}),EMPLOYMENT_TYPES.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))]}),errors.employment_type&&/*#__PURE__*/_jsx(\"span\",{className:\"text-error text-xs mt-1\",children:errors.employment_type})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control w-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Antig\\xFCedad (a\\xF1os)\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"employment_years\",value:formData.employment_years||'',onChange:handleChange,className:`input input-bordered w-full ${errors.employment_years?'input-error':''}`,placeholder:\"A\\xF1os de antig\\xFCedad\",min:\"0\"}),errors.employment_years&&/*#__PURE__*/_jsx(\"span\",{className:\"text-error text-xs mt-1\",children:errors.employment_years})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control w-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Ingreso Mensual ($)\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"monthly_income\",value:formData.monthly_income||'',onChange:handleChange,className:`input input-bordered w-full ${errors.monthly_income?'input-error':''}`,placeholder:\"0.00\",min:\"0\",step:\"0.01\"}),errors.monthly_income&&/*#__PURE__*/_jsx(\"span\",{className:\"text-error text-xs mt-1\",children:errors.monthly_income})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control w-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Ingresos Adicionales ($)\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"additional_income\",value:formData.additional_income||'',onChange:handleChange,className:`input input-bordered w-full ${errors.additional_income?'input-error':''}`,placeholder:\"0.00\",min:\"0\",step:\"0.01\"}),errors.additional_income&&/*#__PURE__*/_jsx(\"span\",{className:\"text-error text-xs mt-1\",children:errors.additional_income})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control w-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Gastos Mensuales ($)\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"monthly_expenses\",value:formData.monthly_expenses||'',onChange:handleChange,className:`input input-bordered w-full ${errors.monthly_expenses?'input-error':''}`,placeholder:\"0.00\",min:\"0\",step:\"0.01\"}),errors.monthly_expenses&&/*#__PURE__*/_jsx(\"span\",{className:\"text-error text-xs mt-1\",children:errors.monthly_expenses})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control w-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Saldos de Otros Cr\\xE9ditos ($)\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"other_loan_balances\",value:formData.other_loan_balances||'',onChange:handleChange,className:`input input-bordered w-full ${errors.other_loan_balances?'input-error':''}`,placeholder:\"0.00\",min:\"0\",step:\"0.01\"}),errors.other_loan_balances&&/*#__PURE__*/_jsx(\"span\",{className:\"text-error text-xs mt-1\",children:errors.other_loan_balances})]})]})]});case 3:return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"Datos de la Cuenta Bancaria\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-control w-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Banco\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"bank_name\",value:formData.bank_name||'',onChange:handleChange,className:`input input-bordered w-full ${errors.bank_name?'input-error':''}`,placeholder:\"Nombre del banco\"}),errors.bank_name&&/*#__PURE__*/_jsx(\"span\",{className:\"text-error text-xs mt-1\",children:errors.bank_name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control w-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"CLABE\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"bank_clabe\",value:formData.bank_clabe||'',onChange:handleChange,className:`input input-bordered w-full ${errors.bank_clabe?'input-error':''}`,placeholder:\"18 d\\xEDgitos\"}),errors.bank_clabe&&/*#__PURE__*/_jsx(\"span\",{className:\"text-error text-xs mt-1\",children:errors.bank_clabe})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control w-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"N\\xFAmero de Cuenta\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"bank_account_number\",value:formData.bank_account_number||'',onChange:handleChange,className:`input input-bordered w-full ${errors.bank_account_number?'input-error':''}`,placeholder:\"N\\xFAmero de cuenta\"}),errors.bank_account_number&&/*#__PURE__*/_jsx(\"span\",{className:\"text-error text-xs mt-1\",children:errors.bank_account_number})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control w-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Tipo de Cuenta\"})}),/*#__PURE__*/_jsxs(\"select\",{name:\"bank_account_type\",value:formData.bank_account_type||'',onChange:handleChange,className:`select select-bordered w-full ${errors.bank_account_type?'select-error':''}`,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccionar tipo de cuenta\"}),BANK_ACCOUNT_TYPES.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value))]}),errors.bank_account_type&&/*#__PURE__*/_jsx(\"span\",{className:\"text-error text-xs mt-1\",children:errors.bank_account_type})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control w-full\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"label\",children:/*#__PURE__*/_jsx(\"span\",{className:\"label-text\",children:\"Origen de la Cuenta (Estado)\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"bank_account_origin\",value:formData.bank_account_origin||'',onChange:handleChange,className:`input input-bordered w-full ${errors.bank_account_origin?'input-error':''}`,placeholder:\"Estado donde se abri\\xF3 la cuenta\"}),errors.bank_account_origin&&/*#__PURE__*/_jsx(\"span\",{className:\"text-error text-xs mt-1\",children:errors.bank_account_origin})]})]})]});case 4:return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold\",children:\"Documentos\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:\"Sube los documentos del cliente. Todos los formatos son aceptados.\"}),/*#__PURE__*/_jsx(DocumentUploader,{categories:DOCUMENT_CATEGORIES,onDocumentAdded:handleDocumentAdded,onDocumentRemoved:handleDocumentRemoved,existingDocuments:documents,clientId:initialData===null||initialData===void 0?void 0:initialData.id})]});default:return null;}};return/*#__PURE__*/_jsx(\"div\",{className:\"card bg-base-100 shadow-xl\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"card-title text-xl\",children:initialData!==null&&initialData!==void 0&&initialData.id?'Editar Cliente':'Nuevo Cliente'}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mt-2 sm:mt-0\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm mr-2\",children:[progress,\"% completado\"]}),/*#__PURE__*/_jsx(\"progress\",{className:\"progress progress-primary w-40\",value:progress,max:\"100\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"steps steps-horizontal w-full\",children:[/*#__PURE__*/_jsx(\"li\",{className:`step ${currentStep>=1?'step-primary':''}`,children:\"Datos Personales\"}),/*#__PURE__*/_jsx(\"li\",{className:`step ${currentStep>=2?'step-primary':''}`,children:\"Financieros\"}),/*#__PURE__*/_jsx(\"li\",{className:`step ${currentStep>=3?'step-primary':''}`,children:\"Datos Bancarios\"}),/*#__PURE__*/_jsx(\"li\",{className:`step ${currentStep>=4?'step-primary':''}`,children:\"Documentos\"})]})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[renderStep(),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mt-6\",children:[/*#__PURE__*/_jsx(\"div\",{children:currentStep>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline\",onClick:prevStep,children:\"Anterior\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline\",onClick:()=>navigate('/clients'),children:\"Cancelar\"}),currentStep<4?/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:nextStep,children:\"Siguiente\"}):/*#__PURE__*/_jsxs(\"button\",{type:\"submit\",className:`btn btn-primary ${isSubmitting?'loading':''}`,disabled:isSubmitting,children:[initialData!==null&&initialData!==void 0&&initialData.id?'Actualizar':'Guardar',\" Cliente\"]})]})]})]})]})});};export default ClientForm;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","DocumentUploader","jsx","_jsx","jsxs","_jsxs","DOCUMENT_CATEGORIES","value","label","EMPLOYMENT_TYPES","MARITAL_STATUS_TYPES","BANK_ACCOUNT_TYPES","ClientForm","_ref","initialData","onSubmit","isSubmitting","navigate","formData","setFormData","first_name","paternal_surname","maternal_surname","email","phone","address","city","state","postal_code","birth_date","gender","marital_status","employment_type","employment_years","undefined","rfc","curp","monthly_income","additional_income","monthly_expenses","other_loan_balances","bank_name","bank_clabe","bank_account_number","bank_account_type","bank_account_origin","errors","setErrors","documents","setDocuments","currentStep","setCurrentStep","calculateProgress","filledFields","totalFields","step1Fields","length","filter","field","step2Fields","step3Fields","Math","round","progress","setProgress","handleChange","e","name","type","target","prev","parseFloat","newErrors","handleDocumentAdded","document","handleDocumentRemoved","index","_","i","validateForm","_formData$first_name","_formData$paternal_su","trim","test","toUpperCase","validateCurrentStep","Object","keys","handleSubmit","_formData$first_name2","_formData$paternal_su2","preventDefault","nameErrors","alert","localStorage","removeItem","error","console","message","nextStep","setItem","JSON","stringify","String","err","prevStep","savedData","getItem","savedStep","parsedData","parse","current","step","parseInt","renderStep","className","children","onChange","placeholder","map","option","min","categories","onDocumentAdded","onDocumentRemoved","existingDocuments","clientId","id","max","onClick","disabled"],"sources":["/Users/diegogg98/NEW CRM MAR18/src/components/clients/ClientForm.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Client } from '../../services/clientService';\nimport DocumentUploader from '../documents/DocumentUploader';\n\n// Interfaz para documentos\ninterface ClientDocument {\n  id?: string;\n  file: File;\n  category: string;\n  name: string;\n}\n\n// Props para el componente\ninterface ClientFormProps {\n  initialData?: Partial<Client>;\n  onSubmit: (data: Partial<Client>, documents: ClientDocument[]) => Promise<void>;\n  isSubmitting: boolean;\n}\n\n// Categorías de documentos predefinidas\nconst DOCUMENT_CATEGORIES = [\n  { value: 'identificacion', label: 'Identificación Oficial' },\n  { value: 'comprobante_domicilio', label: 'Comprobante de Domicilio' },\n  { value: 'comprobante_ingresos', label: 'Comprobante de Ingresos' },\n  { value: 'estados_cuenta', label: 'Estados de Cuenta Bancarios' },\n  { value: 'rfc', label: 'Constancia de Situación Fiscal (RFC)' },\n  { value: 'curp', label: 'CURP' },\n  { value: 'otros', label: 'Otros Documentos' },\n];\n\n// Tipos de empleo\nconst EMPLOYMENT_TYPES = [\n  { value: 'empleado', label: 'Empleado' },\n  { value: 'autonomo', label: 'Autónomo / Freelance' },\n  { value: 'empresario', label: 'Empresario' },\n  { value: 'jubilado', label: 'Jubilado' },\n  { value: 'desempleado', label: 'Desempleado' },\n  { value: 'estudiante', label: 'Estudiante' },\n  { value: 'otro', label: 'Otro' },\n];\n\n// Estados civiles\nconst MARITAL_STATUS_TYPES = [\n  { value: 'soltero', label: 'Soltero/a' },\n  { value: 'casado', label: 'Casado/a' },\n  { value: 'divorciado', label: 'Divorciado/a' },\n  { value: 'viudo', label: 'Viudo/a' },\n  { value: 'union_libre', label: 'Unión Libre' },\n];\n\n// Tipos de cuenta bancaria\nconst BANK_ACCOUNT_TYPES = [\n  { value: 'nomina', label: 'Nómina' },\n  { value: 'ahorro', label: 'Ahorro' },\n  { value: 'cheques', label: 'Cheques' },\n  { value: 'inversiones', label: 'Inversiones' },\n];\n\nconst ClientForm: React.FC<ClientFormProps> = ({ initialData = {}, onSubmit, isSubmitting }) => {\n  const navigate = useNavigate();\n  \n  // Estado para los datos del formulario\n  const [formData, setFormData] = useState<Partial<Client>>({\n    first_name: '',\n    paternal_surname: '',\n    maternal_surname: '',\n    email: '',\n    phone: '',\n    address: '',\n    city: '',\n    state: '',\n    postal_code: '',\n    birth_date: '',\n    gender: '',\n    marital_status: '',\n    employment_type: '',\n    employment_years: undefined,\n    rfc: '',\n    curp: '',\n    monthly_income: undefined,\n    additional_income: undefined,\n    monthly_expenses: undefined,\n    other_loan_balances: undefined,\n    bank_name: '',\n    bank_clabe: '',\n    bank_account_number: '',\n    bank_account_type: '',\n    bank_account_origin: '',\n    ...initialData,\n  });\n\n  // Estado para errores de validación\n  const [errors, setErrors] = useState<Record<string, string>>({});\n  \n  // Estado para documentos\n  const [documents, setDocuments] = useState<ClientDocument[]>([]);\n  \n  // Estado para el paso actual del formulario\n  const [currentStep, setCurrentStep] = useState(1);\n  \n  // Calcular el progreso de llenado de formulario\n  const calculateProgress = () => {\n    let filledFields = 0;\n    let totalFields = 0;\n    \n    // Paso 1: Datos Personales Básicos\n    const step1Fields = ['first_name', 'paternal_surname', 'maternal_surname', 'email', 'phone', 'rfc', 'curp', 'birth_date', 'gender', 'marital_status', 'address', 'city', 'state', 'postal_code'];\n    totalFields += step1Fields.length;\n    filledFields += step1Fields.filter(field => formData[field as keyof Partial<Client>]).length;\n    \n    // Paso 2: Detalles Financieros\n    const step2Fields = ['employment_type', 'employment_years', 'monthly_income', 'additional_income', 'monthly_expenses', 'other_loan_balances'];\n    totalFields += step2Fields.length;\n    filledFields += step2Fields.filter(field => formData[field as keyof Partial<Client>] !== undefined && formData[field as keyof Partial<Client>] !== '').length;\n    \n    // Paso 3: Datos Bancarios\n    const step3Fields = ['bank_name', 'bank_clabe', 'bank_account_number', 'bank_account_type', 'bank_account_origin'];\n    totalFields += step3Fields.length;\n    filledFields += step3Fields.filter(field => formData[field as keyof Partial<Client>]).length;\n    \n    // Calcular porcentaje\n    return Math.round((filledFields / totalFields) * 100);\n  };\n  \n  // State for progress\n  const [progress, setProgress] = useState(() => calculateProgress());\n  \n  // Update progress when form data changes\n  useEffect(() => {\n    setProgress(calculateProgress());\n  }, [formData]);\n  \n  // Manejar cambios en el formulario\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\n    const { name, value, type } = e.target as HTMLInputElement;\n    \n    // Convertir a número si es un campo numérico\n    if (type === 'number') {\n      setFormData(prev => ({\n        ...prev,\n        [name]: value === '' ? undefined : parseFloat(value)\n      }));\n    } else {\n      setFormData(prev => ({\n        ...prev,\n        [name]: value\n      }));\n    }\n    \n    // Limpiar error si existe\n    if (errors[name]) {\n      setErrors(prev => {\n        const newErrors = { ...prev };\n        delete newErrors[name];\n        return newErrors;\n      });\n    }\n  };\n  \n  // Manejar documentos agregados\n  const handleDocumentAdded = (document: ClientDocument) => {\n    setDocuments(prev => [...prev, document]);\n  };\n  \n  // Manejar documentos eliminados\n  const handleDocumentRemoved = (index: number) => {\n    setDocuments(prev => prev.filter((_, i) => i !== index));\n  };\n  \n  // Validar datos antes de enviar\n  const validateForm = () => {\n    const newErrors: Record<string, string> = {};\n    \n    // Validar campos obligatorios solo para el paso 1 (datos personales básicos)\n    if (!formData.first_name?.trim()) {\n      newErrors.first_name = 'El nombre es obligatorio';\n    }\n    \n    if (!formData.paternal_surname?.trim()) {\n      newErrors.paternal_surname = 'El apellido paterno es obligatorio';\n    }\n    \n    // Validar formato de email solo si se ha ingresado algo\n    if (formData.email && !/\\S+@\\S+\\.\\S+/.test(formData.email)) {\n      newErrors.email = 'El correo electrónico no es válido';\n    }\n    \n    // Validar RFC solo si se ha ingresado algo\n    if (formData.rfc && !/^([A-ZÑ&]{3,4})(\\d{6})([A-Z\\d]{3})$/.test(formData.rfc.toUpperCase())) {\n      newErrors.rfc = 'El RFC no tiene un formato válido';\n    }\n    \n    // Validar CURP solo si se ha ingresado algo\n    if (formData.curp && !/^([A-Z][AEIOUX][A-Z]{2}\\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3}[A-Z\\d])(\\d)$/.test(formData.curp.toUpperCase())) {\n      newErrors.curp = 'La CURP no tiene un formato válido';\n    }\n    \n    // Validar CLABE solo si se ha ingresado algo\n    if (formData.bank_clabe && !/^\\d{18}$/.test(formData.bank_clabe)) {\n      newErrors.bank_clabe = 'La CLABE debe tener 18 dígitos';\n    }\n    \n    // Establecer errores\n    setErrors(newErrors);\n    \n    // Solo requerimos que los campos de nombre y apellido paterno estén completos para el envío\n    return !newErrors.first_name && !newErrors.paternal_surname;\n  };\n  \n  // Validar solo los campos relevantes para el paso actual\n  const validateCurrentStep = () => {\n    const newErrors: Record<string, string> = {};\n    \n    if (currentStep === 1) {\n      // Validar email, RFC y CURP solo si se han ingresado\n      if (formData.email && !/\\S+@\\S+\\.\\S+/.test(formData.email)) {\n        newErrors.email = 'El correo electrónico no es válido';\n      }\n      \n      if (formData.rfc && !/^([A-ZÑ&]{3,4})(\\d{6})([A-Z\\d]{3})$/.test(formData.rfc.toUpperCase())) {\n        newErrors.rfc = 'El RFC no tiene un formato válido';\n      }\n      \n      if (formData.curp && !/^([A-Z][AEIOUX][A-Z]{2}\\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3}[A-Z\\d])(\\d)$/.test(formData.curp.toUpperCase())) {\n        newErrors.curp = 'La CURP no tiene un formato válido';\n      }\n    } else if (currentStep === 3) {\n      // Validar CLABE solo si se ha ingresado\n      if (formData.bank_clabe && !/^\\d{18}$/.test(formData.bank_clabe)) {\n        newErrors.bank_clabe = 'La CLABE debe tener 18 dígitos';\n      }\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  \n  // Manejar envío del formulario\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    // Only validate first name and paternal surname\n    const nameErrors: Record<string, string> = {};\n    if (!formData.first_name?.trim()) {\n      nameErrors['first_name'] = 'El nombre es obligatorio';\n    }\n    \n    if (!formData.paternal_surname?.trim()) {\n      nameErrors['paternal_surname'] = 'El apellido paterno es obligatorio';\n    }\n    \n    if (Object.keys(nameErrors).length > 0) {\n      setErrors(nameErrors);\n      alert('Por favor, completa al menos el nombre y apellido paterno para guardar');\n      setCurrentStep(1); // Go back to personal data section\n      return;\n    }\n    \n    try {\n      // Show loader during submission\n      await onSubmit(formData, documents);\n      \n      // Clean up localStorage on successful submission\n      localStorage.removeItem('clientFormData');\n      localStorage.removeItem('clientFormStep');\n    } catch (error: any) {\n      console.error('Error al guardar cliente:', error);\n      alert(`Error al guardar: ${error.message || 'Error desconocido'}`);\n    }\n  };\n  \n  // Avanzar al siguiente paso\n  const nextStep = () => {\n    // Always allow navigation forward regardless of validation\n    if (currentStep < 4) {\n      // Save the current state to localStorage for recovery in case of crash\n      try {\n        localStorage.setItem('clientFormData', JSON.stringify(formData));\n        localStorage.setItem('clientFormStep', String(currentStep + 1));\n      } catch (err) {\n        console.error('Error saving form state:', err);\n      }\n      \n      setCurrentStep(prev => prev + 1);\n    }\n  };\n  \n  // Retroceder al paso anterior\n  const prevStep = () => {\n    if (currentStep > 1) {\n      setCurrentStep(prev => prev - 1);\n    }\n  };\n  \n  // Try to recover form data on component mount\n  useEffect(() => {\n    try {\n      const savedData = localStorage.getItem('clientFormData');\n      const savedStep = localStorage.getItem('clientFormStep');\n      \n      if (savedData && Object.keys(initialData).length === 0) {\n        // Only restore if we're creating a new client (not editing)\n        const parsedData = JSON.parse(savedData);\n        setFormData(current => ({...current, ...parsedData}));\n      }\n      \n      if (savedStep) {\n        const step = parseInt(savedStep, 10);\n        if (step > 0 && step <= 4) {\n          setCurrentStep(step);\n        }\n      }\n    } catch (err) {\n      console.error('Error recovering form state:', err);\n    }\n  }, [initialData]);\n  \n  // Renderizado condicional de pasos\n  const renderStep = () => {\n    switch (currentStep) {\n      case 1:\n        return (\n          <div className=\"space-y-4\">\n            <h3 className=\"text-lg font-bold\">Datos Personales</h3>\n            \n            <div className=\"form-control\">\n              <label className=\"label\">\n                <span className=\"label-text\">Nombre(s) <span className=\"text-error\">*</span></span>\n              </label>\n              <input\n                type=\"text\"\n                name=\"first_name\"\n                className={`input input-bordered w-full ${errors.first_name ? 'input-error' : ''}`}\n                value={formData.first_name || ''}\n                onChange={handleChange}\n                placeholder=\"Nombre(s)\"\n              />\n              {errors.first_name && <span className=\"text-error text-sm mt-1\">{errors.first_name}</span>}\n            </div>\n            \n            <div className=\"form-control\">\n              <label className=\"label\">\n                <span className=\"label-text\">Apellido Paterno <span className=\"text-error\">*</span></span>\n              </label>\n              <input\n                type=\"text\"\n                name=\"paternal_surname\"\n                className={`input input-bordered w-full ${errors.paternal_surname ? 'input-error' : ''}`}\n                value={formData.paternal_surname || ''}\n                onChange={handleChange}\n                placeholder=\"Apellido Paterno\"\n              />\n              {errors.paternal_surname && <span className=\"text-error text-sm mt-1\">{errors.paternal_surname}</span>}\n            </div>\n            \n            <div className=\"form-control\">\n              <label className=\"label\">\n                <span className=\"label-text\">Apellido Materno</span>\n              </label>\n              <input\n                type=\"text\"\n                name=\"maternal_surname\"\n                className=\"input input-bordered w-full\"\n                value={formData.maternal_surname || ''}\n                onChange={handleChange}\n                placeholder=\"Apellido Materno\"\n              />\n            </div>\n            \n            <div className=\"form-control\">\n              <label className=\"label\">\n                <span className=\"label-text\">Correo Electrónico</span>\n              </label>\n              <input\n                type=\"email\"\n                name=\"email\"\n                className={`input input-bordered w-full ${errors.email ? 'input-error' : ''}`}\n                value={formData.email || ''}\n                onChange={handleChange}\n                placeholder=\"correo@ejemplo.com\"\n              />\n              {errors.email && <span className=\"text-error text-sm mt-1\">{errors.email}</span>}\n            </div>\n            \n            <div className=\"form-control\">\n              <label className=\"label\">\n                <span className=\"label-text\">Teléfono</span>\n              </label>\n              <input\n                type=\"tel\"\n                name=\"phone\"\n                className=\"input input-bordered w-full\"\n                value={formData.phone || ''}\n                onChange={handleChange}\n                placeholder=\"(123) 456-7890\"\n              />\n            </div>\n            \n            <div className=\"form-control\">\n              <label className=\"label\">\n                <span className=\"label-text\">RFC</span>\n              </label>\n              <input\n                type=\"text\"\n                name=\"rfc\"\n                className={`input input-bordered w-full ${errors.rfc ? 'input-error' : ''}`}\n                value={formData.rfc || ''}\n                onChange={handleChange}\n                placeholder=\"ABCD123456XXX\"\n              />\n              {errors.rfc && <span className=\"text-error text-sm mt-1\">{errors.rfc}</span>}\n            </div>\n            \n            <div className=\"form-control\">\n              <label className=\"label\">\n                <span className=\"label-text\">CURP</span>\n              </label>\n              <input\n                type=\"text\"\n                name=\"curp\"\n                className={`input input-bordered w-full ${errors.curp ? 'input-error' : ''}`}\n                value={formData.curp || ''}\n                onChange={handleChange}\n                placeholder=\"ABCD123456HDFXXX01\"\n              />\n              {errors.curp && <span className=\"text-error text-sm mt-1\">{errors.curp}</span>}\n            </div>\n            \n            <div className=\"form-control\">\n              <label className=\"label\">\n                <span className=\"label-text\">Fecha de Nacimiento</span>\n              </label>\n              <input\n                type=\"date\"\n                name=\"birth_date\"\n                className=\"input input-bordered w-full\"\n                value={formData.birth_date || ''}\n                onChange={handleChange}\n              />\n            </div>\n            \n            <div className=\"form-control\">\n              <label className=\"label\">\n                <span className=\"label-text\">Género</span>\n              </label>\n              <select\n                name=\"gender\"\n                className=\"select select-bordered w-full\"\n                value={formData.gender || ''}\n                onChange={handleChange}\n              >\n                <option value=\"\">Seleccionar...</option>\n                <option value=\"masculino\">Masculino</option>\n                <option value=\"femenino\">Femenino</option>\n                <option value=\"otro\">Otro</option>\n              </select>\n            </div>\n            \n            <div className=\"form-control\">\n              <label className=\"label\">\n                <span className=\"label-text\">Estado Civil</span>\n              </label>\n              <select\n                name=\"marital_status\"\n                className=\"select select-bordered w-full\"\n                value={formData.marital_status || ''}\n                onChange={handleChange}\n              >\n                <option value=\"\">Seleccionar...</option>\n                {MARITAL_STATUS_TYPES.map(option => (\n                  <option key={option.value} value={option.value}>\n                    {option.label}\n                  </option>\n                ))}\n              </select>\n            </div>\n          </div>\n        );\n      \n      case 2:\n        return (\n          <div className=\"space-y-6\">\n            <h3 className=\"text-lg font-semibold\">Detalles Financieros y Balance</h3>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"form-control w-full\">\n                <label className=\"label\">\n                  <span className=\"label-text\">Tipo de Empleo</span>\n                </label>\n                <select\n                  name=\"employment_type\"\n                  value={formData.employment_type || ''}\n                  onChange={handleChange}\n                  className={`select select-bordered w-full ${errors.employment_type ? 'select-error' : ''}`}\n                >\n                  <option value=\"\">Seleccionar tipo de empleo</option>\n                  {EMPLOYMENT_TYPES.map(option => (\n                    <option key={option.value} value={option.value}>{option.label}</option>\n                  ))}\n                </select>\n                {errors.employment_type && <span className=\"text-error text-xs mt-1\">{errors.employment_type}</span>}\n              </div>\n              \n              <div className=\"form-control w-full\">\n                <label className=\"label\">\n                  <span className=\"label-text\">Antigüedad (años)</span>\n                </label>\n                <input\n                  type=\"number\"\n                  name=\"employment_years\"\n                  value={formData.employment_years || ''}\n                  onChange={handleChange}\n                  className={`input input-bordered w-full ${errors.employment_years ? 'input-error' : ''}`}\n                  placeholder=\"Años de antigüedad\"\n                  min=\"0\"\n                />\n                {errors.employment_years && <span className=\"text-error text-xs mt-1\">{errors.employment_years}</span>}\n              </div>\n              \n              <div className=\"form-control w-full\">\n                <label className=\"label\">\n                  <span className=\"label-text\">Ingreso Mensual ($)</span>\n                </label>\n                <input\n                  type=\"number\"\n                  name=\"monthly_income\"\n                  value={formData.monthly_income || ''}\n                  onChange={handleChange}\n                  className={`input input-bordered w-full ${errors.monthly_income ? 'input-error' : ''}`}\n                  placeholder=\"0.00\"\n                  min=\"0\"\n                  step=\"0.01\"\n                />\n                {errors.monthly_income && <span className=\"text-error text-xs mt-1\">{errors.monthly_income}</span>}\n              </div>\n              \n              <div className=\"form-control w-full\">\n                <label className=\"label\">\n                  <span className=\"label-text\">Ingresos Adicionales ($)</span>\n                </label>\n                <input\n                  type=\"number\"\n                  name=\"additional_income\"\n                  value={formData.additional_income || ''}\n                  onChange={handleChange}\n                  className={`input input-bordered w-full ${errors.additional_income ? 'input-error' : ''}`}\n                  placeholder=\"0.00\"\n                  min=\"0\"\n                  step=\"0.01\"\n                />\n                {errors.additional_income && <span className=\"text-error text-xs mt-1\">{errors.additional_income}</span>}\n              </div>\n              \n              <div className=\"form-control w-full\">\n                <label className=\"label\">\n                  <span className=\"label-text\">Gastos Mensuales ($)</span>\n                </label>\n                <input\n                  type=\"number\"\n                  name=\"monthly_expenses\"\n                  value={formData.monthly_expenses || ''}\n                  onChange={handleChange}\n                  className={`input input-bordered w-full ${errors.monthly_expenses ? 'input-error' : ''}`}\n                  placeholder=\"0.00\"\n                  min=\"0\"\n                  step=\"0.01\"\n                />\n                {errors.monthly_expenses && <span className=\"text-error text-xs mt-1\">{errors.monthly_expenses}</span>}\n              </div>\n              \n              <div className=\"form-control w-full\">\n                <label className=\"label\">\n                  <span className=\"label-text\">Saldos de Otros Créditos ($)</span>\n                </label>\n                <input\n                  type=\"number\"\n                  name=\"other_loan_balances\"\n                  value={formData.other_loan_balances || ''}\n                  onChange={handleChange}\n                  className={`input input-bordered w-full ${errors.other_loan_balances ? 'input-error' : ''}`}\n                  placeholder=\"0.00\"\n                  min=\"0\"\n                  step=\"0.01\"\n                />\n                {errors.other_loan_balances && <span className=\"text-error text-xs mt-1\">{errors.other_loan_balances}</span>}\n              </div>\n            </div>\n          </div>\n        );\n      \n      case 3:\n        return (\n          <div className=\"space-y-6\">\n            <h3 className=\"text-lg font-semibold\">Datos de la Cuenta Bancaria</h3>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"form-control w-full\">\n                <label className=\"label\">\n                  <span className=\"label-text\">Banco</span>\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"bank_name\"\n                  value={formData.bank_name || ''}\n                  onChange={handleChange}\n                  className={`input input-bordered w-full ${errors.bank_name ? 'input-error' : ''}`}\n                  placeholder=\"Nombre del banco\"\n                />\n                {errors.bank_name && <span className=\"text-error text-xs mt-1\">{errors.bank_name}</span>}\n              </div>\n              \n              <div className=\"form-control w-full\">\n                <label className=\"label\">\n                  <span className=\"label-text\">CLABE</span>\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"bank_clabe\"\n                  value={formData.bank_clabe || ''}\n                  onChange={handleChange}\n                  className={`input input-bordered w-full ${errors.bank_clabe ? 'input-error' : ''}`}\n                  placeholder=\"18 dígitos\"\n                />\n                {errors.bank_clabe && <span className=\"text-error text-xs mt-1\">{errors.bank_clabe}</span>}\n              </div>\n              \n              <div className=\"form-control w-full\">\n                <label className=\"label\">\n                  <span className=\"label-text\">Número de Cuenta</span>\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"bank_account_number\"\n                  value={formData.bank_account_number || ''}\n                  onChange={handleChange}\n                  className={`input input-bordered w-full ${errors.bank_account_number ? 'input-error' : ''}`}\n                  placeholder=\"Número de cuenta\"\n                />\n                {errors.bank_account_number && <span className=\"text-error text-xs mt-1\">{errors.bank_account_number}</span>}\n              </div>\n              \n              <div className=\"form-control w-full\">\n                <label className=\"label\">\n                  <span className=\"label-text\">Tipo de Cuenta</span>\n                </label>\n                <select\n                  name=\"bank_account_type\"\n                  value={formData.bank_account_type || ''}\n                  onChange={handleChange}\n                  className={`select select-bordered w-full ${errors.bank_account_type ? 'select-error' : ''}`}\n                >\n                  <option value=\"\">Seleccionar tipo de cuenta</option>\n                  {BANK_ACCOUNT_TYPES.map(option => (\n                    <option key={option.value} value={option.value}>{option.label}</option>\n                  ))}\n                </select>\n                {errors.bank_account_type && <span className=\"text-error text-xs mt-1\">{errors.bank_account_type}</span>}\n              </div>\n              \n              <div className=\"form-control w-full\">\n                <label className=\"label\">\n                  <span className=\"label-text\">Origen de la Cuenta (Estado)</span>\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"bank_account_origin\"\n                  value={formData.bank_account_origin || ''}\n                  onChange={handleChange}\n                  className={`input input-bordered w-full ${errors.bank_account_origin ? 'input-error' : ''}`}\n                  placeholder=\"Estado donde se abrió la cuenta\"\n                />\n                {errors.bank_account_origin && <span className=\"text-error text-xs mt-1\">{errors.bank_account_origin}</span>}\n              </div>\n            </div>\n          </div>\n        );\n      \n      case 4:\n        return (\n          <div className=\"space-y-6\">\n            <h3 className=\"text-lg font-semibold\">Documentos</h3>\n            <p className=\"text-sm text-gray-500\">Sube los documentos del cliente. Todos los formatos son aceptados.</p>\n            \n            <DocumentUploader \n              categories={DOCUMENT_CATEGORIES}\n              onDocumentAdded={handleDocumentAdded}\n              onDocumentRemoved={handleDocumentRemoved}\n              existingDocuments={documents}\n              clientId={initialData?.id}\n            />\n          </div>\n        );\n      \n      default:\n        return null;\n    }\n  };\n  \n  return (\n    <div className=\"card bg-base-100 shadow-xl\">\n      <div className=\"card-body\">\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6\">\n          <h2 className=\"card-title text-xl\">\n            {initialData?.id ? 'Editar Cliente' : 'Nuevo Cliente'}\n          </h2>\n          <div className=\"flex items-center mt-2 sm:mt-0\">\n            <span className=\"text-sm mr-2\">{progress}% completado</span>\n            <progress className=\"progress progress-primary w-40\" value={progress} max=\"100\"></progress>\n          </div>\n        </div>\n        \n        <div className=\"mb-6\">\n          <ul className=\"steps steps-horizontal w-full\">\n            <li className={`step ${currentStep >= 1 ? 'step-primary' : ''}`}>Datos Personales</li>\n            <li className={`step ${currentStep >= 2 ? 'step-primary' : ''}`}>Financieros</li>\n            <li className={`step ${currentStep >= 3 ? 'step-primary' : ''}`}>Datos Bancarios</li>\n            <li className={`step ${currentStep >= 4 ? 'step-primary' : ''}`}>Documentos</li>\n          </ul>\n        </div>\n        \n        <form onSubmit={handleSubmit}>\n          {renderStep()}\n          \n          <div className=\"flex justify-between mt-6\">\n            <div>\n              {currentStep > 1 && (\n                <button \n                  type=\"button\" \n                  className=\"btn btn-outline\"\n                  onClick={prevStep}\n                >\n                  Anterior\n                </button>\n              )}\n            </div>\n            \n            <div className=\"flex gap-2\">\n              <button \n                type=\"button\" \n                className=\"btn btn-outline\"\n                onClick={() => navigate('/clients')}\n              >\n                Cancelar\n              </button>\n              \n              {currentStep < 4 ? (\n                <button \n                  type=\"button\" \n                  className=\"btn btn-primary\"\n                  onClick={nextStep}\n                >\n                  Siguiente\n                </button>\n              ) : (\n                <button \n                  type=\"submit\" \n                  className={`btn btn-primary ${isSubmitting ? 'loading' : ''}`}\n                  disabled={isSubmitting}\n                >\n                  {initialData?.id ? 'Actualizar' : 'Guardar'} Cliente\n                </button>\n              )}\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default ClientForm; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}